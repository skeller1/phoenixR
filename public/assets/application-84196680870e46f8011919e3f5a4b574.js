/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
(function(a,b){function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"$1-$2").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function D(){return!1}function E(){return!0}function K(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function M(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")return;a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(x,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}function N(a,b){return(a&&a!=="*"?a+".":"")+b.replace(z,"`").replace(A,"&")}function V(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function W(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(R.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function bg(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function bh(a,b){if(b.nodeType!==1||!f.hasData(a))return;var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}function bi(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}function bj(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bk(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){f.nodeName(a,"input")?bk(a):"getElementsByTagName"in a&&f.grep(a.getElementsByTagName("input"),bk)}function bm(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(be,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bA(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bv:bw;if(d>0)return c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0}),d+"px";d=bx(a,b,b);if(d<0||d==null)d=a.style[b]||0;return d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)}),d+"px"}function bW(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bN),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bX(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bR,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bX(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=bX(a,c,d,e,"*",g)),l}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bC.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)bY(a+"["+e+"]",b[e],c,d);else d(a,b)}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cp(){return setTimeout(cq,0),cn=f.now()}function cq(){cn=b}function cr(a,b){var c={};return f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a}),c}function cs(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)}cg[a]=e}return cg[a]}function cv(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(e.isReady)return;try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z])/ig,x=function(a,b){return b.toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?g=[null,a,null]:g=i.exec(a);if(g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),A.done(a),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(A)return;A=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||D.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(b,c,d){return a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),d=c.documentElement,(!d||!d.nodeName||d.nodeName==="parsererror")&&e.error("Invalid XML: "+b),c},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(H)return H.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function d(c,d){return d&&d instanceof e&&!(d instanceof a)&&(d=a(d)),e.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())}),e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;return f.extend(b,{then:function(a,c){return b.done(a).fail(c),this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g](h)}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b),b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0},m&&f.extend(p,{position:"absolute",left:-1e3,top:-1e3});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;return o=l=g=h=m=j=a=i=null,k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([a-z])([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!l(a)},data:function(a,c,d,e){if(!f.acceptData(a))return;var g=f.expando,h=typeof c=="string",i,j=a.nodeType,k=j?f.cache:a,l=j?a[f.expando]:a[f.expando]&&f.expando;if((!l||e&&l&&!k[l][g])&&h&&d===b)return;l||(j?a[f.expando]=l=++f.uuid:l=f.expando),k[l]||(k[l]={},j||(k[l].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?k[l][g]=f.extend(k[l][g],c):k[l]=f.extend(k[l],c);return i=k[l],e&&(i[g]||(i[g]={}),i=i[g]),d!==b&&(i[f.camelCase(c)]=d),c==="events"&&!i[c]?i[g]&&i[g].events:h?i[f.camelCase(c)]||i[c]:i},removeData:function(b,c,d){if(!f.acceptData(b))return;var e=f.expando,g=b.nodeType,h=g?f.cache:b,i=g?b[f.expando]:f.expando;if(!h[i])return;if(c){var j=d?h[i][e]:h[i];if(j){delete j[c];if(!l(j))return}}if(d){delete h[i][e];if(!l(h[i]))return}var k=h[i][e];f.support.deleteExpando||h!=a?delete h[i]:h[i]=null,k?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=k):g&&(f.support.deleteExpando?delete b[f.expando]:b.removeAttribute?b.removeAttribute(f.expando):b[f.expando]=null)},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");return j[1]=j[1]?"."+j[1]:"",c===b?(d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d)),d===b&&j[1]?this.data(j[0]):d):this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);return d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d)),e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?f.queue(this[0],a):this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);return m(),d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u=/\:|^on/,v,w;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(o);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(o);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(n," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length)return e?(c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type],c&&"get"in c&&(d=c.get(e,"value"))!==b?d:(d=e.value,typeof d=="string"?d.replace(p,""):d==null?"":d)):b;var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType!==1)return;g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}return g&&!d.length&&e.length?f(e[c]).val():d},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if("getAttribute"in a){var h,i,j=g!==1||!f.isXMLDoc(a);return j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=w:v&&c!=="className"&&(f.nodeName(a,"form")||u.test(c))&&(i=v))),d!==b?d===null?(f.removeAttr(a,c),b):i&&"set"in i&&j&&(h=i.set(a,d,c))!==b?h:(a.setAttribute(c,""+d),d):i&&"get"in i&&j&&(h=i.get(a,c))!==null?h:(h=a.getAttribute(c),h===null?b:h)}return f.prop(a,c,d)},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.support.getSetAttribute?a.removeAttribute(b):(f.attr(a,b,""),a.removeAttributeNode(a.getAttributeNode(b))),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},tabIndex:{get:function(a){var c=a.getAttributeNode("tabIndex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}},value:{get:function(a,b){return v&&f.nodeName(a,"button")?v.get(a,b):b in a?a.value:null},set:function(a,b,c){if(v&&f.nodeName(a,"button"))return v.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);return i&&(c=f.propFix[c]||c,h=f.propHooks[c]),d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==b?g:a[c]},propHooks:{}}),w={get:function(a,c){return f.prop(a,c)?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},f.support.getSetAttribute||(f.attrFix=f.propFix,v=f.attrHooks.name=f.attrHooks.title=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(d)return d.nodeValue=b,b}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var x=/\.(.*)$/,y=/^(?:textarea|input|select)$/i,z=/\./g,A=/ /g,B=/[^\w\s.|`]/g,C=function(a){return a.replace(B,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;if(d===!1)d=D;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null},global:{},remove:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;d===!1&&(d=D);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),C).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof 
c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}return a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,N(a.origType,a.selector),f.extend({},a,{handler:M,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,N(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?E:D):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=E;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=E;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=E,this.stopPropagation()},isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D};var F=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},G=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?G:F,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?G:F)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&f(b).closest("form").length&&K("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&K("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var H,I=function(a){var b=a.type,c=a.value;return b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex),c},J=function(a){var c=a.target,d,e;if(!y.test(c.nodeName)||c.readOnly)return;d=f._data(c,"_change_data"),e=I(c),(a.type!=="focusout"||c.type!=="radio")&&f._data(c,"_change_data",e);if(d===b||e===d)return;if(d!=null||e)a.type="change",a.liveFired=b,f.event.trigger(a,arguments[1],c)};f.event.special.change={filters:{focusout:J,beforedeactivate:J,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&J.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&J.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",I(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in H)f.event.add(this,c+".specialChange",H[c]);return y.test(this.nodeName)},teardown:function(a){return f.event.remove(this,".specialChange"),y.test(this.nodeName)}},H=f.event.special.change.filters,H.focus=H.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){return f(this).unbind(a,g),e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;return f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var L={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)===".")return n.unbind(g),this;if(d===!1||f.isFunction(d))e=d||D,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=x.exec(h),k="",j&&(k=j[0],h=h.replace(x,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,L[h]?(a.push(L[h]+k),h=h+k):h=(L[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+N(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+N(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){return h=!1,0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);return o&&(k(o,h,f,g),k.uniqueSort(f)),f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){return a===b?(g=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var O=/Until$/,P=/^(?:parents|prevUntil|prevAll)/,Q=/,/,R=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,T=f.expr.match.POS,U={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(W(this,a,!1),"not",a)},filter:function(a){return this.pushStack(W(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=T.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=T.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return!a||typeof a=="string"?f.inArray(this[0],a?f(a):this.parent().children()):f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(V(c[0])||V(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=S.call(arguments);return O.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!U[a]?f.unique(e):e,(this.length>1||Q.test(d))&&P.test(a)&&(e=e.reverse()),this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var X=/ jQuery\d+="(?:\d+|null)"/g,Y=/^\s+/,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,$=/<([\w:]+)/,_=/<tbody/i,ba=/<|&#?\w+;/,bb=/<(?:script|object|embed|option|style)/i,bc=/checked\s*(?:[^=]|=\s*.checked.)/i,bd=/\/(java|ecma)script/i,be=/^\s*<!(?:\[CDATA\[|\-\-)/,bf={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bf.optgroup=bf.option,bf.tbody=bf.tfoot=bf.colgroup=bf.caption=bf.thead,bf.th=bf.td,f.support.htmlSerialize||(bf._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.isFunction(a)?this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a)):f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f(arguments[0]).toArray()),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(X,""):null;if(typeof a=="string"&&!bb.test(a)&&(f.support.leadingWhitespace||!Y.test(a))&&!bf[($.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Z,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bc.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bg(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bm)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!bb.test(a[0])&&(f.support.checkClone||!bc.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked
)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bi(a,d),e=bj(a),g=bj(d);for(h=0;e[h];++h)bi(e[h],g[h])}if(b){bh(a,d);if(c){e=bj(a),g=bj(d);for(h=0;e[h];++h)bh(e[h],g[h])}}return e=g=null,d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!ba.test(k))k=b.createTextNode(k);else{k=k.replace(Z,"<$1></$2>");var l=($.exec(k)||["",""])[1].toLowerCase(),m=bf[l]||bf._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=_.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&Y.test(k)&&o.insertBefore(b.createTextNode(Y.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bl(k[i]);else bl(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bd.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bn=/alpha\([^)]*\)/i,bo=/opacity=([^)]*)/,bp=/([A-Z]|^ms)/g,bq=/^-?\d+(?:px)?$/i,br=/^-?\d/,bs=/^[+\-]=/,bt=/[^+\-\.\de]+/g,bu={position:"absolute",visibility:"hidden",display:"block"},bv=["Left","Right"],bw=["Top","Bottom"],bx,by,bz;f.fn.css=function(a,c){return arguments.length===2&&c===b?this:f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bx(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];h=typeof d;if(h==="number"&&isNaN(d)||d==null)return;h==="string"&&bs.test(d)&&(d=+d.replace(bt,"")+parseFloat(f.css(a,c)),h="number"),h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bx)return bx(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?bA(a,b,d):(f.swap(a,bu,function(){e=bA(a,b,d)}),e)},set:function(a,b){if(!bq.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bo.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle;c.zoom=1;var e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.filter=bn.test(g)?g.replace(bn,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;return f.swap(a,{display:"inline-block"},function(){b?c=bx(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(by=function(a,c){var d,e,g;c=c.replace(bp,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bz=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!bq.test(d)&&br.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e)),d===""?"auto":d}),bx=by||bz,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bB=/%20/g,bC=/\[\]$/,bD=/\r?\n/g,bE=/#.*$/,bF=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bG=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bH=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,bI=/^(?:GET|HEAD)$/,bJ=/^\/\//,bK=/\?/,bL=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bM=/^(?:select|textarea)/i,bN=/\s+/,bO=/([?&])_=[^&]*/,bP=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bQ=f.fn.load,bR={},bS={},bT,bU;try{bT=e.href}catch(bV){bT=c.createElement("a"),bT.href="",bT=bT.href}bU=bP.exec(bT.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bQ)return bQ.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bL,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bM.test(this.nodeName)||bG.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bD,"\r\n")}}):{name:b.name,value:c.replace(bD,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?f.extend(!0,a,f.ajaxSettings,b):(b=a,a=f.extend(!0,f.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in f.ajaxSettings&&(a[c]=f.ajaxSettings[c]);return a},ajaxSettings:{url:bT,isLocal:bH.test(bU[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML}},ajaxPrefilter:bW(bR),ajaxTransport:bW(bS),ajax:function(a,c){function w(a,c,l,m){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a?4:0;var o,r,u,w=l?bZ(d,v,l):b,x,y;if(a>=200&&a<300||a===304){if(d.ifModified){if(x=v.getResponseHeader("Last-Modified"))f.lastModified[k]=x;if(y=v.getResponseHeader("Etag"))f.etag[k]=y}if(a===304)c="notmodified",o=!0;else try{r=b$(d,w),c="success",o=!0}catch(z){c="parsererror",u=z}}else{u=c;if(!c||a)c="error",a<0&&(a=0)}v.status=a,v.statusText=c,o?h.resolveWith(e,[r,c,v]):h.rejectWith(e,[v,c,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,c]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bF.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bE,"").replace(bJ,bU[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bN),d.crossDomain==null&&(r=bP.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bU[1]&&r[2]==bU[2]&&(r[3]||(r[1]==="http:"?80:443))==(bU[3]||(bU[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bX(bR,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bI.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bK.test(d.url)?"&":"?")+d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bO,"$1_="+x);d.url=y+(y===d.url?(bK.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", */*; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(!d.beforeSend||d.beforeSend.call(e,v,d)!==!1&&s!==2){for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bX(bS,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){status<2?w(-1,z):f.error(z)}}return v}return v.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join("&").replace(bB,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn,co=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cr("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cs(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cr("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cr("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cs(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0}))},stop:function(a,b){return a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue(),this}}),f.each({slideDown:cr("show",1),slideUp:cr("hide",1),slideToggle:cr("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};return d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,b,c){function h(a){return d.step(a)}var d=this,e=f.fx,g;this.startTime=cn||cp(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,h.elem=this.elem,h()&&f.timers.push(h)&&!cl&&(co?(cl=!0,g=function(){cl&&(co(g),e.tick())},co(g)):cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||cp(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}return e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var ct=/^t(?:able|d|h)$/i,cu=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cv(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!ct.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cu.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cu.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;return c===b?(e=this[0],e?(g=cv(e),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]):null):this.each(function(){g=cv(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(f.css(a,d,"padding")):null},f.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c];return e.document.compatMode==="CSS1Compat"&&g||e.document.body["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=f.css(e,d),i=parseFloat(h);return f.isNaN(i)?h:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window),function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var j=d.data("ujs:submit-button");j&&(g.push(j),d.data("ujs:submit-button",null))}else d.is("select")?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);options={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&a.extend(options,{url:f}),c.ajax(options)}},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=a("meta[name=csrf-token]").attr("content"),g=a("meta[name=csrf-param]").attr("content"),h=a('<form method="post" action="'+d+'"></form>'),i='<input name="_method" value="'+e+'" type="hidden" />';g!==b&&f!==b&&(i+='<input name="'+g+'" value="'+f+'" type="hidden" />'),h.hide().append(i).appendTo("body"),h.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.attr("disabled","disabled")})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.removeAttr("disabled")})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c){var d=c.data("events"),e=!0;return d!==b&&d.submit!==b&&a.each(d.submit,function(a,b){if(typeof b.handler=="function")return e=b.handler(b.data)}),e}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(c.linkClickSelector).live("click.rails",function(d){var e=a(this);if(!c.allowAction(e))return c.stopEverything(d);if(e.data("remote")!==b)return c.handleRemote(e),!1;if(e.data("method"))return c.handleMethod(e),!1}),a(c.selectChangeSelector).live("change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(c.formSubmitSelector).live("submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&c.callFormSubmitBindings(e)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(c.formInputClickSelector).live("click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(c.formSubmitSelector).live("ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(c.formSubmitSelector).live("ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})}(jQuery);if(typeof GENTICS=="undefined"||!GENTICS)var GENTICS={};GENTICS.Aloha=function(){},GENTICS.Aloha.setAutobase=function(){var a=document.getElementsByTagName("script"),b=a[a.length-1].src.split("?")[0];b=b.split("/");var c=1;"core"===b[b.length-2]&&(c=2),GENTICS.Aloha.prototype.autobase=b.slice(0,c*-1).join("/")+"/"},GENTICS.Aloha.setAutobase(),GENTICS.Aloha.prototype.version="##ALOHAVERSION##",GENTICS.Aloha.prototype.editables=[],GENTICS.Aloha.prototype.activeEditable=null,GENTICS.Aloha.prototype.ready=!1,GENTICS.Aloha.prototype.dictionaries={},GENTICS.Aloha.prototype.settings={},GENTICS.Aloha.prototype.OSName="Unknown",GENTICS.Aloha.prototype.readyCallbacks=[],GENTICS.Aloha.prototype.init=function(){if(jQuery.browser.webkit&&parseFloat(jQuery.browser.version)<532.5||jQuery.browser.mozilla&&parseFloat(jQuery.browser.version)<1.9||jQuery.browser.msie&&jQuery.browser.version<7||jQuery.browser.opera){alert("Sorry, your browser is not supported at the moment.");return}var a=this;jQuery("html").mousedown(function(){a.activeEditable&&!a.isMessageVisible()&&(a.activeEditable.blur(),a.FloatingMenu.setScope("GENTICS.Aloha.empty"),a.activeEditable=null)});if(typeof this.settings.base=="undefined"||!this.settings.base)this.settings.base=GENTICS.Aloha.autobase,typeof GENTICS_Aloha_base!="undefined"&&(this.settings.base=GENTICS_Aloha_base);this.Log.init(),this.settings.errorhandling!=!1&&(window.onerror=function(a,b,c){return GENTICS.Aloha.Log.error(GENTICS.Aloha,"Error message: "+a+"\nURL: "+b+"\nLine Number: "+c),!0}),navigator.appVersion.indexOf("Win")!=-1&&(this.OSName="Win"),navigator.appVersion.indexOf("Mac")!=-1&&(this.OSName="Mac"),navigator.appVersion.indexOf("X11")!=-1&&(this.OSName="Unix"),navigator.appVersion.indexOf("Linux")!=-1&&(this.OSName="Linux"),this.initI18n(),this.PluginRegistry.init(),this.RepositoryManager.init(),this.Ribbon.init(),this.FloatingMenu.init(),Ext.MessageBox.buttonText.yes=GENTICS.Aloha.i18n(this,"yes"),Ext.MessageBox.buttonText.no=GENTICS.Aloha.i18n(this,"no"),Ext.MessageBox.buttonText.cancel=GENTICS.Aloha.i18n(this,"cancel"),Ext.ux.AlohaAttributeField.prototype.listEmptyText=GENTICS.Aloha.i18n(GENTICS.Aloha,"repository.no_item_found"),Ext.ux.AlohaAttributeField.prototype.loadingText=GENTICS.Aloha.i18n
(GENTICS.Aloha,"repository.loading")+"...",this.ready=!0;for(var b=0;b<this.editables.length;b++)this.editables[b].ready||this.editables[b].init();GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("ready",GENTICS.Aloha,null))},GENTICS.Aloha.prototype.activateEditable=function(a){for(var b=0;b<this.editables.length;b++)if(this.editables[b]!=a&&this.editables[b].isActive){var c=this.editables[b];this.editables[b].blur()}this.activeEditable=a},GENTICS.Aloha.prototype.getActiveEditable=function(){return this.activeEditable},GENTICS.Aloha.prototype.deactivateEditable=function(){if(typeof this.activeEditable=="undefined"||this.activeEditable==null)return;this.activeEditable.blur(),this.FloatingMenu.setScope("GENTICS.Aloha.empty"),this.activeEditable=null},GENTICS.Aloha.prototype.getEditableById=function(a){for(var b=0;b<GENTICS.Aloha.editables.length;b++)if(GENTICS.Aloha.editables[b].getId()==a)return GENTICS.Aloha.editables[b];return null},GENTICS.Aloha.prototype.log=function(a,b,c){GENTICS.Aloha.Log.log(a,b,c)},GENTICS.Aloha.prototype.identStr=function(a){a instanceof jQuery&&(a=a[0]);if(a instanceof HTMLElement){var b=a.tagName.toLowerCase();return a.id?b+"#"+a.id:a.className?b+"."+a.className:b}return GENTICS.Aloha.Log.warn(this,"{"+a.toString()+"} provided is not an HTML element"),a.toString()},GENTICS.Aloha.prototype.trim=function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;b>=0;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a},GENTICS.Aloha.prototype.initI18n=function(){if(typeof this.settings.i18n=="undefined"||!this.settings.i18n)this.settings.i18n={};if(typeof this.settings.i18n.available=="undefined"||!this.settings.i18n.available||!this.settings.i18n.available instanceof Array)this.settings.i18n.available=["en","de","fr","eo","fi","ru","it","pl"];if((typeof this.settings.i18n.current=="undefined"||!this.settings.i18n.current)&&typeof this.settings.i18n.acceptLanguage=="string"){var a=[],b=this.settings.i18n.acceptLanguage.split(",");for(i=0;i<b.length;i++){var c=b[i].split(";");typeof c[1]=="undefined"||!c[1]?c[1]=1:c[1]=parseFloat(c[1].substring(2,c[1].length)),a.push(c)}a.sort(function(a,b){return b[1]-a[1]});for(i=0;i<a.length;i++)if(jQuery.inArray(a[i][0],this.settings.i18n.available)>=0){this.settings.i18n.current=a[i][0];break}}if(typeof this.settings.i18n.current=="undefined"||!this.settings.i18n.current)this.settings.i18n.current=navigator.language?navigator.language:navigator.userLanguage;var d=this.getLanguage(this.settings.i18n.current,this.settings.i18n.available);if(!d)GENTICS.Aloha.Log.error(this,"Could not determine actual language.");else{var e=this.settings.base+"i18n/"+d+".dict";this.loadI18nFile(e,this)}},GENTICS.Aloha.prototype.getLanguage=function(a,b){if(!b instanceof Array)return GENTICS.Aloha.Log.error(this,"Available languages must be an Array"),null;if(typeof a=="undefined"||!a)return b[0];for(var c=0;c<b.length;++c)if(a==b[c])return a;return b[0]},GENTICS.Aloha.prototype.loadI18nFile=function(a,b){jQuery.ajax({async:!1,datatype:"text",url:a,error:function(c,d,e){GENTICS.Aloha.Log.error(b,"Error while getting dictionary file "+a+": server returned "+d)},success:function(c,d,e){GENTICS.Aloha.Log.isInfoEnabled()&&GENTICS.Aloha.Log.info(b,"Loaded dictionary file "+a),GENTICS.Aloha.parseI18nFile(c,b)}})},GENTICS.Aloha.prototype.parseI18nFile=function(a,b){a=a.replace(/\r/g,"");var c=a.split("\n"),d=new Object;for(var e=0;e<c.length;++e){var f=c[e],g=f.indexOf("=");if(g>0){var h=GENTICS.Aloha.trim(f.substring(0,g)),i=GENTICS.Aloha.trim(f.substring(g+1,f.length));i=i.replace(/\\n/g,"\n"),i=i.replace(/\\\\/g,"\\"),d[h]?GENTICS.Aloha.Log.warn(b,"Found duplicate key "+h+" in dictionary file, ignoring"):d[h]=i}}this.dictionaries[b.toString()]=d},GENTICS.Aloha.prototype.i18n=function(a,b,c){var d=null;this.dictionaries[a.toString()]&&this.dictionaries[a.toString()][b]&&(d=this.dictionaries[a.toString()][b]),!d&&a!=GENTICS.Aloha&&this.dictionaries[GENTICS.Aloha.toString()]&&this.dictionaries[GENTICS.Aloha.toString()][b]&&(d=this.dictionaries[GENTICS.Aloha.toString()][b]);if(!d)return"??? "+b+" ???";if(typeof c!="undefined"&&c!=null)for(var e=0;e<c.length;++e)if(typeof c[e]!="undefined"&&c[e]!=null){var f=new RegExp("\\{"+e+"\\}","g"),g=c[e].toString().replace(/\{/g,"\\{");g=g.replace(/\}/g,"\\}"),d=d.replace(f,g)}return d=d.replace(/\{\d\}/g,""),d=d.replace(/\\\{/g,"{"),d=d.replace(/\\\}/g,"}"),d},GENTICS.Aloha.prototype.registerEditable=function(a){this.editables.push(a)},GENTICS.Aloha.prototype.unregisterEditable=function(a){var b=this.editables.indexOf(a);b!=-1&&this.editables.splice(b,1)},GENTICS.Aloha.prototype.showMessage=function(a){GENTICS.Aloha.FloatingMenu.obj&&GENTICS.Aloha.FloatingMenu.obj.css("z-index",8900);switch(a.type){case GENTICS.Aloha.Message.Type.ALERT:Ext.MessageBox.alert(a.title,a.text,a.callback);break;case GENTICS.Aloha.Message.Type.CONFIRM:Ext.MessageBox.confirm(a.title,a.text,a.callback);break;case GENTICS.Aloha.Message.Type.WAIT:Ext.MessageBox.wait(a.text,a.title);break;default:this.log("warn",this,"Unknown message type for message {"+a.toString()+"}")}},GENTICS.Aloha.prototype.hideMessage=function(){Ext.MessageBox.hide()},GENTICS.Aloha.prototype.isMessageVisible=function(){return Ext.MessageBox.isVisible()},GENTICS.Aloha.prototype.toString=function(){return"GENTICS.Aloha"},GENTICS.Aloha.prototype.isModified=function(){for(var a in this.editables)if(this.editables[a].isModified&&this.editables[a].isModified())return!0;return!1},GENTICS.Aloha=new GENTICS.Aloha,Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),jQuery.isAloha=!0,jQuery(document).ready(function(){!jQuery.isAloha&&window.console&&console.error&&console.error("Aloha ERROR: jQuery was included at least a second time after loading Aloha. This will cause serious problems. You must not load other versions of jQuery with Aloha."),Ext.isReady?GENTICS.Aloha.init():Ext.onReady(function(){GENTICS.Aloha.init()})}),function(){function c(a){var b=document.createElement("link");return b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a),b.setAttribute("media","all"),b}if(typeof this.GENTICS_Aloha_autoloadcss=="undefined"||this.GENTICS_Aloha_autoloadcss!=!1){var a=GENTICS.Aloha.autobase;typeof GENTICS_Aloha_base!="undefined"&&(a=GENTICS_Aloha_base);var b=document.getElementsByTagName("head")[0];b.appendChild(c(a+"css/aloha.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"deps/extjs/resources/css/ext-all.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"deps/extjs/resources/css/xtheme-gray.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"deps/prettyPhoto/resources/css/prettyPhoto.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"plugins/com.gentics.aloha.plugins.Table/resources/table.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"plugins/com.gentics.aloha.plugins.Link/css/Link.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"plugins/com.gentics.aloha.plugins.HighlightEditables/css/HighlightEditables.css?v="+GENTICS.Aloha.version)),b.appendChild(c(a+"plugins/com.gentics.aloha.plugins.LinkChecker/css/LinkChecker.css?v="+GENTICS.Aloha.version))}}(),GENTICS.Aloha.Editable=function(a){a.attr("id")||a.attr("id",GENTICS.Utils.guid()),this.obj=a,this.ready=!1,GENTICS.Aloha.registerEditable(this),this.init()},GENTICS.Aloha.Editable.prototype.isActive=!1,GENTICS.Aloha.Editable.prototype.originalContent=null,GENTICS.Aloha.Editable.prototype.range=undefined,GENTICS.Aloha.Editable.prototype.check=function(){var a=this.obj,b=a.get(0),c=b.nodeName.toLowerCase(),d=["a","abbr","address","article","aside","b","bdo","blockquote","cite","code","command","del","details","dfn","div","dl","em","footer","h1","h2","h3","h4","h5","h6","header","i","ins","menu","nav","p","pre","q","ruby","section","small","span","strong","sub","sup","var"];for(var e=0;e<d.length;e++){var f=c;if(c==d[e])return!0}switch(c){case"label":case"button":break;case"textarea":var g=jQuery("<div/>").insertAfter(a);g.html(a.val()),a.hide();var h=function(){var b=g.html();a.val(b)};return a.parents("form:first").submit(h),this.obj=g,!0;default:}return!1},GENTICS.Aloha.Editable.prototype.init=function(){var a=this;if(!this.check(this.obj)){this.destroy();return}GENTICS.Aloha.ready&&(this.obj.addClass("GENTICS_editable"),this.obj.attr("contentEditable",!0),this.obj.mousedown(function(b){return a.activate(b)}),this.obj.focus(function(b){return a.activate(b)}),this.obj.keydown(function(a){return GENTICS.Aloha.Markup.preProcessKeyStrokes(a)}),this.obj.keyup(function(a){if(a.keyCode==27)return GENTICS.Aloha.deactivateEditable(),!1}),this.obj.GENTICS_contentEditableSelectionChange(function(b){return GENTICS.Aloha.Selection.onChange(a.obj,b),a.obj}),GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("editableCreated",GENTICS.Aloha,[this])),this.setUnmodified(),this.ready=!0)},GENTICS.Aloha.Editable.prototype.destroy=function(){var a=this;this.blur(),this.ready=!1,this.obj.removeClass("GENTICS_editable"),this.obj.removeAttr("contentEditable"),this.obj.unbind("mousedown"),this.obj.unbind("focus"),this.obj.unbind("keydown"),this.obj.unbind("keyup"),this.isActive&&(GENTICS.Aloha.FloatingMenu.obj.hide(),GENTICS.Aloha.FloatingMenu.shadow.hide()),GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("editableDestroyed",GENTICS.Aloha,[this])),GENTICS.Aloha.unregisterEditable(this)},GENTICS.Aloha.Editable.prototype.setUnmodified=function(){this.originalContent=this.getContents()},GENTICS.Aloha.Editable.prototype.isModified=function(){return this.originalContent!=this.getContents()?!0:!1},GENTICS.Aloha.Editable.prototype.toString=function(){return"GENTICS.Aloha.Editable"},GENTICS.Aloha.Editable.prototype.isDisabled=function(){return this.obj.attr("contentEditable")=="false"||!this.obj.attr("contentEditable")?!0:!1},GENTICS.Aloha.Editable.prototype.disable=function(){if(this.isDisabled())return;this.obj.attr("contentEditable","false")},GENTICS.Aloha.Editable.prototype.enable=function(){if(!this.isDisabled())return;this.obj.attr("contentEditable","true")},GENTICS.Aloha.Editable.prototype.activate=function(a){a&&a.stopPropagation();var b=GENTICS.Aloha.getActiveEditable();if(a&&a.type=="focus"&&b!=null&&b.obj.parent().get(0)==a.currentTarget)return;if(this.isActive||this.isDisabled())return;GENTICS.Aloha.activateEditable(this),document.selection&&document.selection.createRange&&this.obj.mouseup(),this.isActive=!0,GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("editableActivated",GENTICS.Aloha,{oldActive:b,editable:this})),GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("editableActivated",this,{oldActive:GENTICS.Aloha.getActiveEditable()}))},GENTICS.Aloha.Editable.prototype.blur=function(){this.obj.blur(),this.isActive=!1,GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("editableDeactivated",GENTICS.Aloha,{editable:this})),GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("editableDeactivated",this))},GENTICS.Aloha.Editable.prototype.empty=function(a){return null===a?!0:GENTICS.Aloha.trim(a)==""||a=="<br>"},GENTICS.Aloha.Editable.prototype.getContents=function(){var a=this.obj.clone(!0);return a.find(".GENTICS_cleanme").remove(),GENTICS.Aloha.PluginRegistry.makeClean(a),a.html()},GENTICS.Aloha.Editable.prototype.getId=function(){return this.obj.attr("id")},GENTICS.Aloha.Event=function(a,b,c){this.name=a,b?this.source=b:this.source=GENTICS.Aloha,this.properties=c},GENTICS.Aloha.EventRegistry=function(){},GENTICS.Aloha.EventRegistry.prototype.subscribe=function(a,b,c){jQuery(a).bind(b,c)},GENTICS.Aloha.EventRegistry.prototype.trigger=function(a){jQuery(a.source).trigger(a.name,a.properties)},GENTICS.Aloha.EventRegistry=new GENTICS.Aloha.EventRegistry,Ext.data.AlohaProxy=function(){var a={};a[Ext.data.Api.actions.read]=!0,Ext.data.AlohaProxy.superclass.constructor.call(this,{api:a}),this.params={queryString:null,objectTypeFilter:null,filter:null,inFolderId:null,orderBy:null,maxItems:null,skipCount:null,renditionFilter:null,repositoryId:null}},Ext.extend(Ext.data.AlohaProxy,Ext.data.DataProxy,{doRequest:function(a,b,c,d,e,f,g){var h=this.params;jQuery.extend(h,c);try{GENTICS.Aloha.RepositoryManager.query(h,function(a){var b=d.readRecords(a);e.call(f,b,g,!0)})}catch(i){return this.fireEvent("loadexception",this,null,g,i),this.fireEvent("exception",this,"response",a,g,null,i),!1}},setObjectTypeFilter:function(a){this.params.objectTypeFilter=a},getObjectTypeFilter:function(){return this.params.objectTypeFilter},setParams:function(a){jQuery.extend(this.params,a)}}),Ext.data.AlohaObjectReader=function(a,b){a={},Ext.applyIf(a,{idProperty:"id",root:"items",totalProperty:"results",fields:["id","url","name","type","weight","path","repositoryId"]}),Ext.data.JsonReader.superclass.constructor.call(this,a,a.fields)},Ext.extend(Ext.data.AlohaObjectReader,Ext.data.JsonReader,{}),Ext.tree.AlohaTreeLoader=function(a){Ext.apply(this,a),Ext.tree.AlohaTreeLoader.superclass.constructor.call(this)},Ext.extend(Ext.tree.AlohaTreeLoader,Ext.tree.TreeLoader,{paramOrder:["node","id"],nodeParameter:"id",directFn:function(a,b,c){var d={inFolderId:a.id,objectTypeFilter:this.objectTypeFilter,repositoryId:a.repositoryId};GENTICS.Aloha.RepositoryManager.getChildren(d,function(b){var d={};d={status:!0,scope:this,argument:{callback:c,node:a}},typeof c=="function"&&c(b,d)})},createNode:function(a){return a.name&&(a.text=a.name),a.hasMoreItems&&(a.leaf=!a.hasMoreItems),a.objectType&&(a.cls=a.objectType),Ext.tree.TreeLoader.prototype.createNode.call(this,a)},objectTypeFilter:null,setObjectTypeFilter:function(a){this.objectTypeFilter=a},getObjectTypeFilter:function(){return this.objectTypeFilter}}),GENTICS.Aloha.FloatingMenu={},GENTICS.Aloha.FloatingMenu.scopes={"GENTICS.Aloha.empty":{name:"GENTICS.Aloha.empty",extendedScopes:[],buttons:[]},"GENTICS.Aloha.global":{name:"GENTICS.Aloha.global",extendedScopes:["GENTICS.Aloha.empty"],buttons:[]},"GENTICS.Aloha.continuoustext":{name:"GENTICS.Aloha.continuoustext",extendedScopes:["GENTICS.Aloha.global"],buttons:[]}},GENTICS.Aloha.FloatingMenu.tabs=[],GENTICS.Aloha.FloatingMenu.tabMap={},GENTICS.Aloha.FloatingMenu.initialized=!1,GENTICS.Aloha.FloatingMenu.allButtons=[],GENTICS.Aloha.FloatingMenu.top=100,GENTICS.Aloha.FloatingMenu.left=100,GENTICS.Aloha.FloatingMenu.pinned=!1,GENTICS.Aloha.FloatingMenu.window=jQuery(window),GENTICS.Aloha.FloatingMenu.init=function(){this.currentScope="GENTICS.Aloha.global";var a=this;this.window.unload(function(){a.pinned?(jQuery.cookie("GENTICS.Aloha.FloatingMenu.pinned","true"),jQuery.cookie("GENTICS.Aloha.FloatingMenu.top",a.obj.offset().top),jQuery.cookie("GENTICS.Aloha.FloatingMenu.left",a.obj.offset().left),GENTICS.Aloha.Log.isInfoEnabled()&&GENTICS.Aloha.Log.info(this,"stored FloatingMenu pinned position {"+a.obj.offset().left+", "+a.obj.offset().top+"}")):(jQuery.cookie("GENTICS.Aloha.FloatingMenu.pinned",null),jQuery.cookie("GENTICS.Aloha.FloatingMenu.top",null),jQuery.cookie("GENTICS.Aloha.FloatingMenu.left",null)),a.userActivatedTab&&jQuery.cookie("GENTICS.Aloha.FloatingMenu.activeTab",a.userActivatedTab)}).resize(function(){var b=a.calcFloatTarget(GENTICS.Aloha.Selection.getRangeObject());b&&a.floatTo(b)}),this.generateComponent(),this.initialized=!0},GENTICS.Aloha.FloatingMenu.obj=null,GENTICS.Aloha.FloatingMenu.shadow=null,GENTICS.Aloha.FloatingMenu.panelBody=null,GENTICS.Aloha.FloatingMenu.generateComponent=function(){var a=this;Ext.QuickTips.init(),Ext.apply(Ext.QuickTips.getQuickTip(),{minWidth:10}),!this.extTabPanel,this.extTabPanel=new Ext.TabPanel({activeTab:0,width:400,plain:!1,draggable:{insertProxy:!1,onDrag:function(a){var b=this.proxy.getEl();this.x=b.getLeft(!0),this.y=b.getTop(!0),GENTICS.Aloha.FloatingMenu.shadow.hide()},endDrag:function(b){if(GENTICS.Aloha.FloatingMenu.pinned)var c=this.y-jQuery(document).scrollTop();else var c=this.y;a.left=this.x,a.top=c,this.panel.setPosition(this.x,c),GENTICS.Aloha.FloatingMenu.refreshShadow(),GENTICS.Aloha.FloatingMenu.shadow.show()}},floating:!0,defaults:{autoScroll:!0},layoutOnTabChange:!0,shadow:!1,cls:"GENTICS_floatingmenu ext-root",listeners:{tabchange:{fn:function(b,c){c.title!=a.autoActivatedTab?(GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(a,"User selected tab "+c.title),a.userActivatedTab=c.title):GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(a,"Tab "+c.title+" was activated automatically"),a.autoActivatedTab=undefined,jQuery.each(a.allButtons,function(a,b){typeof b.button!="undefined"&&typeof b.button.extButton!="undefined"&&typeof b.button.extButton.setActiveDOMElement=="function"&&typeof b.button.extButton.activeDOMElement!="undefined"&&b.button.extButton.setActiveDOMElement(b.button.extButton.activeDOMElement)}),GENTICS.Aloha.FloatingMenu.shadow.show(),GENTICS.Aloha.FloatingMenu.refreshShadow()}}},enableTabScroll:!0}),jQuery.each(this.tabs,function(b,c){a.extTabPanel.add(c.getExtComponent())}),jQuery("body").append('<div id="GENTICS_floatingmenu_shadow" class="GENTICS_shadow">&#160;</div>'),this.shadow=jQuery("#GENTICS_floatingmenu_shadow");var b=this.extTabPanel.add({title:"&#160;"});this.extTabPanel.render(document.body),jQuery(b.tabEl).addClass("GENTICS_floatingmenu_pin").html("&#160;").mousedown(function(b){a.togglePin(),b.stopPropagation()}),this.panelBody=jQuery(".GENTICS_floatingmenu .x-tab-panel-bwrap"),this.doLayout(),this.obj=jQuery(this.extTabPanel.getEl().dom),jQuery.cookie("GENTICS.Aloha.FloatingMenu.pinned")=="true"&&(this.togglePin(),this.top=parseInt(jQuery.cookie("GENTICS.Aloha.FloatingMenu.top")),this.left=parseInt(jQuery.cookie("GENTICS.Aloha.FloatingMenu.left")),this.top<30&&(this.top=30),this.left<0&&(this.left=0),GENTICS.Aloha.Log.isInfoEnabled()&&GENTICS.Aloha.Log.info(this,"restored FloatingMenu pinned position {"+this.left+", "+this.top+"}"),this.refreshShadow()),jQuery.cookie("GENTICS.Aloha.FloatingMenu.activeTab")&&(this.userActivatedTab=jQuery.cookie("GENTICS.Aloha.FloatingMenu.activeTab")),this.extTabPanel.setPosition(this.left,this.top),this.obj.mousedown(function(a){a.stopPropagation()}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(b,c){if(!a.pinned){var d=a.calcFloatTarget(c);d&&a.floatTo(d)}})},GENTICS.Aloha.FloatingMenu.refreshShadow=function(){if(!this.panelBody)return;GENTICS.Aloha.FloatingMenu.shadow.css("top",this.top+24),GENTICS.Aloha.FloatingMenu.shadow.css("left",this.left),GENTICS.Aloha.FloatingMenu.shadow.width(this.panelBody.width()),GENTICS.Aloha.FloatingMenu.shadow.height(this.panelBody.height())},GENTICS.Aloha.FloatingMenu.togglePin=function(){var a=jQuery(".GENTICS_floatingmenu_pin");this.pinned?(a.removeClass("GENTICS_floatingmenu_pinned"),this.top=this.obj.offset().top,this.obj.css("top",this.top),this.obj.css("position","absolute"),this.shadow.css("position","absolute"),this.refreshShadow(),this.pinned=!1):(a.addClass("GENTICS_floatingmenu_pinned"),this.top=this.obj.offset().top-this.window.scrollTop(),this.obj.css("top",this.top),this.obj.css("position","fixed"),this.shadow.css("position","fixed"),this.refreshShadow(),this.pinned=!0)},GENTICS.Aloha.FloatingMenu.createScope=function(a,b){typeof b=="undefined"?b=["GENTICS.Aloha.empty"]:typeof b=="string"&&(b=[b]);var c=this.scopes[a];c||(this.scopes[a]={name:a,extendedScopes:b,buttons:[]})},GENTICS.Aloha.FloatingMenu.addButton=function(a,b,c,d){var e=this.scopes[a];typeof e!="undefined";var f={button:b,scopeVisible:!1};this.allButtons.push(f),e.buttons.push(f);var g=this.tabMap[c];typeof g=="undefined"&&(g=new GENTICS.Aloha.FloatingMenu.Tab(c),this.tabs.push(g),this.tabMap[c]=g);var h=g.getGroup(d);h.addButton(f),this.initialized&&this.generateComponent()},GENTICS.Aloha.FloatingMenu.doLayout=function(){GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"doLayout called for FloatingMenu, scope is "+this.currentScope);var a=this,b=!1,c=this.extTabPanel.getActiveTab(),d=!1,e=!1,f=!1;jQuery.each(this.tabs,function(g,h){h.extPanel==c&&(d=h);var i=h.visible;h.doLayout()?(e=!0,i||(GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(a,"showing tab strip for tab "+h.label),a.extTabPanel.unhideTabStripItem(h.extPanel)),b==!1&&(b=h),a.userActivatedTab==h.extPanel.title&&h.extPanel!=c&&(f=h)):i&&(GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(a,"hiding tab strip for tab "+h.label),a.extTabPanel.hideTabStripItem(h.extPanel))}),f?(GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"Setting active tab to "+f.label),this.extTabPanel.setActiveTab(f.extPanel)):typeof d=="object"&&typeof b=="object"&&(d.visible||(GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"Setting active tab to "+b.label),this.autoActivatedTab=b.extPanel.title,this.extTabPanel.setActiveTab(b.extPanel)));if(e&&this.extTabPanel.hidden)this.extTabPanel.show(),this.refreshShadow(),this.shadow.show(),this.extTabPanel.setPosition(this.left,this.top);else if(!e&&!this.extTabPanel.hidden){var g=this.extTabPanel.getPosition(!0);this.left=g[0]<0?100:g[0],this.top=g[1]<0?100:g[1],this.extTabPanel.hide(),this.shadow.hide()}this.extTabPanel.doLayout()},GENTICS.Aloha.FloatingMenu.setScope=function(a){var b=this.scopes[a];typeof b!="undefined"&&this.currentScope!=a&&(this.currentScope=a,jQuery.each(this.allButtons,function(a,b){b.scopeVisible=!1}),this.setButtonScopeVisibility(b),this.doLayout())},GENTICS.Aloha.FloatingMenu.setButtonScopeVisibility=function(a){var b=this;jQuery.each(a.buttons,function(a,b){b.scopeVisible=!0}),jQuery.each(a.extendedScopes,function(a,c){var d=b.scopes[c];typeof d=="object"&&b.setButtonScopeVisibility(d)})},GENTICS.Aloha.FloatingMenu.nextFloatTargetObj=function(a,b){if(!a||a==b)return a;switch(a.nodeName.toLowerCase()){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"div":case"td":case"pre":case"ul":case"ol":return a;default:return this.nextFloatTargetObj(a.parentNode,b)}},GENTICS.Aloha.FloatingMenu.calcFloatTarget=function(a){if(!GENTICS.Aloha.activeEditable||typeof a.getCommonAncestorContainer=="undefined")return!1;for(var b=0;b<GENTICS.Aloha.editables.length;b++)if(GENTICS.Aloha.editables[b].obj.get(0)==a.limitObject&&GENTICS.Aloha.editables[b].isDisabled())return!1;var c=jQuery(this.nextFloatTargetObj(a.getCommonAncestorContainer(),a.limitObject)),d=GENTICS.Utils.Position.Scroll.top,e=c.offset().top-this.obj.height()-50,f=0;return GENTICS.Aloha.Ribbon&&GENTICS.Aloha.settings.ribbon===!0&&(f=30),e<d+f&&(e=c.offset().top+c.height()+f),e>this.window.height()+this.window.scrollTop()?!1:{x:GENTICS.Aloha.activeEditable.obj.offset().left,y:e}},GENTICS.Aloha.FloatingMenu.floatTo=function(a){if(this.pinned)return;var b=this;if(!this.floatedTo||this.floatedTo.x!=a.x||this.floatedTo.y!=a.y)this.obj.animate({top:a.y,left:a.x},{queue:!1,step:function(a,c){c.prop=="top"?b.top=c.now:c.prop=="left"&&(b.left=c.now),b.refreshShadow()}}),this.floatedTo=a},GENTICS.Aloha.FloatingMenu.Tab=function(a){this.label=a,this.groups=[],this.groupMap={},this.visible=!0},GENTICS.Aloha.FloatingMenu.Tab.prototype.getGroup=function(a){var b=this.groupMap[a];return typeof b=="undefined"&&(b=new GENTICS.Aloha.FloatingMenu.Group,this.groupMap[a]=b,this.groups.push(b)),b},GENTICS.Aloha.FloatingMenu.Tab.prototype.getExtComponent=function(){var a=this;return typeof this.extPanel=="undefined"&&(this.extPanel=new Ext.Panel({tbar:[],title:this.label,style:"margin-top:0px",bodyStyle:"display:none",autoScroll:!0}),jQuery.each(this.groups,function(b,c){a.extPanel.getTopToolbar().add(c.getExtComponent())})),this.extPanel},GENTICS.Aloha.FloatingMenu.Tab.prototype.doLayout=function(){var a=this;return GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"doLayout called for tab "+this.label),this.visible=!1,jQuery.each(this.groups,function(b,c){a.visible|=c.doLayout()}),GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"tab "+this.label+(this.visible?" is ":" is not ")+"visible now"),this.visible},GENTICS.Aloha.FloatingMenu.Group=function(){this.buttons=[]},GENTICS.Aloha.FloatingMenu.Group.prototype.addButton=function(a){this.buttons.push(a)},GENTICS.Aloha.FloatingMenu.Group.prototype.getExtComponent=function(){var a=this;if(typeof this.extButtonGroup=="undefined"){var b=[],c=0;jQuery.each(this.buttons,function(a,d){b.push(d.button.getExtConfigProperties()),c+=d.button.size=="small"?1:2}),this.extButtonGroup=new Ext.ButtonGroup({columns:Math.ceil(c/2),items:b}),jQuery.each(this.buttons,function(b,c){c.button.extButton=a.extButtonGroup.findById(c.button.id);if(c.button.listenerQueue&&c.button.listenerQueue.length>0)while(l=c.button.listenerQueue.shift())c.button.extButton.addListener(l.eventName,l.handler,l.scope,l.options);c.button.extButton.setObjectTypeFilter&&(c.button.objectTypeFilter&&(c.button.extButton.noQuery=!1),c.button.objectTypeFilter=="all"&&(c.button.objectTypeFilter=null),c.button.extButton.setObjectTypeFilter(c.button.objectTypeFilter),c.button.displayField&&(c.button.extButton.displayField=c.button.displayField),c.button.tpl&&(c.button.extButton.tpl=c.button.tpl))})}return this.extButtonGroup},GENTICS.Aloha.FloatingMenu.Group.prototype.doLayout=function(){var a=!1,b=this;return jQuery.each(this.buttons,function(c,d){var e=b.extButtonGroup.findById(d.button.id),f=d.button.isVisible()&&d.scopeVisible;f&&e.hidden?e.show():!f&&!e.hidden&&e.hide(),a|=f}),a&&this.extButtonGroup.hidden?this.extButtonGroup.show():!a&&!this.extButtonGroup.hidden&&this.extButtonGroup.hide(),a},document.attachEvent&&document.selection&&function(){function c(b){this._document=b,this.startContainer=this.endContainer=b.body,this.endOffset=a.getNodeLength(b.body)}function d(b){this.range=b;if(b.collapsed)return;var c=b.commonAncestorContainer;this._next=b.startContainer==c&&!a.isDataNode(b.startContainer)?b.startContainer.childNodes[b.startOffset]:a.findClosestAncestor(c,b.startContainer),this._end=b.endContainer==c&&!a.isDataNode(b.endContainer)?b.endContainer.childNodes[b.endOffset]:a.findClosestAncestor(c,b.endContainer).nextSibling}function e(a){this._document=a;var b=this;a.attachEvent("onselectionchange",function(){b._selectionChangeHandler()})}var a={findChildPosition:function(a){for(var b=0;a=a.previousSibling;b++)continue;return b},isDataNode:function(a){return a&&a.nodeValue!==null&&a.data!==null},isAncestorOf:function(b,c){return!a.isDataNode(b)&&(b.contains(a.isDataNode(c)?c.parentNode:c)||c.parentNode==b)},isAncestorOrSelf:function(b,c){return a.isAncestorOf(b,c)||b==c},findClosestAncestor:function(b,c){if(a.isAncestorOf(b,c))while(c&&c.parentNode!=b)c=c.parentNode;return c},getNodeLength:function(b){return a.isDataNode(b)?b.length:b.childNodes.length},splitDataNode:function(b,c){if(!a.isDataNode(b))return!1;var d=b.cloneNode(!1);b.deleteData(c,b.length),d.deleteData(0,c),b.parentNode.insertBefore(d,b.nextSibling)}},b={convertToDOMRange:function(a,b){function d(a,c,d){var e=b.createElement("a"),f=c.duplicate();f.collapse(d);var g=f.parentElement();do g.insertBefore(e,e.previousSibling),f.moveToElementText(e);while(f.compareEndPoints(d?"StartToStart":"StartToEnd",c)>0&&e.previousSibling);f.compareEndPoints(d?"StartToStart":"StartToEnd",c)==-1&&e.nextSibling?(f.setEndPoint(d?"EndToStart":"EndToEnd",c),a[d?"setStart":"setEnd"](e.nextSibling,f.text.length)):a[d?"setStartBefore":"setEndBefore"](e),e.parentNode.removeChild(e)}var e=new c(b);return d(e,a,!0),d(e,a,!1),e},convertFromDOMRange:function(b){function c(b,c,d){var e=c[d?"startContainer":"endContainer"],f=c[d?"startOffset":"endOffset"],g=0,h=a.isDataNode(e)?e:e.childNodes[f],i=a.isDataNode(e)?e.parentNode:e;if(e.nodeType==3||e.nodeType==4)g=f;var j=c._document.createElement("a");i.insertBefore(j,h);var k=c._document.body.createTextRange();k.moveToElementText(j),j.parentNode.removeChild(j),b.setEndPoint(d?"StartToStart":"EndToStart",k),b[d?"moveStart":"moveEnd"]("character",g)}var d=b._document.body.createTextRange();return c(d,b,!0),c(d,b,!1),d}};c.START_TO_START=0,c.START_TO_END=1,c.END_TO_END=2,c.END_TO_START=3,c.prototype={startContainer:null,startOffset:0,endContainer:null,endOffset:0,commonAncestorContainer:null,collapsed:!1,_document:null,_refreshProperties:function(){this.collapsed=this.startContainer==this.endContainer&&this.startOffset==this.endOffset;var b=this.startContainer;while(b&&b!=this.endContainer&&!a.isAncestorOf(b,this.endContainer))b=b.parentNode;this.commonAncestorContainer=b},setStart:function(a,b){this.startContainer=a,this.startOffset=b,this._refreshProperties()},setEnd:function(a,b){this.endContainer=a,this.endOffset=b,this._refreshProperties()},setStartBefore:function(b){this.setStart(b.parentNode,a.findChildPosition(b))},setStartAfter:function(b){this.setStart(b.parentNode,a.findChildPosition(b)+1)},setEndBefore:function(b){this.setEnd(b.parentNode,a.findChildPosition(b))},setEndAfter:function(b){this.setEnd(b.parentNode,a.findChildPosition(b)+1)},selectNode:function(a){this.setStartBefore(a),this.setEndAfter(a)},selectNodeContents:function(b){this.setStart(b,0),this.setEnd(b,a.getNodeLength(b))},collapse:function(a){a?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},cloneContents:function(){return function a(b){for(var c,d=document.createDocumentFragment();c=b.next();)c=c.cloneNode(!b.hasPartialSubtree()),b.hasPartialSubtree()&&c.appendChild(a(b.getSubtreeIterator())),d.appendChild(c);return d}(new d(this))},extractContents:function(){var b=this.cloneRange();return this.startContainer!=this.commonAncestorContainer&&this.setStartAfter(a.findClosestAncestor(this.commonAncestorContainer,this.startContainer)),this.collapse(!0),function c(a){for(var b,d=document.createDocumentFragment();b=a.next();)a.hasPartialSubtree()?b=b.cloneNode(!1):a.remove(),a.hasPartialSubtree()&&b.appendChild(c(a.getSubtreeIterator())),d.appendChild(b);return d}(new d(b))},deleteContents:function(){var b=this.cloneRange();this.startContainer!=this.commonAncestorContainer&&this.setStartAfter(a.findClosestAncestor(this.commonAncestorContainer,this.startContainer)),this.collapse(!0),function c(a){while(a.next())a.hasPartialSubtree()?c(a.getSubtreeIterator()):a.remove()}(new d(b))},insertNode:function(b){a.isDataNode(this.startContainer)?(a.splitDataNode(this.startContainer,this.startOffset),this.startContainer.parentNode.insertBefore(b,this.startContainer.nextSibling)):this.startContainer.insertBefore(b,this.startContainer.childNodes[this.startOffset]),this.setStart(this.startContainer,this.startOffset)},surroundContents:function(a){var b=this.extractContents();this.insertNode(a),a.appendChild(b),this.selectNode(a)},compareBoundaryPoints:function(a,b){var d,e,f,g;switch(a){case c.START_TO_START:case c.START_TO_END:d=this.startContainer,e=this.startOffset;break;case c.END_TO_END:case c.END_TO_START:d=this.endContainer,e=this.endOffset}switch(a){case c.START_TO_START:case c.END_TO_START:f=b.startContainer,g=b.startOffset;break;case c.START_TO_END:case c.END_TO_END:f=b.endContainer,g=b.endOffset}return d.sourceIndex<f.sourceIndex?-1:d.sourceIndex==f.sourceIndex?e<g?-1:e==g?0:1:1},cloneRange:function(){var a=new c(this._document);return a.setStart(this.startContainer,this.startOffset),a.setEnd(this.endContainer,this.endOffset),a},detach:function(){},toString:function(){return b.convertFromDOMRange(this).text},createContextualFragment:function(b){var c=(a.isDataNode(this.startContainer)?this.startContainer.parentNode:this.startContainer).cloneNode(!1);c.innerHTML=b;for(var d=this._document.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d}},d.prototype={range:null,_current:null,_next:null,_end:null,hasNext:function(){return!!this._next},next:function(){var b=this._current=this._next;return this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null,a.isDataNode(this._current)&&(this.range.endContainer==this._current&&(b=b.cloneNode(!0)).deleteData(this.range.endOffset,b.length-this.range.endOffset),this.range.startContainer==this._current&&(b=b.cloneNode(!0)).deleteData(0,this.range.startOffset)),b},remove:function(){if(!a.isDataNode(this._current)||this.range.startContainer!=this._current&&this.range.endContainer!=this._current)this._current.parentNode.removeChild(this._current);else{var b=this.range.startContainer==this._current?this.range.startOffset:0,c=this.range.endContainer==this._current?this.range.endOffset:this._current.length;this._current.deleteData(b,c-b)}},hasPartialSubtree:function(){return!a.isDataNode(this._current)&&(a.isAncestorOrSelf(this._current,this.range.startContainer)||a.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var b=new c(this.range._document);return b.selectNodeContents(this._current
),a.isAncestorOrSelf(this._current,this.range.startContainer)&&b.setStart(this.range.startContainer,this.range.startOffset),a.isAncestorOrSelf(this._current,this.range.endContainer)&&b.setEnd(this.range.endContainer,this.range.endOffset),new d(b)}},e.prototype={rangeCount:0,_document:null,_selectionChangeHandler:function(){this.rangeCount=this._selectionExists(this._document.selection.createRange())?1:0},_selectionExists:function(a){return a.compareEndPoints("StartToEnd",a)!=0||a.parentElement().isContentEditable},addRange:function(a){var c=this._document.selection.createRange(),d=b.convertFromDOMRange(a);this._selectionExists(c)?(d.compareEndPoints("StartToStart",c)==-1&&(d.compareEndPoints("StartToEnd",c)>-1&&d.compareEndPoints("EndToEnd",c)==-1?c.setEndPoint("StartToStart",d):d.compareEndPoints("EndToStart",c)<1&&d.compareEndPoints("EndToEnd",c)>-1&&c.setEndPoint("EndToEnd",d)),c.select()):d.select()},removeAllRanges:function(){this._document.selection.empty()},getRangeAt:function(a){var c=this._document.selection.createRange();return this._selectionExists(c)?b.convertToDOMRange(c,this._document):null},toString:function(){return this._document.selection.createRange().text}},document.createRange=function(){return new c(document)};var f=new e(document);window.getSelection=function(){return f}}(),function(){function b(a){var b=document.createElement("script");return b.setAttribute("type","text/javascript"),b.setAttribute("src",a),b}typeof GENTICS_Aloha_base=="undefined"&&(GENTICS_Aloha_base="/Aloha/");var a=document.getElementsByTagName("head")[0];document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/jquery-1.4.2.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/jquery.json-2.2.min.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/jquery.getUrlParam.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/prettyPhoto/jquery.prettyPhoto.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/jquery.cookie.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/jquery.md5.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/ext-jquery-adapter-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/ext-foundation-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/cmp-foundation-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/data-foundation-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/data-json-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/data-list-views-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/ext-dd-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/window-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/resizable-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-buttons-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-tabs-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-tips-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-tree-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-grid-foundation-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-toolbars-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-menu-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'deps/extjs/pkg-forms-debug.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'utils/jquery.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'utils/lang.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'utils/range.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'utils/position.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'utils/dom.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/license.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ext-alohaproxy.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ext-alohareader.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ext-alohatreeloader.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/core.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ui.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ui-attributefield.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ui-browser.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/css.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/editable.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ribbon.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/event.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/floatingmenu.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/ierange-m2.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/jquery.aloha.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/log.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/markup.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/message.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/plugin.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/selection.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/sidebar.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/repositorymanager.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/repository.js"></script>'),document.write('<script type="text/javascript" src="'+GENTICS_Aloha_base+'core/repositoryobjects.js"></script>')}(),jQuery.fn.aloha=function(){return this.each(function(){new GENTICS.Aloha.Editable(jQuery(this))})},jQuery.fn.GENTICS_aloha=function(){return this.each(function(){new GENTICS.Aloha.Editable(jQuery(this))})},jQuery.fn.mahalo=function(){return this.each(function(){if(jQuery(this).hasClass("GENTICS_editable"))for(var a=0;a<GENTICS.Aloha.editables.length;a++)GENTICS.Aloha.editables[a].obj.get(0)===this&&GENTICS.Aloha.editables[a].destroy()})},jQuery.fn.GENTICS_mahalo=function(){return this.each(function(){var a=this})},jQuery.fn.GENTICS_contentEditableSelectionChange=function(a){var b=this;return this.keyup(function(b){var c=GENTICS.Aloha.Selection.getRangeObject();a(b)}),this.dblclick(function(b){a(b)}),this.mousedown(function(a){b.selectionStarted=!0}),jQuery(document).mouseup(function(c){GENTICS.Aloha.Selection.eventOriginalTarget=b,b.selectionStarted&&a(c),GENTICS.Aloha.Selection.eventOriginalTarget=!1,b.selectionStarted=!1}),this},jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<p>").append(this.eq(0).clone()).html()},GENTICS.Aloha.Log=function(){},GENTICS.Aloha.Log.prototype.logHistory=null,GENTICS.Aloha.Log.prototype.highWaterMarkReached=!1,GENTICS.Aloha.Log.prototype.init=function(){if(typeof GENTICS.Aloha.settings.logLevels=="undefined"||!GENTICS.Aloha.settings.logLevels)GENTICS.Aloha.settings.logLevels={error:!0,warn:!0};if(typeof GENTICS.Aloha.settings.logHistory=="undefined"||!GENTICS.Aloha.settings.logHistory)GENTICS.Aloha.settings.logHistory={};GENTICS.Aloha.settings.logHistory.maxEntries||(GENTICS.Aloha.settings.logHistory.maxEntries=100),GENTICS.Aloha.settings.logHistory.highWaterMark||(GENTICS.Aloha.settings.logHistory.highWaterMark=90),GENTICS.Aloha.settings.logHistory.levels||(GENTICS.Aloha.settings.logHistory.levels={error:!0,warn:!0}),this.flushLogHistory()},GENTICS.Aloha.Log.prototype.log=function(a,b,c){if(typeof a=="undefined"||!a)a="error";a=a.toLowerCase();if(!GENTICS.Aloha.settings.logLevels[a])return;this.addToLogHistory({level:a,component:b.toString(),message:c,date:new Date});switch(a){case"error":window.console&&console.error&&console.error(b.toString()+": "+c);break;case"warn":window.console&&console.warn&&console.warn(b.toString()+": "+c);break;case"info":window.console&&console.info&&console.info(b.toString()+": "+c);break;case"debug":window.console&&console.log&&console.log(b.toString()+" ["+a+"]: "+c);break;default:window.console&&console.log&&console.log(b.toString()+" ["+a+"]: "+c)}},GENTICS.Aloha.Log.prototype.error=function(a,b){this.log("error",a,b)},GENTICS.Aloha.Log.prototype.warn=function(a,b){this.log("warn",a,b)},GENTICS.Aloha.Log.prototype.info=function(a,b){this.log("info",a,b)},GENTICS.Aloha.Log.prototype.debug=function(a,b){this.log("debug",a,b)},GENTICS.Aloha.Log.prototype.isLogLevelEnabled=function(a){return GENTICS.Aloha.settings&&GENTICS.Aloha.settings.logLevels&&GENTICS.Aloha.settings.logLevels[a]==!0},GENTICS.Aloha.Log.prototype.isErrorEnabled=function(){return this.isLogLevelEnabled("error")},GENTICS.Aloha.Log.prototype.isWarnEnabled=function(){return this.isLogLevelEnabled("warn")},GENTICS.Aloha.Log.prototype.isInfoEnabled=function(){return this.isLogLevelEnabled("info")},GENTICS.Aloha.Log.prototype.isDebugEnabled=function(){return this.isLogLevelEnabled("debug")},GENTICS.Aloha.Log.prototype.addToLogHistory=function(a){if(GENTICS.Aloha.settings.logHistory.maxEntries<=0)return;if(!GENTICS.Aloha.settings.logHistory.levels[a.level])return;this.logHistory.push(a),this.highWaterMarkReached==!1&&this.logHistory.length>=GENTICS.Aloha.settings.logHistory.maxEntries*GENTICS.Aloha.settings.logHistory.highWaterMark/100&&(GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("logFull",GENTICS.Aloha.Log)),this.highWaterMarkReached=!0);while(this.logHistory.length>GENTICS.Aloha.settings.logHistory.maxEntries)this.logHistory.shift()},GENTICS.Aloha.Log.prototype.getLogHistory=function(){return this.logHistory},GENTICS.Aloha.Log.prototype.flushLogHistory=function(){this.logHistory=[],this.highWaterMarkReached=!1},GENTICS.Aloha.Log=new GENTICS.Aloha.Log,GENTICS.Aloha.Markup=function(){},GENTICS.Aloha.Markup.prototype.keyHandlers={},GENTICS.Aloha.Markup.prototype.addKeyHandler=function(a,b){this.keyHandlers[a]||(this.keyHandlers[a]=[]),this.keyHandlers[a].push(b)},GENTICS.Aloha.Markup.prototype.insertBreak=function(){var a=GENTICS.Aloha.Selection.rangeObject;a.isCollapsed()||this.removeSelectedMarkup();var b=jQuery("<br/>");GENTICS.Utils.Dom.insertIntoDOM(b,a,GENTICS.Aloha.activeEditable.obj);var c=GENTICS.Utils.Dom.searchAdjacentTextNode(b.parent().get(0),GENTICS.Utils.Dom.getIndexInParent(b.get(0))+1,!1);if(c){var d=c.data.search(/\S/);d>0&&(c.data=c.data.substring(d))}a.startContainer=a.endContainer=b.get(0).parentNode,a.startOffset=a.endOffset=GENTICS.Utils.Dom.getIndexInParent(b.get(0))+1,a.correctRange(),a.clearCaches(),a.select()},GENTICS.Aloha.Markup.prototype.preProcessKeyStrokes=function(a){if(a.type!="keydown")return!1;var b=GENTICS.Aloha.Selection.rangeObject;if(this.keyHandlers[a.keyCode]){var c=this.keyHandlers[a.keyCode];for(var d=0;d<c.length;++d)if(!c[d](a))return!1}switch(a.keyCode){case 13:return a.shiftKey?(GENTICS.Aloha.Log.debug(this,"... got a smoking Shift+Enter, Cowboy"),b.isCollapsed()||this.removeSelectedMarkup(),GENTICS.Aloha.Selection.updateSelection(!1,!0),this.processShiftEnter(b),!1):(GENTICS.Aloha.Log.debug(this,"... got a lonely Enter, Mum"),b.isCollapsed()||this.removeSelectedMarkup(),GENTICS.Aloha.Selection.updateSelection(!1,!0),this.processEnter(b),!1)}return!0},GENTICS.Aloha.Markup.prototype.processShiftEnter=function(a){this.insertHTMLBreak(a.getSelectionTree(),a)},GENTICS.Aloha.Markup.prototype.processEnter=function(a){a.splitObject?this.splitRangeObject(a):this.insertHTMLBreak(a.getSelectionTree(),a)},GENTICS.Aloha.Markup.prototype.insertHTMLCode=function(a){var b=GENTICS.Aloha.Selection.rangeObject;this.insertHTMLBreak(b.getSelectionTree(),b,jQuery(a))},GENTICS.Aloha.Markup.prototype.insertHTMLBreak=function(a,b,c){c=c?c:jQuery("<br />");for(var d=0;d<a.length;d++){var e=a[d],f=e.domobj?jQuery(e.domobj):undefined;if(e.selection!=="none")if(e.selection=="collapsed"){if(d>0){var g=jQuery(a[d-1].domobj);g.after(c)}else{var h=jQuery(a[1].domobj);h.before(c)}b.startContainer=b.endContainer=c[0].parentNode,b.startOffset=b.endOffset=GENTICS.Utils.Dom.getIndexInParent(c[0])+1,b.correctRange()}else if(e.domobj&&e.domobj.nodeType===3){e.domobj.nextSibling&&e.domobj.nextSibling.nodeType==1&&GENTICS.Aloha.Selection.replacingElements[e.domobj.nextSibling.nodeName.toLowerCase()]&&f.after("<br/>");if(this.needEndingBreak()){var i=e.domobj;while(i)if(i.nextSibling)i=!1;else{i=i.parentNode;if(GENTICS.Utils.Dom.isBlockLevelElement(i))break;i===b.limitObject&&(i=!1)}i&&jQuery(i).append('<br class="GENTICS_cleanme"/>')}f.between(c,e.startOffset);var j=0,k=c[0];while(k)k=k.previousSibling,j++;b.startContainer=c[0].parentNode,b.endContainer=c[0].parentNode,b.startOffset=j,b.endOffset=j,b.correctRange()}else e.domobj&&e.domobj.nodeType===1&&(f.parent().find("br.GENTICS_ephemera").length===0&&(jQuery(b.limitObject).find("br.GENTICS_ephemera").remove(),jQuery(b.commonAncestorContainer).append(this.getFillUpElement(b.splitObject))),f.after(c),b.startContainer=b.commonAncestorContainer,b.endContainer=b.startContainer,b.startOffset=d+2,b.endOffset=d+2,b.update())}b.select()},GENTICS.Aloha.Markup.prototype.needEndingBreak=function(){return!jQuery.browser.msie},GENTICS.Aloha.Markup.prototype.getSelectedText=function(){var a=GENTICS.Aloha.Selection.rangeObject;return a.isCollapsed()?!1:this.getFromSelectionTree(a.getSelectionTree(),!0)},GENTICS.Aloha.Markup.prototype.getFromSelectionTree=function(a,b){var c="";for(var d=0;d<a.length;d++){var e=a[d];if(e.selection=="partial"){if(e.domobj.nodeType==3)c+=e.domobj.data.substring(e.startOffset,e.endOffset);else if(e.domobj.nodeType==1&&e.children)if(b)c+=this.getFromSelectionTree(e.children,b);else{var f=jQuery(e.domobj).clone(!1).empty();f.html(this.getFromSelectionTree(e.children,b)),c+=f.outerHTML()}}else e.selection=="full"&&(e.domobj.nodeType==3?c+=jQuery(e.domobj).text():e.domobj.nodeType==1&&e.children&&(c+=b?jQuery(e.domobj).text():jQuery(e.domobj).outerHTML()))}return c},GENTICS.Aloha.Markup.prototype.getSelectedMarkup=function(){var a=GENTICS.Aloha.Selection.rangeObject;return a.isCollapsed()?!1:this.getFromSelectionTree(a.getSelectionTree(),!1)},GENTICS.Aloha.Markup.prototype.removeSelectedMarkup=function(){var a=GENTICS.Aloha.Selection.rangeObject;if(a.isCollapsed())return;var b=new GENTICS.Aloha.Selection.SelectionRange;this.removeFromSelectionTree(a.getSelectionTree(),b),b.update(),GENTICS.Utils.Dom.doCleanup({merge:!0,removeempty:!0},GENTICS.Aloha.Selection.rangeObject),GENTICS.Aloha.Selection.rangeObject=b,b.correctRange(),b.update(),b.select(),GENTICS.Aloha.Selection.updateSelection()},GENTICS.Aloha.Markup.prototype.removeFromSelectionTree=function(a,b){var c=undefined;for(var d=0;d<a.length;d++){var e=a[d];if(e.selection=="partial")if(e.domobj.nodeType==3){var f="";e.startOffset>0&&(f+=e.domobj.data.substring(0,e.startOffset)),e.endOffset<e.domobj.data.length&&(f+=e.domobj.data.substring(e.endOffset,e.domobj.data.length)),e.domobj.data=f,b.startContainer||(b.startContainer=b.endContainer=e.domobj,b.startOffset=b.endOffset=e.startOffset)}else e.domobj.nodeType==1&&e.children&&(this.removeFromSelectionTree(e.children,b),c?c.nodeName==e.domobj.nodeName&&(jQuery(c).append(jQuery(e.domobj).contents()),jQuery(e.domobj).remove()):c=e.domobj);else if(e.selection=="full"){if(!b.startContainer){var g=GENTICS.Utils.Dom.searchAdjacentTextNode(e.domobj.parentNode,GENTICS.Utils.Dom.getIndexInParent(e.domobj)+1,!1,{blocklevel:!1});g?(b.startContainer=b.endContainer=g,b.startOffset=b.endOffset=0):(b.startContainer=b.endContainer=e.domobj.parentNode,b.startOffset=b.endOffset=GENTICS.Utils.Dom.getIndexInParent(e.domobj)+1)}jQuery(e.domobj).remove()}}},GENTICS.Aloha.Markup.prototype.splitRangeObject=function(a,b){var c=jQuery(a.splitObject);a.update(a.splitObject);var d=a.getSelectionTree(),e=this.getSplitFollowUpContainer(a);this.splitRangeObjectHelper(d,a,e),e.hasClass("preparedForRemoval")&&e.removeClass("preparedForRemoval");var f=this.getInsertAfterObject(a,e);jQuery(e).insertAfter(f),a.splitObject.nodeName.toLowerCase()==="li"&&!GENTICS.Aloha.Selection.standardTextLevelSemanticsComparator(a.splitObject,e)&&jQuery(a.splitObject).remove(),a.startContainer=e.textNodes(!0,!0).first().get(0),a.startContainer||(a.startContainer=e.textNodes(!1).first().parent().get(0)),a.startContainer?(a.endContainer=a.startContainer,a.startOffset=0,a.endOffset=0):(a.startContainer=a.endContainer=e.parent().get(0),a.startOffset=a.endOffset=GENTICS.Utils.Dom.getIndexInParent(e.get(0))),a.update(),a.select()},GENTICS.Aloha.Markup.prototype.getInsertAfterObject=function(a,b){for(var c=0;c<a.markupEffectiveAtStart.length;c++){el=a.markupEffectiveAtStart[c];if(el===a.splitObject)var d=!0;if(!d)continue;if(GENTICS.Aloha.Selection.canTag1WrapTag2(jQuery(el).parent()[0].nodeName,b[0].nodeName))return el}return!1},GENTICS.Aloha.Markup.prototype.getFillUpElement=function(a){return jQuery.browser.msie?!1:jQuery('<br class="GENTICS_cleanme" />')},GENTICS.Aloha.Markup.prototype.removeElementContentWhitespaceObj=function(a){var b=0,c=[];for(var d=0;d<a.length;d++){var e=a[d];e.isElementContentWhitespace&&(c[c.length]=d)}for(var d=0;d<c.length;d++){var f=c[d];a.splice(f-b,1),b++}},GENTICS.Aloha.Markup.prototype.splitRangeObjectHelper=function(a,b,c,d){c||GENTICS.Aloha.Log.warn(this,"no followUpContainer, no inBetweenMarkup, nothing to do...");var e=this.getFillUpElement(b.splitObject),f=jQuery(b.splitObject),g=!1;if(a.length>0){var h=c.contents();h.length!==a.length&&this.removeElementContentWhitespaceObj(h);for(var i=0;i<a.length;i++){var j=a[i];if(j.selection==="none"&&g===!1||j.domobj&&j.domobj.nodeType===3&&j===a[a.length-1]&&j.startOffset===j.domobj.data.length){c.textNodes().length>1?h.eq(i).remove():GENTICS.Utils.Dom.isSplitObject(c[0])?e?c.html(e):c.empty():(c.empty(),c.addClass("preparedForRemoval"));continue}if(j.selection!=="none"){if(j.domobj&&j.domobj.nodeType===3&&j.startOffset!==undefined){var k=j.domobj.data;if(j.startOffset>0)j.domobj.data=k.substr(0,j.startOffset);else if(a.length>1)jQuery(j.domobj).remove();else{var l=jQuery(j.domobj).parent();GENTICS.Utils.Dom.isSplitObject(l[0])?e?l.html(e):l.empty():l.remove()}k.length-j.startOffset>0?h[i].data=k.substr(j.startOffset,k.length):h.length>1?h.eq(i).remove():GENTICS.Utils.Dom.isBlockLevelElement(c[0])?e?c.html(e):c.empty():(c.empty(),c.addClass("preparedForRemoval"))}g=!0,j.children.length>0&&this.splitRangeObjectHelper(j.children,b,h.eq(i),d)}else j.selection==="none"&&g===!0&&(jqObj=jQuery(j.domobj).remove())}}else GENTICS.Aloha.Log.error(this,"can not split splitObject due to an empty selection tree");f.find("br.GENTICS_ephemera:gt(0)").remove(),c.find("br.GENTICS_ephemera:gt(0)").remove(),f.find(".preparedForRemoval").remove(),c.find(".preparedForRemoval").remove(),f.contents().length===0&&GENTICS.Utils.Dom.isSplitObject(f[0])&&e&&f.html(e),c.contents().length===0&&GENTICS.Utils.Dom.isSplitObject(c[0])&&e&&c.html(e)},GENTICS.Aloha.Markup.prototype.getSplitFollowUpContainer=function(a){var b=a.splitObject.nodeName.toLowerCase();switch(b){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":var c=jQuery(a.splitObject).textNodes().last()[0];if(c&&a.startContainer===c&&a.startOffset===c.length){var d=jQuery("<p></p>"),e=jQuery(a.splitObject).clone().contents();return d.append(e),d}break;case"li":if(a.startContainer.nodeName.toLowerCase()==="br"&&jQuery(a.startContainer).hasClass("GENTICS_ephemera")){var d=jQuery("<p></p>"),e=jQuery(a.splitObject).clone().contents();return d.append(e),d}if(!a.splitObject.nextSibling&&jQuery.trim(jQuery(a.splitObject).text()).length==0){var d=jQuery("<p></p>");return d}}return jQuery(a.splitObject).clone()},GENTICS.Aloha.Markup.prototype.transformDomObject=function(a,b){var c=jQuery(a),d=jQuery("<"+b+"></"+b+">");return c.contents().appendTo(d),c.replaceWith(d),d},GENTICS.Aloha.Markup.prototype.toString=function(){return"GENTICS.Aloha.Markup"},GENTICS.Aloha.Markup=new GENTICS.Aloha.Markup,GENTICS.Aloha.Message=function(a){this.title=a.title,this.text=a.text,this.type=a.type,this.callback=a.callback},GENTICS.Aloha.Message.Type={CONFIRM:"confirm",ALERT:"alert",WAIT:"wait"},GENTICS.Aloha.Message.prototype.toString=function(){return this.type+": "+this.message},GENTICS.Aloha.MessageLine=function(){this.messages=[]},GENTICS.Aloha.MessageLine.prototype.add=function(a){this.messages[this.messages.length]=a;while(this.messages.length>4)this.messages.shift();jQuery("#gtx_aloha_messageline").html("");for(var b=0;b<this.messages.length;b++)jQuery("#gtx_aloha_messageline").append(this.messages[b].toString()+"<br/>")},GENTICS.Aloha.MessageLine=new GENTICS.Aloha.MessageLine,GENTICS.Aloha.PluginRegistry=function(){this.plugins=[]},GENTICS.Aloha.PluginRegistry.prototype.register=function(a){a instanceof GENTICS.Aloha.Plugin&&this.plugins.push(a)},GENTICS.Aloha.PluginRegistry.prototype.init=function(){for(var a=0;a<this.plugins.length;a++){var b=this.plugins[a];GENTICS.Aloha.settings.plugins==undefined&&(GENTICS.Aloha.settings.plugins={}),b.settings=GENTICS.Aloha.settings.plugins[b.prefix],b.settings==undefined&&(b.settings={}),b.settings.enabled==undefined&&(b.settings.enabled=!0);var c=b.languages?GENTICS.Aloha.getLanguage(GENTICS.Aloha.settings.i18n.current,b.languages):null;if(!c)GENTICS.Aloha.Log.warn(this,"Could not determine actual language, no languages available for plugin "+b);else{var d=GENTICS.Aloha.settings.base+"plugins/"+b.basePath+"/i18n/"+c+".dict";GENTICS.Aloha.loadI18nFile(d,b)}b.settings.enabled==!0&&this.plugins[a].init()}},GENTICS.Aloha.PluginRegistry.prototype.makeClean=function(a){for(var b=0;b<this.plugins.length;b++){var c=this.plugins[b];GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"Passing contents of HTML Element with id { "+a.attr("id")+" } for cleaning to plugin { "+c.prefix+" }"),c.makeClean(a)}},GENTICS.Aloha.PluginRegistry=new GENTICS.Aloha.PluginRegistry,GENTICS.Aloha.PluginRegistry.toString=function(){return"com.gentics.aloha.PluginRegistry"},GENTICS.Aloha.Plugin=function(a,b){this.prefix=a,this.basePath=b?b:a,GENTICS.Aloha.PluginRegistry.register(this)},GENTICS.Aloha.Plugin.prototype.settings=null,GENTICS.Aloha.Plugin.prototype.init=function(){},GENTICS.Aloha.Plugin.prototype.getEditableConfig=function(a){var b=null,c=!1;if(this.settings.editables){var d=this;jQuery.each(this.settings.editables,function(e,f){a.is(e)&&(c=!0,f.constructor==[].constructor?(b=[],b=jQuery.merge(b,f)):(b={},b=jQuery.extend(!0,b,d.config,f)))})}return c||(typeof this.settings.config=="undefined"||!this.settings.config?b=this.config:b=this.settings.config),b},GENTICS.Aloha.Plugin.prototype.makeClean=function(a){},GENTICS.Aloha.Plugin.prototype.getUID=function(a){return this.prefix+"."+a},GENTICS.Aloha.Plugin.prototype.i18n=function(a,b){return GENTICS.Aloha.i18n(this,a,b)},GENTICS.Aloha.Plugin.prototype.toString=function(){return this.prefix},GENTICS.Aloha.Plugin.prototype.log=function(a,b){GENTICS.Aloha.Log.log(a,this,b)},GENTICS.Aloha.Repository=function(a,b){this.repositoryId=a,this.settings={},this.repositoryName=b?b:a,GENTICS.Aloha.RepositoryManager.register(this)},GENTICS.Aloha.Repository.prototype.init=function(){},GENTICS.Aloha.Repository.prototype.query=function(a,b){return!0},GENTICS.Aloha.Repository.prototype.getChildren=function(a,b){return!0},GENTICS.Aloha.Repository.prototype.makeClean=function(a){},GENTICS.Aloha.Repository.prototype.markObject=function(a,b){},GENTICS.Aloha.Repository.prototype.setTemplate=function(a){a?this.extTpl=new Ext.XTemplate(a):this.extTpl=null},GENTICS.Aloha.Repository.prototype.hasTemplate=function(){return this.extTpl?!0:!1},GENTICS.Aloha.Repository.prototype.getTemplate=function(){return this.extTpl},GENTICS.Aloha.Repository.prototype.getObjectById=function(a,b){return!0},GENTICS.Aloha.RepositoryManager=function(){this.repositories=[]},GENTICS.Aloha.RepositoryManager.prototype.openCallbacks=[],GENTICS.Aloha.RepositoryManager.prototype.init=function(){GENTICS.Aloha.settings.repositories==undefined&&(GENTICS.Aloha.settings.repositories={});for(var a=0;a<this.repositories.length;a++){var b=this.repositories[a];b.settings==undefined&&(b.settings={}),GENTICS.Aloha.settings.repositories[b.repositoryId]&&jQuery.extend(b.settings,GENTICS.Aloha.settings.repositories[b.repositoryId]),b.init()}},GENTICS.Aloha.RepositoryManager.prototype.register=function(a){a instanceof GENTICS.Aloha.Repository?this.getRepository(a.repositoryId)?GENTICS.Aloha.Log.warn(this,"A repository with name { "+a.repositoryId+" } already registerd. Ignoring this."):this.repositories.push(a):GENTICS.Aloha.Log.error(this,"Trying to register a repository which is not an instance of GENTICS.Aloha.Repository.")},GENTICS.Aloha.RepositoryManager.prototype.getRepository=function(a){for(var b=0;b<this.repositories.length;b++)if(this.repositories[b].repositoryId==a)return this.repositories[b];return null},GENTICS.Aloha.RepositoryManager.prototype.query=function(a,b){var c=this,d=[],e=[];this.openCallbacks=[];var f=setTimeout(function(){c.openCallbacks=[],c.queryCallback(b,d,f)},5e3);a.repositoryId?e.push(this.getRepository(a.repositoryId)):e=this.repositories;for(var g=0;g<e.length;g++){this.openCallbacks.push(e[g].repositoryId);try{var h=e[g].query(a,function(a){var e=c.openCallbacks.indexOf(this.repositoryId);e!=-1&&c.openCallbacks.splice(e,1);if(!a.length==0&&!a[0].repositoryId)for(var g=0;g<a.length;g++)a[g].repositoryId=this.repositoryId;jQuery.merge(d,a),c.queryCallback(b,d,f)})}catch(i){h=!0}if(h){var j=c.openCallbacks.indexOf(e[g].repositoryId);j!=-1&&(this.openCallbacks.splice(j,1),g==e.length-1&&this.queryCallback(b,d,f))}}},GENTICS.Aloha.RepositoryManager.prototype.queryCallback=function(a,b,c){if(this.openCallbacks.length==0){clearTimeout(c),b.sort(function(a,b){return b.weight-a.weight});var d={results:b.length,items:b};a.call(this,d)}},GENTICS.Aloha.RepositoryManager.prototype.getChildren=function(a,b){var c=this,d=[],e=[];this.openChildrenCallbacks=[];if(a.inFolderId=="aloha"&&this.repositories.length>0){var f=[];for(var g=0;g<this.repositories.length;g++)f.push(new GENTICS.Aloha.Repository.Folder({id:this.repositories[g].repositoryId,name:this.repositories[g].repositoryName,repositoryId:this.repositories[g].repositoryId,type:"repository",hasMoreItems:!0}));c.getChildrenCallback(b,f,null);return}var h=setTimeout(function(){c.openChildrenCallbacks=[],c.getChildrenCallback(b,d,h)},5e3);a.repositoryId?e.push(this.getRepository(a.repositoryId)):e=this.repositories;for(var g=0;g<e.length;g++){this.openChildrenCallbacks.push(e[g].repositoryId);try{var i=e[g].getChildren(a,function(a){var e=c.openChildrenCallbacks.indexOf(this.repositoryId);e!=-1&&c.openChildrenCallbacks.splice(e,1),jQuery.merge(d,a),c.getChildrenCallback(b,d,h)})}catch(j){i=!0}if(i){var k=c.openChildrenCallbacks.indexOf(e[g].repositoryId);k!=-1&&(this.openChildrenCallbacks.splice(k,1),g==e.length-1&&this.getChildrenCallback(b,d,h))}}},GENTICS.Aloha.RepositoryManager.prototype.getChildrenCallback=function(a,b,c){this.openChildrenCallbacks.length==0&&(c&&clearTimeout(c),a.call(this,b))},GENTICS.Aloha.RepositoryManager.prototype.makeClean=function(a){var b=this,c={};a.find("[data-GENTICS-aloha-repository="+this.prefix+"]").each(function(){for(var d=0;d<b.repositories.length;d++)c.makeClean(a);GENTICS.Aloha.Log.debug(b,"Passing contents of HTML Element with id { "+this.attr("id")+" } for cleaning to repository { "+c.repositoryId+" }"),c.makeClean(this)})},GENTICS.Aloha.RepositoryManager.prototype.markObject=function(a,b){var c=this.getRepository(b.repositoryId);c?(jQuery(a).attr("data-GENTICS-aloha-repository",b.repositoryId),jQuery(a).attr("data-GENTICS-aloha-object-id",b.id),c.markObject(a,b)):GENTICS.Aloha.Log.error(this,"Trying to apply a repository { "+b.name+" } to an object, but item has no repositoryId.")},GENTICS.Aloha.RepositoryManager.prototype.getObject=function(a,b){var c=this,d=jQuery(a),e=this.getRepository(d.attr("data-GENTICS-aloha-repository")),f=d.attr("data-GENTICS-aloha-object-id");e&&f&&(this.itemCache=this.itemCache||[],this.itemCache[e.repositoryId]=this.itemCache[e.repositoryId]||[],this.itemCache[e.repositoryId][f]?b.call(this,[this.itemCache[e.repositoryId][f]]):e.getObjectById(f,function(a){c.itemCache[e.repositoryId][f]=a[0],b.call(this,a)}))},GENTICS.Aloha.RepositoryManager=new GENTICS.Aloha.RepositoryManager,GENTICS.Aloha.RepositoryManager.toString=function(){return"com.gentics.aloha.RepositoryManager"},GENTICS.Aloha.Repository.Object=function(){},GENTICS.Aloha.Repository.Document=function(a){var b=a;this.type="document";if(!b.id||!b.name||!b.repositoryId)return;GENTICS.Utils.applyProperties(this,a),this.baseType="document"},GENTICS.Aloha.Repository.Folder=function(a){var b=a;this.type="folder";if(!b.id||!b.name||!b.repositoryId)return;GENTICS.Utils.applyProperties(this,a),this.baseType="folder"},GENTICS.Aloha.Ribbon=function(){var a=this;this.visible=!1,this.toolbar=new Ext.Toolbar({height:30,cls:"GENTICS_ribbon ext-root"}),this.toolbar.add(new Ext.Toolbar.Spacer({width:"5"})),this.icon=new Ext.Toolbar.Spacer,this.toolbar.add(this.icon),this.toolbar.add(new Ext.Toolbar.Fill),this.toolbar.add(new Ext.Toolbar.Separator);var b=new Ext.Button({iconCls:"GENTICS_fade_out",handler:function(b){var c=jQuery(a.toolbar.getEl().dom);b.iconCls=="GENTICS_fade_out"?(c.css("marginLeft","34px"),c.animate({left:"-100%"}),jQuery("body").animate({paddingTop:0}),b.setIconClass("GENTICS_fade_in")):(c.css("marginLeft","0px"),c.animate({left:"0%"}),jQuery("body").animate({paddingTop:30}),b.setIconClass("GENTICS_fade_out")),a.toolbar.doLayout()}});this.toolbar.add(b),this.toolbar.add(new Ext.Toolbar.Spacer({width:"5"}))},GENTICS.Aloha.Ribbon.prototype.setIcon=function(a){typeof this.icon.cls!="undefined"&&this.icon.removeClass(this.icon.cls),this.icon.addClass(a)},GENTICS.Aloha.Ribbon.prototype.addButton=function(a){if(typeof a.menu=="object"){var b=new Ext.menu.Menu;jQuery.each(a.menu,function(a,c){b.addItem(new Ext.menu.Item({text:c.label,icon:c.icon,iconCls:c.iconClass,handler:function(){c.onclick.apply(c)}}))})}var c={text:a.label,enableToggle:a.toggle,icon:a.icon,pressed:a.pressed,iconCls:a.iconClass,menu:b,handler:function(){typeof a.onclick=="function"&&a.onclick.apply(a),a.pressed=!a.pressed}},d;b&&typeof a.onclick=="function"?d=new Ext.SplitButton(c):d=new Ext.Button(c),this.toolbar.insert(this.toolbar.items.getCount()-3,d)},GENTICS.Aloha.Ribbon.prototype.addSeparator=function(){this.toolbar.insert(this.toolbar.items.getCount()-3,new Ext.Toolbar.Separator)},GENTICS.Aloha.Ribbon.prototype.init=function(){this.toolbar.render(document.body,0),GENTICS.Aloha.settings.ribbon===!0&&(jQuery("body").css("paddingTop","30px !important"),this.show())},GENTICS.Aloha.Ribbon.prototype.hide=function(){jQuery(".GENTICS_ribbon").fadeOut(),this.visible=!1},GENTICS.Aloha.Ribbon.prototype.show=function(){jQuery(".GENTICS_ribbon").fadeIn(),this.visible=!0},GENTICS.Aloha.Ribbon.prototype.isVisible=function(){return this.visible},GENTICS.Aloha.Ribbon=new GENTICS.Aloha.Ribbon,jQuery.fn.zap=function(){return this.each(function(){jQuery(this.childNodes).insertBefore(this)}).remove()},jQuery.fn.textNodes=
function(a,b){var c=[];return function(d){if(d.nodeType==3&&jQuery.trim(d.data)!=""&&!b||d.nodeType==3&&b||d.nodeName=="BR"&&!a)c.push(d);else for(var e=0;e<d.childNodes.length;++e)arguments.callee(d.childNodes[e])}(this[0]),jQuery(c)},GENTICS.Aloha.Selection=function(){this.rangeObject=new Object,this.tagHierarchy={textNode:[],abbr:["textNode"],b:["textNode","b","i","em","sup","sub","br","span","img","a","del","ins","u","cite","q","code","abbr","strong"],pre:["textNode","b","i","em","sup","sub","br","span","img","a","del","ins","u","cite","q","code","abbr","code"],blockquote:["textNode","b","i","em","sup","sub","br","span","img","a","del","ins","u","cite","q","code","abbr","p","h1","h2","h3","h4","h5","h6"],ins:["textNode","b","i","em","sup","sub","br","span","img","a","u","p","h1","h2","h3","h4","h5","h6"],ul:["li"],ol:["li"],li:["textNode","b","i","em","sup","sub","br","span","img","ul","ol","h1","h2","h3","h4","h5","h6","del","ins","u"],tr:["td","th"],table:["tr"],div:["textNode","b","i","em","sup","sub","br","span","img","ul","ol","table","h1","h2","h3","h4","h5","h6","del","ins","u","p","div","pre","blockquote"],h1:["textNode","b","i","em","sup","sub","br","span","img","a","del","ins","u"]},this.tagHierarchy={textNode:this.tagHierarchy.textNode,abbr:this.tagHierarchy.abbr,br:this.tagHierarchy.textNode,img:this.tagHierarchy.textNode,b:this.tagHierarchy.b,strong:this.tagHierarchy.b,code:this.tagHierarchy.b,q:this.tagHierarchy.b,blockquote:this.tagHierarchy.blockquote,cite:this.tagHierarchy.b,i:this.tagHierarchy.b,em:this.tagHierarchy.b,sup:this.tagHierarchy.b,sub:this.tagHierarchy.b,span:this.tagHierarchy.b,del:this.tagHierarchy.del,ins:this.tagHierarchy.ins,u:this.tagHierarchy.b,p:this.tagHierarchy.b,pre:this.tagHierarchy.pre,a:this.tagHierarchy.b,ul:this.tagHierarchy.ul,ol:this.tagHierarchy.ol,li:this.tagHierarchy.li,td:this.tagHierarchy.li,div:this.tagHierarchy.div,h1:this.tagHierarchy.h1,h2:this.tagHierarchy.h1,h3:this.tagHierarchy.h1,h4:this.tagHierarchy.h1,h5:this.tagHierarchy.h1,h6:this.tagHierarchy.h1,table:this.tagHierarchy.table},this.replacingElements={h1:["p","h1","h2","h3","h4","h5","h6","pre"],blockquote:["blockquote"]},this.replacingElements={h1:this.replacingElements.h1,h2:this.replacingElements.h1,h3:this.replacingElements.h1,h4:this.replacingElements.h1,h5:this.replacingElements.h1,h6:this.replacingElements.h1,pre:this.replacingElements.h1,p:this.replacingElements.h1,blockquote:this.replacingElements.blockquote},this.allowedToStealElements={h1:["textNode"]},this.allowedToStealElements={h1:this.allowedToStealElements.h1,h2:this.allowedToStealElements.h1,h3:this.allowedToStealElements.h1,h4:this.allowedToStealElements.h1,h5:this.allowedToStealElements.h1,h6:this.allowedToStealElements.h1,p:this.tagHierarchy.b}},GENTICS.Aloha.Selection.prototype.SelectionTree=function(){this.domobj=new Object,this.selection,this.children=[]},GENTICS.Aloha.Selection.prototype.onChange=function(a,b){this.updateSelectionTimeout&&(window.clearTimeout(this.updateSelectionTimeout),this.updateSelectionTimeout=undefined),this.updateSelectionTimeout=window.setTimeout(function(){GENTICS.Aloha.Selection.updateSelection(b)},5)},GENTICS.Aloha.Selection.prototype.updateSelection=function(a){var b=this.rangeObject=new GENTICS.Aloha.Selection.SelectionRange(!0);return b.update(),GENTICS.Aloha.FloatingMenu.setScope("GENTICS.Aloha.continuoustext"),GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("selectionChanged",GENTICS.Aloha,[b,a])),!0},GENTICS.Aloha.Selection.prototype.getSelectionTree=function(a){return a?a.commonAncestorContainer?(this.inselection=!1,GENTICS.Utils.Dom.doCleanup({mergetext:!0},a)&&(this.rangeObject.update(),this.rangeObject.select()),this.recursiveGetSelectionTree(a,a.commonAncestorContainer)):(GENTICS.Aloha.Log.error(this,"the rangeObject is missing the commonAncestorContainer"),!1):this.rangeObject.getSelectionTree()},GENTICS.Aloha.Selection.prototype.recursiveGetSelectionTree=function(a,b){var c=jQuery(b),d=0,e=this,f=[];return c.contents().each(function(c){var g="none",h=!1,i=!1,j=!1;a.isCollapsed()&&b===a.startContainer&&a.startOffset==c&&(f[d]=new GENTICS.Aloha.Selection.SelectionTree,f[d].selection="collapsed",f[d].domobj=undefined,e.inselection=!1,j=!0,d++);if(!e.inselection&&!j)switch(this.nodeType){case 3:this===a.startContainer&&(e.inselection=!0,g=a.startOffset>0?"partial":"full",h=a.startOffset,i=this.length);break;case 1:this===a.startContainer&&a.startOffset==0&&(e.inselection=!0,g="full"),b===a.startContainer&&a.startOffset==c&&(e.inselection=!0,g="full")}if(e.inselection&&!j){g=="none"&&(g="full");switch(this.nodeType){case 3:this===a.endContainer&&(e.inselection=!1,a.endOffset<this.length&&(g="partial"),h===!1&&(h=0),i=a.endOffset);break;case 1:this===a.endContainer&&a.endOffset==0&&(e.inselection=!1)}b===a.endContainer&&a.endOffset<=c&&(e.inselection=!1,g="none")}f[d]=new GENTICS.Aloha.Selection.SelectionTree,f[d].domobj=this,f[d].selection=g,g=="partial"&&(f[d].startOffset=h,f[d].endOffset=i),f[d].children=e.recursiveGetSelectionTree(a,this);if(f[d].children.length>0){var k=!1,l=!1,m=!1;for(var n=0;n<f[d].children.length;++n)switch(f[d].children[n].selection){case"none":k=!0;break;case"full":m=!0;break;case"partial":l=!0}l||m&&k?f[d].selection="partial":m&&!l&&!k&&(f[d].selection="full")}d++}),a.isCollapsed()&&b===a.startContainer&&a.startOffset==b.childNodes.length&&(f[d]=new GENTICS.Aloha.Selection.SelectionTree,f[d].selection="collapsed",f[d].domobj=undefined),f},GENTICS.Aloha.Selection.prototype.getRangeObject=function(){return this.rangeObject},GENTICS.Aloha.Selection.prototype.isRangeObjectWithinMarkup=function(a,b,c,d,e){domObj=b?a.endContainer:a.startContainer,typeof d!="undefined"&&typeof d!="function"&&GENTICS.Aloha.Log.error(this,"parameter tagComparator is not a function");var f=this;typeof d=="undefined"&&(d=function(a,b){return f.standardTextLevelSemanticsComparator(a,b)});var g=jQuery(domObj).parents(),h=!1,i=-1,f=this;return g.length>0&&g.each(function(){if(this===e)return GENTICS.Aloha.Log.debug(f,"reached limit dom obj"),!1;if(d(this,c))return h===!1&&(h=[]),GENTICS.Aloha.Log.debug(f,"reached object equal to markup"),i++,h[i]=this,!0}),h},GENTICS.Aloha.Selection.prototype.standardSectionsAndGroupingContentComparator=function(a,b){if(a.nodeType===1){if(b[0].tagName&&GENTICS.Aloha.Selection.replacingElements[a.tagName.toLowerCase()]&&GENTICS.Aloha.Selection.replacingElements[a.tagName.toLowerCase()].indexOf(b[0].tagName.toLowerCase())!=-1)return!0}else GENTICS.Aloha.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},GENTICS.Aloha.Selection.prototype.standardTextLevelSemanticsComparator=function(a,b){return a.nodeType===1?a.tagName.toLowerCase()!=b[0].tagName.toLowerCase()?!1:this.standardAttributesComparator(a,b)?!0:!1:(GENTICS.Aloha.Log.debug(this,"only element nodes (nodeType == 1) can be compared"),!1)},GENTICS.Aloha.Selection.prototype.standardAttributesComparator=function(a,b){if(a.attributes&&a.attributes.length&&a.attributes.length>0)for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];if(d.nodeName.toLowerCase()=="class"&&d.nodeValue.length>0)var e=d.nodeValue,f=e.split(" ")}if(b[0].attributes&&b[0].attributes.length&&b[0].attributes.length>0)for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];if(d.nodeName.toLowerCase()=="class"&&d.nodeValue.length>0)var e=d.nodeValue,g=e.split(" ")}if(f&&!g||g&&!f)return GENTICS.Aloha.Log.debug(this,"tag comparison for <"+a.tagName.toLowerCase()+"> failed because one element has classes and the other has not"),!1;if(f&&g&&f.length!=f.length)return GENTICS.Aloha.Log.debug(this,"tag comparison for <"+a.tagName.toLowerCase()+"> failed because of a different amount of classes"),!1;if(f&&g&&f.length==g.length&&f.length!=0)for(var c=0;c<f.length;c++)if(!b.hasClass(f[c]))return GENTICS.Aloha.Log.debug(this,"tag comparison for <"+a.tagName.toLowerCase()+"> failed because of different classes"),!1;return!0},GENTICS.Aloha.Selection.prototype.changeMarkup=function(a,b,c){var d=b[0].tagName.toLowerCase();if(this.replacingElements[d]){var e=a;a=new this.SelectionRange(a);if(GENTICS.Aloha.activeEditable)var f=GENTICS.Aloha.activeEditable.obj.get(0);else var f=document.body;a.update(f),b.isReplacingElement=!0}else if(a.isCollapsed())return GENTICS.Aloha.Log.debug(this,"early returning from applying markup because nothing is currently selected"),!1;if(GENTICS.Aloha.activeEditable)var g=GENTICS.Aloha.activeEditable.obj[0];else var g=document.body;var h=this.isRangeObjectWithinMarkup(a,!1,b,c,g),i=this.isRangeObjectWithinMarkup(a,!0,b,c,g);if(!b.isReplacingElement&&a.startOffset==0){var j;if(j=this.getTextNodeSibling(!1,a.commonAncestorContainer.parentNode,a.startContainer))var k=this.isRangeObjectWithinMarkup({startContainer:j,startOffset:0},!1,b,c,g)}if(!b.isReplacingElement&&a.endOffset==a.endContainer.length){var l;if(l=this.getTextNodeSibling(!0,a.commonAncestorContainer.parentNode,a.endContainer))var m=this.isRangeObjectWithinMarkup({startContainer:l,startOffset:0},!1,b,c,g)}if(!b.isReplacingElement&&h&&!i)GENTICS.Aloha.Log.info(this,"markup 2 non-markup"),this.prepareForRemoval(a.getSelectionTree(),b,c),jQuery(h).addClass("preparedForRemoval"),this.insertCroppedMarkups(h,a,!1,c);else if(!b.isReplacingElement&&h&&i)GENTICS.Aloha.Log.info(this,"markup 2 markup"),this.prepareForRemoval(a.getSelectionTree(),b,c),this.splitRelevantMarkupObject(h,i,a,c);else if(!b.isReplacingElement&&(!h&&i||m||k)){GENTICS.Aloha.Log.info(this,"non-markup 2 markup OR with next2markup");if(k&&m){var n=new GENTICS.Aloha.Selection.SelectionRange(a);n.startContainer=jQuery(k[k.length-1]).textNodes()[0],n.startOffset=0,n.endContainer=jQuery(m[m.length-1]).textNodes().last()[0],n.endOffset=n.endContainer.length,n.update(),this.applyMarkup(n.getSelectionTree(),a,b,c),GENTICS.Aloha.Log.info(this,"double extending previous markup(previous and after selection), actually wrapping it ...")}else if(k&&!m&&!i)this.extendExistingMarkupWithSelection(k,a,!1,c),GENTICS.Aloha.Log.info(this,"extending previous markup");else if(k&&!m&&i){var n=new GENTICS.Aloha.Selection.SelectionRange(a);n.startContainer=jQuery(k[k.length-1]).textNodes()[0],n.startOffset=0,n.endContainer=jQuery(i[i.length-1]).textNodes().last()[0],n.endOffset=n.endContainer.length,n.update(),this.applyMarkup(n.getSelectionTree(),a,b,c),GENTICS.Aloha.Log.info(this,"double extending previous markup(previous and relevant at the end), actually wrapping it ...")}else!k&&m?(this.extendExistingMarkupWithSelection(m,a,!0,c),GENTICS.Aloha.Log.info(this,"extending following markup backwards")):this.extendExistingMarkupWithSelection(i,a,!0,c)}else if(b.isReplacingElement||!h&&!i&&!k&&!m)GENTICS.Aloha.Log.info(this,"non-markup 2 non-markup"),this.applyMarkup(a.getSelectionTree(),a,b,c,{setRangeObject2NewMarkup:!0});jQuery(".preparedForRemoval").zap(),a.update(),b.isReplacingElement?e.select():a.select()},GENTICS.Aloha.Selection.prototype.areMarkupObjectsAsLongAsRangeObject=function(a,b,c){if(c.startOffset!==0)return!1;for(var d=0;d<a.length;d++){var e=a[d];if(jQuery(e).textNodes().first()[0]!==c.startContainer)return!1}for(var d=0;d<b.length;d++){var e=b[d];if(jQuery(e).textNodes().last()[0]!==c.endContainer||jQuery(e).textNodes().last()[0].length!=c.endOffset)return!1}return!0},GENTICS.Aloha.Selection.prototype.splitRelevantMarkupObject=function(a,b,c,d){jQuery(a).addClass("preparedForRemoval"),jQuery(b).addClass("preparedForRemoval");if(this.areMarkupObjectsAsLongAsRangeObject(a,b,c))return!0;var e=this.intersectRelevantMarkupObjects(a,b);return e?(this.insertCroppedMarkups([e],c,!1,d),this.insertCroppedMarkups([e],c,!0,d)):(this.insertCroppedMarkups(a,c,!1,d),this.insertCroppedMarkups(b,c,!0,d)),!0},GENTICS.Aloha.Selection.prototype.intersectRelevantMarkupObjects=function(a,b){var c=!1;if(!a||!b)return c;for(var d=0;d<a.length;d++){var e=a[d];for(var f=0;f<b.length;f++){var g=b[f];e===g&&(c=e)}}return c},GENTICS.Aloha.Selection.prototype.extendExistingMarkupWithSelection=function(a,b,c,d){if(!c)var e=!0;if(c)var f=!0;var g=[];for(var h=0;h<a.length;h++)g[h]=new this.SelectionRange,el=a[h],f&&!e&&(g[h].startContainer=b.startContainer,g[h].startOffset=b.startOffset,textnodes=jQuery(el).textNodes(!0),g[h].endContainer=textnodes[textnodes.length-1],g[h].endOffset=textnodes[textnodes.length-1].length,g[h].update(),this.applyMarkup(g[h].getSelectionTree(),b,this.getClonedMarkup4Wrapping(el),d,{setRangeObject2NewMarkup:!0})),!f&&e&&(textnodes=jQuery(el).textNodes(!0),g[h].startContainer=textnodes[0],g[h].startOffset=0,g[h].endContainer=b.endContainer,g[h].endOffset=b.endOffset,g[h].update(),this.applyMarkup(g[h].getSelectionTree(),b,this.getClonedMarkup4Wrapping(el),d,{setRangeObject2NewMarkup:!0}));return!0},GENTICS.Aloha.Selection.prototype.getClonedMarkup4Wrapping=function(a){var b=jQuery(a).clone().removeClass("preparedForRemoval").empty();return b.attr("class").length==0&&b.removeAttr("class"),b},GENTICS.Aloha.Selection.prototype.insertCroppedMarkups=function(a,b,c,d){if(!c)var e=!0;if(c)var f=!0;var g=[];for(var h=0;h<a.length;h++){g[h]=new this.SelectionRange;var i=a[h];if(e&&!f){var j=jQuery(i).textNodes(!0);g[h].startContainer=j[0],g[h].startOffset=0;if(g[h].startContainer===b.startContainer&&g[h].startOffset===b.startOffset)continue;b.startOffset==0?(g[h].endContainer=this.getTextNodeSibling(!1,i,b.startContainer),g[h].endOffset=g[h].endContainer.length):(g[h].endContainer=b.startContainer,g[h].endOffset=b.startOffset),g[h].update(),this.applyMarkup(g[h].getSelectionTree(),b,this.getClonedMarkup4Wrapping(i),d,{setRangeObject2NextSibling:!0})}!e&&f&&(g[h].startContainer=b.endContainer,g[h].startOffset=b.endOffset,textnodes=jQuery(i).textNodes(!0),g[h].endContainer=textnodes[textnodes.length-1],g[h].endOffset=textnodes[textnodes.length-1].length,g[h].update(),this.applyMarkup(g[h].getSelectionTree(),b,this.getClonedMarkup4Wrapping(i),d,{setRangeObject2PreviousSibling:!0}))}return!0},GENTICS.Aloha.Selection.prototype.changeMarkupOnSelection=function(a){this.changeMarkup(this.getRangeObject(),a,this.getStandardTagComparator(a)),GENTICS.Utils.Dom.doCleanup({mergetext:!0},this.rangeObject),this.rangeObject.update(),this.rangeObject.select()},GENTICS.Aloha.Selection.prototype.applyMarkup=function(a,b,c,d,e){e=e?e:new Object,this.prepareForRemoval(a,c,d);var f=this.optimizeSelectionTree4Markup(a,c,d);breakpoint=!0;for(var g=0;g<f.length;g++){var h=f[g];h.wrappable?this.wrapMarkupAroundSelectionTree(h.elements,b,c,d,e):(GENTICS.Aloha.Log.debug(this,"dive further into non-wrappable object"),this.applyMarkup(h.element.children,b,c,d,e))}},GENTICS.Aloha.Selection.prototype.getMarkupType=function(a){var b=jQuery(a)[0].nodeName.toLowerCase();a.outerHTML&&GENTICS.Aloha.Log.debug(this,"Node name detected: "+b+" for: "+a.outerHTML());if(b=="#text")return"textNode";if(this.replacingElements[b])return"sectionOrGroupingContent";if(this.tagHierarchy[b])return"textLevelSemantics";GENTICS.Aloha.Log.warn(this,"unknown markup passed to this.getMarkupType(...): "+a.outerHTML())},GENTICS.Aloha.Selection.prototype.getStandardTagComparator=function(a){var b=this;switch(this.getMarkupType(a)){case"textNode":return function(a,b){return!1};case"sectionOrGroupingContent":return function(a,c){return b.standardSectionsAndGroupingContentComparator(a,c)};case"textLevelSemantics":default:return function(a,c){return b.standardTextLevelSemanticsComparator(a,c)}}},GENTICS.Aloha.Selection.prototype.prepareForRemoval=function(a,b,c){var d=this;typeof c!="undefined"&&typeof c!="function"&&GENTICS.Aloha.Log.error(this,"parameter tagComparator is not a function"),typeof c=="undefined"&&(c=this.getStandardTagComparator(b));for(var e=0;e<a.length;e++){var f=a[e];f.domobj&&(f.selection=="full"||f.selection=="partial"&&b.isReplacingElement)&&f.domobj.nodeType===1&&c(f.domobj,b)&&(GENTICS.Aloha.Log.debug(this,"Marking for removal: "+f.domobj.nodeName),jQuery(f.domobj).addClass("preparedForRemoval")),f.selection!="none"&&f.children.length>0&&this.prepareForRemoval(f.children,b,c)}},GENTICS.Aloha.Selection.prototype.wrapMarkupAroundSelectionTree=function(a,b,c,d,e){var f=[],g=-1;GENTICS.Aloha.Log.debug(this,"The formatting <"+c[0].tagName+"> will be wrapped around the selection");var h="",i="";for(var j=0;j<a.length;j++){var k=a[j];if(k.domobj&&!this.canTag1WrapTag2(k.domobj.parentNode.tagName.toLowerCase(),c[0].tagName.toLowerCase())){GENTICS.Aloha.Log.info(this,"Skipping the wrapping of <"+c[0].tagName.toLowerCase()+"> because this tag is not allowed inside <"+k.domobj.parentNode.tagName.toLowerCase()+">");continue}if(k.domobj&&k.domobj.nodeType==3&&jQuery.trim(jQuery(k.domobj).outerHTML()).length==0)continue;if(k.domobj&&k.selection=="partial"&&!c.isReplacingElement)if(k.startOffset!==undefined&&k.endOffset===undefined)g++,h+=k.domobj.data.substr(0,k.startOffset),k.domobj.data=k.domobj.data.substr(k.startOffset,k.domobj.data.length-k.startOffset),f[g]=k.domobj;else if(k.endOffset!==undefined&&k.startOffset===undefined)g++,i+=k.domobj.data.substr(k.endOffset,k.domobj.data.length-k.endOffset),k.domobj.data=k.domobj.data.substr(0,k.endOffset),f[g]=k.domobj;else if(k.endOffset!==undefined&&k.startOffset!==undefined){if(k.startOffset==k.endOffset){GENTICS.Aloha.Log.debug(this,"skipping empty selection");continue}g++,h+=k.domobj.data.substr(0,k.startOffset);var l=k.domobj.data.substr(k.startOffset,k.endOffset-k.startOffset);i+=k.domobj.data.substr(k.endOffset,k.domobj.data.length-k.endOffset),k.domobj.data=l,f[g]=k.domobj}else GENTICS.Aloha.Log.debug(this,"diving into object"),this.applyMarkup(k.children,b,c,d,e);k.domobj&&(k.selection=="full"||k.selection=="partial"&&c.isReplacingElement)&&(g++,f[g]=k.domobj)}n=!0;if(f.length>0){f=jQuery(f),jQuery.each(f,function(a,b){jQuery.browser.msie&&b.nodeType==3&&!b.nextSibling&&!b.previousSibling&&b.parentNode&&b.parentNode.nodeName.toLowerCase()=="li"&&(b.data=jQuery.trim(b.data))});var m=f.wrapAll(c).parent();m.before(h).after(i);var n=!0;if(e.setRangeObject2NewMarkup){var o=f.textNodes();o.index(b.startContainer)!=-1&&(b.startOffset=0),o.index(b.endContainer)!=-1&&(b.endOffset=b.endContainer.length);var n=!0}if(e.setRangeObject2NextSibling){var p=!0,q=m.textNodes(!0).last()[0];f.index(b.startContainer)!=-1&&(b.startContainer=this.getTextNodeSibling(p,m.parent(),q),b.startOffset=0),f.index(b.endContainer)!=-1&&(b.endContainer=this.getTextNodeSibling(p,m.parent(),q),b.endOffset=b.endOffset-q.length)}if(e.setRangeObject2PreviousSibling){var p=!1,q=m.textNodes(!0).first()[0];f.index(b.startContainer)!=-1&&(b.startContainer=this.getTextNodeSibling(p,m.parent(),q),b.startOffset=0),f.index(b.endContainer)!=-1&&(b.endContainer=this.getTextNodeSibling(p,m.parent(),q),b.endOffset=b.endContainer.length)}}},GENTICS.Aloha.Selection.prototype.getTextNodeSibling=function(a,b,c){var d=jQuery(b).textNodes(!0);index=d.index(c);if(index==-1)return!1;var e=index+(a?1:-1);return d[e]?d[e]:!1},GENTICS.Aloha.Selection.prototype.optimizeSelectionTree4Markup=function(a,b,c){var d=[],e=0,f=0,g=this;typeof c=="undefined"&&(c=function(a,b){return g.standardTextLevelSemanticsComparator(b)});for(var h=0;h<a.length;h++)if(a[h].domobj&&a[h].selection!="none")if(b.isReplacingElement&&c(b[0],jQuery(a[h].domobj)))d[e]!==undefined&&e++,d[e]=new Object,d[e].wrappable=!0,d[e].elements=[],d[e].elements[f]=a[h],e++;else if(this.canMarkupBeApplied2ElementAsWhole([a[h]],b)){d[e]===undefined&&(d[e]=new Object,d[e].wrappable=!0,d[e].elements=[]);if(b.isReplacingElement){var i=h;for(var j=h-1;j>=0;j--)if(this.canMarkupBeApplied2ElementAsWhole([a[j]],b)&&this.isMarkupAllowedToStealSelectionTreeElement(a[j],b))i=j;else break;var k=h;for(var j=h+1;j<a.length;j++)if(this.canMarkupBeApplied2ElementAsWhole([a[j]],b)&&this.isMarkupAllowedToStealSelectionTreeElement(a[j],b))k=j;else break;f=0;for(var j=i;j<=k;j++)d[e].elements[f]=a[j],d[e].elements[f].selection="full",f++;f=0}else d[e].elements[f]=a[h],f++}else d[e]!==undefined&&e++,d[e]=new Object,d[e].wrappable=!1,d[e].element=a[h],f=0,e++;return d},GENTICS.Aloha.Selection.prototype.isMarkupAllowedToStealSelectionTreeElement=function(a,b){if(!a.domobj)return!1;var c=a.domobj.nodeName.toLowerCase();c=c=="#text"?"textNode":c;var d=b[0].nodeName.toLowerCase();return this.allowedToStealElements[d]?this.allowedToStealElements[d].indexOf(c)==-1?!1:!0:!1},GENTICS.Aloha.Selection.prototype.canMarkupBeApplied2ElementAsWhole=function(a,b){b.jquery&&(htmlTag=b[0].tagName),b.tagName&&(htmlTag=b.tagName),returnVal=!0;for(var c=0;c<a.length;c++){var d=a[c];if(d.domobj&&(d.selection!="none"||b.isReplacingElement)){if(!this.canTag1WrapTag2(htmlTag,d.domobj.nodeName))return!1;if(d.children.length>0&&!this.canMarkupBeApplied2ElementAsWhole(d.children,b))return!1}}return returnVal},GENTICS.Aloha.Selection.prototype.canTag1WrapTag2=function(a,b){a=a=="#text"?"textNode":a.toLowerCase(),b=b=="#text"?"textNode":b.toLowerCase();if(!this.tagHierarchy[a])return!0;if(!this.tagHierarchy[b])return!0;var c=this.tagHierarchy[a],d=c.indexOf(b)!=-1?!0:!1;return d},GENTICS.Aloha.Selection.prototype.mayInsertTag=function(a){if(typeof this.rangeObject.unmodifiableMarkupAtStart=="object"){for(var b=0;b<this.rangeObject.unmodifiableMarkupAtStart.length;++b)if(!this.canTag1WrapTag2(this.rangeObject.unmodifiableMarkupAtStart[b].nodeName,a))return!1;return!0}return GENTICS.Aloha.Log.warn(this,"Unable to determine whether tag "+a+" may be inserted"),!0},GENTICS.Aloha.Selection.prototype.toString=function(){return"GENTICS.Aloha.Selection"},GENTICS.Aloha.Selection.prototype.SelectionRange=function(a){GENTICS.Utils.RangeObject.apply(this,arguments),this.commonAncestorContainer,this.selectionTree,this.markupEffectiveAtStart=[],this.unmodifiableMarkupAtStart=[],this.limitObject,this.splitObject,a&&(a.commonAncestorContainer&&(this.commonAncestorContainer=a.commonAncestorContainer),a.selectionTree&&(this.selectionTree=a.selectionTree),a.limitObject&&(this.limitObject=a.limitObject),a.markupEffectiveAtStart&&(this.markupEffectiveAtStart=a.markupEffectiveAtStart),a.unmodifiableMarkupAtStart&&(this.unmodifiableMarkupAtStart=a.unmodifiableMarkupAtStart),a.splitObject&&(this.splitObject=a.splitObject))},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype=new GENTICS.Utils.RangeObject,GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.select=function(){GENTICS.Utils.RangeObject.prototype.select.apply(this,arguments),GENTICS.Aloha.Selection.updateSelection()},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.update=function(a){this.updatelimitObject(),this.updateMarkupEffectiveAtStart(),this.updateCommonAncestorContainer(a),this.selectionTree=undefined},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.getSelectionTree=function(){return this.selectionTree||(this.selectionTree=GENTICS.Aloha.Selection.getSelectionTree(this)),this.selectionTree},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.getSelectedSiblings=function(a){var b=this.getSelectionTree();return this.recursionGetSelectedSiblings(a,b)},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.recursionGetSelectedSiblings=function(a,b){var c=!1,d=!1;for(var e=0;e<b.length;++e)if(b[e].domobj===a)d=!0,c=[];else if(!d&&b[e].children){c=this.recursionGetSelectedSiblings(a,b[e].children);if(c!==!1)break}else if(d&&b[e].domobj&&b[e].selection!="collapsed"&&b[e].selection!="none")c.push(b[e].domobj);else if(d&&b[e].selection=="none")break;return c},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.updateMarkupEffectiveAtStart=function(){this.markupEffectiveAtStart=[],this.unmodifiableMarkupAtStart=[];var a=this.getStartContainerParents(),b=!1;for(var c=0;c<a.length;c++){var d=a[c];if(!b&&d!==this.limitObject){this.markupEffectiveAtStart[c]=d;if(!e&&GENTICS.Utils.Dom.isSplitObject(d)){var e=!0;this.splitObject=d}}else b=!0,this.unmodifiableMarkupAtStart.push(d)}e||(this.splitObject=!1);return},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.updatelimitObject=function(){if(GENTICS.Aloha.editables&&GENTICS.Aloha.editables.length>0){var a=this.getStartContainerParents(),b=GENTICS.Aloha.editables;for(var c=0;c<a.length;c++){var d=a[c];for(var e=0;e<b.length;e++){var f=b[e].obj[0];if(d===f)return this.limitObject=d,!0}}}return this.limitObject=document.body,!0},GENTICS.Aloha.Selection.prototype.SelectionRange.prototype.toString=function(a){return a?"GENTICS.Aloha.Selection.SelectionRange {start ["+this.startContainer.nodeValue+"] offset "+this.startOffset+", end ["+this.endContainer.nodeValue+"] offset "+this.endOffset+"}":"GENTICS.Aloha.Selection.SelectionRange"},GENTICS.Aloha.Selection=new GENTICS.Aloha.Selection,GENTICS.Aloha.Sidebar=function(){},GENTICS.Aloha.Sidebar.prototype.add=function(a){},GENTICS.Aloha.Sidebar.prototype.render=function(){},GENTICS.Aloha.Sidebar.prototype.openPanel=function(a){},GENTICS.Aloha.Sidebar.prototype.closePanel=function(a){},GENTICS.Aloha.Sidebar.prototype.togglePinPanel=function(a){},GENTICS.Aloha.SidebarRight=new GENTICS.Aloha.Sidebar,GENTICS.Aloha.SidebarLeft=new GENTICS.Aloha.Sidebar,GENTICS.Aloha.Sidebar.Panel=function(){},GENTICS.Aloha.Sidebar.Panel.prototype.render=function(){},Ext.ux.AlohaAttributeField=Ext.extend(Ext.form.ComboBox,{typeAhead:!1,mode:"remote",triggerAction:"all",width:300,hideTrigger:!0,minChars:3,valueField:"id",displayField:"name",enableKeyEvents:!0,store:new Ext.data.Store({proxy:new Ext.data.AlohaProxy,reader:new Ext.data.AlohaObjectReader}),tpl:new Ext.XTemplate('<tpl for="."><div class="x-combo-list-item">','<tpl if="this.hasRepositoryTemplate(values)">{[ this.renderRepositoryTemplate(values) ]}</tpl>','<tpl if="!this.hasRepositoryTemplate(values)"><span><b>{name}</b></span></tpl>',"</div></tpl>",{hasRepositoryTemplate:function(a){var b=GENTICS.Aloha.RepositoryManager.getRepository(a.repositoryId);return b&&b.hasTemplate()},renderRepositoryTemplate:function(a){var b=GENTICS.Aloha.RepositoryManager.getRepository(a.repositoryId);if(b&&b.hasTemplate())return b.getTemplate().apply(a)}}),onSelect:function(a){this.setItem(a.data),typeof this.alohaButton.onSelect=="function"&&this.alohaButton.onSelect.call(this.alohaButton,a.data),this.collapse()},listeners:{beforequery:function(a){if(this.noQuery){a.cancel=!0;return}this.store!=null&&this.store.proxy!=null&&this.store.proxy.setParams({objectTypeFilter:this.getObjectTypeFilter(),queryString:a.query})},afterrender:function(a,b){var c=this;jQuery(this.wrap.dom.children[0]).blur(function(a){c.triggerBlur()})},keydown:function(a,b){this.resourceItem=null;if(b.keyCode==13||b.keyCode==27)this.isExpanded()?this.ALOHAwasExpanded=!0:this.ALOHAwasExpanded=!1},keyup:function(a,b){(b.keyCode==13||b.keyCode==27)&&!this.ALOHAwasExpanded&&setTimeout(function(){GENTICS.Aloha.activeEditable.obj[0].focus(),GENTICS.Aloha.Selection.getRangeObject().select()},0);if(!this.resourceItem){var c=this.wrap.dom.children[0].value;this.setAttribute(this.targetAttribute,c)}},focus:function(a,b){var c=jQuery(this.getTargetObject()),d=c.css("background-color");c&&c.context.style&&c.context.style["background-color"]&&c.attr("data-original-background-color",c.context.style["background-color"]),c.css("background-color","Highlight")},blur:function(a,b){var c=jQuery(this.getTargetObject());c&&((color=c.attr("data-original-background-color"))?jQuery(c).css("background-color",color):jQuery(c).removeCss("background-color"),jQuery(c).removeAttr("data-original-background-color"))},expand:function(a){this.noQuery&&this.collapse()}},setItem:function(a,b){this.resourceItem=a;if(a){b=b?b:this.displayField;var c=a[b];this.setValue(c),this.setAttribute(this.targetAttribute,a[this.valueField]),GENTICS.Aloha.RepositoryManager.markObject(this.targetObject,a)}},getItem:function(){return this.resourceItem},setAttribute:function(a,b,c,d){if(this.targetObject){var e=!0;if(typeof d!="undefined"){var f=new RegExp(c);d.match(f)||(e=!1)}e?jQuery(this.targetObject).attr(a,b):jQuery(this.targetObject).removeAttr(a)}},setTargetObject:function(a,b){this.targetObject=a,this.targetAttribute=b,this.targetObject&&this.targetAttribute?this.setValue(jQuery(this.targetObject).attr(this.targetAttribute)):this.setValue("");var c=this;GENTICS.Aloha.RepositoryManager.getObject(a,function(a){a&&a.length>0&&c.setItem(a[0])})},getTargetObject:function(){return this.targetObject},setObjectTypeFilter:function(a){this.objectTypeFilter=a},getObjectTypeFilter:function(){return this.objectTypeFilter},noQuery:!0}),Ext.reg("alohaattributefield",Ext.ux.AlohaAttributeField),GENTICS.Aloha.ui.AttributeField=function(a){this.onSelect=null,this.listenerQueue=[],this.objectTypeFilter=null,this.tpl=null,this.displayField=null,this.valueField=null,this.init(a)},GENTICS.Aloha.ui.AttributeField.prototype=new GENTICS.Aloha.ui.Button,GENTICS.Aloha.ui.AttributeField.prototype.getExtConfigProperties=function(){var a={alohaButton:this,xtype:"alohaattributefield",rowspan:this.rowspan||undefined,width:this.width||undefined,id:this.id};return this.valueField&&(a.valueField=this.valueField),this.displayField&&(a.displayField=this.displayField),a},GENTICS.Aloha.ui.AttributeField.prototype.setTargetObject=function(a,b){this.extButton&&this.extButton.setTargetObject(a,b)},GENTICS.Aloha.ui.AttributeField.prototype.getTargetObject=function(){return this.extButton?this.extButton.getTargetObject():null},GENTICS.Aloha.ui.AttributeField.prototype.focus=function(){this.extButton&&(this.extButton.focus(),this.extButton.getValue().length>0&&this.extButton.selectText(0,this.extButton.getValue().length))},GENTICS.Aloha.ui.AttributeField.prototype.addListener=function(a,b,c){this.extButton?this.extButton.addListener(a,b,null):(listener={eventName:a,handler:b,scope:c,options:null},this.listenerQueue.push(listener))},GENTICS.Aloha.ui.AttributeField.prototype.setAttribute=function(a,b,c,d){this.extButton&&this.extButton.setAttribute(a,b,c,d)},GENTICS.Aloha.ui.AttributeField.prototype.setObjectTypeFilter=function(a){this.extButton?(this.noQuery=!1,this.extButton.setObjectType(a)):(a||(a="all"),this.objectTypeFilter=a)},GENTICS.Aloha.ui.AttributeField.prototype.setItem=function(a,b){this.extButton&&this.extButton.setItem(a,b)},GENTICS.Aloha.ui.AttributeField.prototype.getItem=function(){return this.extButton?this.extButton.getItem():null},GENTICS.Aloha.ui.AttributeField.prototype.getValue=function(){return this.extButton?this.extButton.getValue():null},GENTICS.Aloha.ui.AttributeField.prototype.setValue=function(a){this.extButton&&this.extButton.setValue(a)},GENTICS.Aloha.ui.AttributeField.prototype.getQueryValue=function(){return this.extButton?this.extButton.wrap.dom.children[0].value:null},GENTICS.Aloha.ui.AttributeField.prototype.setDisplayField=function(a){return this.extButton?this.extButton.displayField=a:this.displayField=a},GENTICS.Aloha.ui.AttributeField.prototype.setTemplate=function(a){var b=new Ext.XTemplate('<tpl for="."><div class="x-combo-list-item">','<tpl if="this.hasRepositoryTemplate(values)">{[ this.renderRepositoryTemplate(values) ]}</tpl>','<tpl if="!this.hasRepositoryTemplate(values)">'+a+"</tpl>","</div></tpl>",{hasRepositoryTemplate:function(a){var b=GENTICS.Aloha.RepositoryManager.getRepository(a.repositoryId);return b&&b.hasTemplate()},renderRepositoryTemplate:function(a){var b=GENTICS.Aloha.RepositoryManager.getRepository(a.repositoryId);if(b&&b.hasTemplate())return b.getTemplate().apply(a)}});return this.extButton?this.extButton.tpl=b:this.tpl=b},GENTICS.Aloha.ui.Browser=function(){this.onSelect=null;var a=this;this.grid=new Ext.grid.GridPanel({region:"center",autoScroll:!0,store:new Ext.data.Store({proxy:new Ext.data.AlohaProxy,reader:new Ext.data.AlohaObjectReader}),columns:[{id:"name",header:"Name",width:100,sortable:!0,dataIndex:"name"},{header:"URL",renderer:function(a){return a},width:300,sortable:!0,dataIndex:"url"}],stripeRows:!0,autoExpandColumn:"name",height:350,width:600,title:"Objectlist",stateful:!0,stateId:"grid",selModel:new Ext.grid.RowSelectionModel({singleSelect:!0}),listeners:{dblclick:function(b){a.onItemSelect()}}}),this.grid.getSelectionModel().on({selectionchange:function(b,c,d){var e=a.grid.getSelectionModel().getSelected();e?this.win.buttons[1].enable():this.win.buttons[1].disable()},scope:this}),this.tree=new Ext.tree.TreePanel({region:"center",useArrows:!0,autoScroll:!0,animate:!0,enableDD:!0,containerScroll:!0,border:!1,loader:new Ext.tree.AlohaTreeLoader,root:{nodeType:"async",text:"Aloha Repositories",draggable:!1,id:"aloha"},rootVisible:!1,listeners:{beforeload:function(a){this.loader.baseParams={node:a.attributes}}}}),this.tree.getSelectionModel().on({selectionchange:function(b,c){if(c){var d=c.attributes;a.grid.store.load({params:{inFolderId:d.id,objectTypeFilter:a.objectTypeFilter,repositoryId
:d.repositoryId}})}},scope:this}),this.nav=new Ext.Panel({title:"Navigation",region:"west",width:300,layout:"fit",collapsible:!0,items:[this.tree]}),this.win=new Ext.Window({title:"Resource Selector",layout:"border",width:800,height:300,closeAction:"hide",onEsc:function(){this.hide()},defaultButton:this.nav,plain:!0,initHidden:!0,items:[this.nav,this.grid],buttons:[{text:"Close",handler:function(){a.win.hide()}},{text:"Select",disabled:!0,handler:function(){a.onItemSelect()}}],toFront:function(a){return this.manager=this.manager||Ext.WindowMgr,this.manager.bringToFront(this),this.setZIndex(9999999999),this}}),this.onItemSelect=function(){var a=this.grid.getSelectionModel(),b=a?a.getSelected():null,c=b?b.data:null;this.win.hide(),typeof this.onSelect=="function"&&this.onSelect.call(this,c)}},GENTICS.Aloha.ui.Browser.prototype.setObjectTypeFilter=function(a){this.objectTypeFilter=a},GENTICS.Aloha.ui.Browser.prototype.getObjectTypeFilter=function(){return this.objectTypeFilter},GENTICS.Aloha.ui.Browser.prototype.show=function(){this.win.show(),this.win.toFront(!0),this.win.focus()},typeof GENTICS.Aloha.ui=="undefined"&&(GENTICS.Aloha.ui=function(){}),GENTICS.Aloha.ui.Button=function(a){this.init(a)},GENTICS.Aloha.ui.Button.prototype.init=function(a){this.label,this.iconClass,this.icon,this.onclick,this.menu,this.toggle,this.pressed=!1,this.visible=!0,this.enabled=!0,this.tooltip,this.extButton,this.listenerQueue=[],GENTICS.Utils.applyProperties(this,a),this.id=this.generateId()},GENTICS.Aloha.ui.Button.idCounter=0,GENTICS.Aloha.ui.Button.prototype.generateId=function(){return GENTICS.Aloha.ui.Button.idCounter=GENTICS.Aloha.ui.Button.idCounter+1,"GENTICS_Aloha_ui_Button_"+GENTICS.Aloha.ui.Button.idCounter},GENTICS.Aloha.ui.Button.prototype.setPressed=function(a){this.toggle&&(this.pressed=a,typeof this.extButton=="object"&&this.extButton.pressed!=a&&this.extButton.toggle(this.pressed))},GENTICS.Aloha.ui.Button.prototype.isPressed=function(){return this.toggle?this.pressed:!1},GENTICS.Aloha.ui.Button.prototype.show=function(){this.visible=!0},GENTICS.Aloha.ui.Button.prototype.hide=function(){this.visible=!1},GENTICS.Aloha.ui.Button.prototype.isVisible=function(){return this.visible},GENTICS.Aloha.ui.Button.prototype.enable=function(){this.enabled=!0,typeof this.extButton=="object"&&this.extButton.enable()},GENTICS.Aloha.ui.Button.prototype.disable=function(){this.enabled=!1,typeof this.extButton=="object"&&this.extButton.disable()},GENTICS.Aloha.ui.Button.prototype.isEnabled=function(){return this.enabled},GENTICS.Aloha.ui.Button.prototype.getExtMenu=function(){if(typeof this.menu=="object"){var a=new Ext.menu.Menu;for(var b=0;b<this.menu.length;++b){var c=this.menu[b];a.addItem(new Ext.menu.Item(c.getExtMenuConfigProperties()))}}return a},GENTICS.Aloha.ui.Button.prototype.getExtMenuConfigProperties=function(){var a=this,b=this.getExtMenu();return{text:this.label,icon:this.icon,iconCls:this.iconClass,handler:function(){typeof a.onclick=="function"&&a.onclick()},menu:b}},GENTICS.Aloha.ui.Button.prototype.getExtConfigProperties=function(){var a=this,b=this.getExtMenu(),c={text:this.label,enableToggle:this.toggle,pressed:this.pressed,icon:this.icon,iconCls:this.iconClass,scale:this.scale||this.size,width:this.width||undefined,rowspan:this.rowspan||(this.size=="large"||this.size=="medium"?2:1),menu:b,handler:function(b,c){typeof a.onclick=="function"&&a.onclick.apply(a,[b,c]),a.pressed=!a.pressed},xtype:b&&typeof this.onclick=="function"?"splitbutton":"button",tooltipType:"qtip",tooltip:this.tooltip,id:this.id,arrowAlign:this.arrowAlign||(this.size=="large"||this.size=="small"?"right":"bottom")};return c},Ext.ux.GENTICSMultiSplitButton=Ext.extend(Ext.Component,{autoEl:{cls:"GENTICS_multisplit-wrapper"},ulObj:null,panelButton:null,wrapper:null,panelOpened:!1,onRender:function(){Ext.ux.GENTICSMultiSplitButton.superclass.onRender.apply(this,arguments),this.wrapper=jQuery(this.el.dom);var a,b='<ul class="GENTICS_multisplit">';for(var c=0;c<this.items.length;c++){a=this.items[c],a.visible==undefined&&(a.visible=!0);if(a.wide)continue;b+='<li><button xmlns:ext="http://www.extjs.com/" class="'+a.iconClass+'" ext:qtip="'+a.tooltip+'" gtxmultisplititem="'+c+'">&#160;</button>'+"</li>"}for(var c=0;c<this.items.length;c++){a=this.items[c];if(!a.wide)continue;b+='<li><button xmlns:ext="http://www.extjs.com/" class="GENTICS_multisplit-wide '+a.iconClass+'" ext:qtip="'+a.tooltip+'" gtxmultisplititem="'+c+'">'+a.text+"</button>"+"</li>"}b+="</ul>";var d=this;GENTICS.Aloha.FloatingMenu.extTabPanel.on("move",function(){d.closePanel()}),GENTICS.Aloha.FloatingMenu.extTabPanel.on("tabchange",function(){d.closePanel()}),this.ulObj=jQuery(this.el.createChild(b).dom),this.ulObj.click(function(a){d.onClick(a)}),this.panelButton=jQuery(this.el.createChild('<button class="GENTICS_multisplit_toggle GENTICS_multisplit_toggle_open">&#160;</button>').dom),this.panelButton.click(function(){d.togglePanel()})},onClick:function(a){if(!a.target.attributes.gtxmultisplititem)return;var b=jQuery(a.target);this.closePanel(),b.hasClass("GENTICS_multisplit-wide")||this.setActiveDOMElement(b),this.items[a.target.attributes.gtxmultisplititem.value].click()},setActiveItem:function(a){this.closePanel();if(this.activeItem==a)return;for(var b=0;b<this.items.length;b++)if(this.items[b].name==a){var c=jQuery(this.ulObj).find("[gtxmultisplititem="+b+"]");this.setActiveDOMElement(c),this.activeItem=a;return}this.activeItem=null,this.setActiveDOMElement(null)},setActiveDOMElement:function(a){var b=this;while(typeof b!="undefined"){if(b.hidden){this.activeDOMElement=a;return}b=b.ownerCt}jQuery(this.ulObj).find(".GENTICS_multisplit-activeitem").removeClass("GENTICS_multisplit-activeitem"),a&&a.addClass("GENTICS_multisplit-activeitem");if(a==null||a.parent().is(":hidden"))return;if(a&&this.ulObj){this.ulObj.css("margin-top",0);var c=a.position().top;this.ulObj.css("margin-top",-c+6),this.ulObj.css("height",46+c-6)}this.activeDOMElement=undefined},togglePanel:function(){this.panelOpened?this.closePanel():this.openPanel()},openPanel:function(){if(this.panelOpened)return;this.ulObj.appendTo(jQuery(document.body)),this.ulObj.addClass("GENTICS_multisplit-expanded"),this.ulObj.mousedown(function(a){a.stopPropagation()});var a=this.wrapper.offset();this.ulObj.css("top",a.top-1),this.ulObj.css("left",a.left-1),this.ulObj.animate({height:this.ulObj.attr("scrollHeight")}),this.panelButton.removeClass("GENTICS_multisplit_toggle_open"),this.panelButton.addClass("GENTICS_multisplit_toggle_close"),this.panelOpened=!0},closePanel:function(){if(!this.panelOpened)return;this.ulObj.removeClass("GENTICS_multisplit-expanded"),this.ulObj.appendTo(this.wrapper),this.panelButton.addClass("GENTICS_multisplit_toggle_open"),this.panelButton.removeClass("GENTICS_multisplit_toggle_close"),this.panelOpened=!1},hideItem:function(a){for(var b=0;b<this.items.length;b++)if(this.items[b].name==a){this.items[b].visible=!1,jQuery("#"+this.id+" [gtxmultisplititem="+b+"]").parent().hide();return}},showItem:function(a){for(var b=0;b<this.items.length;b++)if(this.items[b].name==a){this.items[b].visible=!0,jQuery("#"+this.id+" [gtxmultisplititem="+b+"]").parent().show();return}}}),Ext.reg("genticsmultisplitbutton",Ext.ux.GENTICSMultiSplitButton),GENTICS.Aloha.ui.MultiSplitButton=function(a){this.items,GENTICS.Utils.applyProperties(this,a),this.id=this.generateId()},GENTICS.Aloha.ui.MultiSplitButton.idCounter=0,GENTICS.Aloha.ui.MultiSplitButton.prototype.generateId=function(){return GENTICS.Aloha.ui.MultiSplitButton.idCounter=GENTICS.Aloha.ui.MultiSplitButton.idCounter+1,"GENTICS_Aloha_ui_MultiSplitButton_"+GENTICS.Aloha.ui.MultiSplitButton.idCounter},GENTICS.Aloha.ui.MultiSplitButton.prototype.getExtConfigProperties=function(){return{xtype:"genticsmultisplitbutton",items:this.items,id:this.id}},GENTICS.Aloha.ui.MultiSplitButton.prototype.setActiveItem=function(a){this.extButton.setActiveItem(a)},GENTICS.Aloha.ui.MultiSplitButton.prototype.isVisible=function(){for(var a=0;a<this.items.length;a++)if(this.items[a].visible)return!0;return!1},GENTICS.Aloha.ui.MultiSplitButton.prototype.showItem=function(a){this.extButton.showItem(a)},GENTICS.Aloha.ui.MultiSplitButton.prototype.hideItem=function(a){this.extButton.hideItem(a)},function(a,b){function w(){if(c.isReady)return;try{f.documentElement.doScroll("left")}catch(a){setTimeout(w,1);return}c.ready()}function x(a,b){b.src?c.ajax({url:b.src,async:!1,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||""),b.parentNode&&b.parentNode.removeChild(b)}function y(a,d,e,f,g,h){var i=a.length;if(typeof d=="object"){for(var j in d)y(a,j,d[j],f,g,e);return a}if(e!==b){f=!h&&f&&c.isFunction(e);for(var k=0;k<i;k++)g(a[k],d,f?e.call(a[k],k,g(a[k],d)):e,h);return a}return i?g(a[0],d):b}function z(){return(new Date).getTime()}function O(){return!1}function P(){return!0}function W(a,b,d){return d[0].type=a,c.event.handle.apply(b,d)}function Y(a){var b,d=[],e=[],f=arguments,g,h,i,j,k,l,m,n,o=c.data(this,"events");if(a.liveFired===this||!o||!o.live||a.button&&a.type==="click")return;a.liveFired=this;var p=o.live.slice(0);for(k=0;k<p.length;k++)i=p[k],i.origType.replace(L,"")===a.type?e.push(i.selector):p.splice(k--,1);h=c(a.target).closest(e,a.currentTarget);for(l=0,m=h.length;l<m;l++)for(k=0;k<p.length;k++){i=p[k];if(h[l].selector===i.selector){j=h[l].elem,g=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")g=c(a.relatedTarget).closest(i.selector)[0];(!g||g!==j)&&d.push({elem:j,handleObj:i})}}for(l=0,m=d.length;l<m;l++){h=d[l],a.currentTarget=h.elem,a.data=h.handleObj.data,a.handleObj=h.handleObj;if(h.handleObj.origHandler.apply(h.elem,f)===!1){b=!1;break}}return b}function Z(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,"&")}function bc(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bo(a,b){var d=0;b.each(function(){if(this.nodeName!==(a[d]&&a[d].nodeName))return;var b=c.data(a[d++]),e=c.data(this,b),f=b&&b.events;if(f){delete e.handle,e.events={};for(var g in f)for(var h in f[g])c.event.add(this,g,f[g][h],f[g][h].data)}})}function bp(a,b,d){var e,g,h,i=b&&b[0]?b[0].ownerDocument||b[0]:f;return a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===f&&!bk.test(a[0])&&(c.support.checkClone||!bl.test(a[0]))&&(g=!0,h=c.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),c.clean(a,i,e,d)),g&&(c.fragments[a[0]]=h?e:1),{fragment:e,cacheable:g}}function bT(a,b){var d={};return c.each(bS.concat.apply([],bS.slice(0,b)),function(){d[this]=a}),d}function bU(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=function(a,b){return new c.fn.init(a,b)},d=a.jQuery,e=a.$,f=a.document,g,h=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,i=/^.[^:#\[\.,]*$/,j=/\S/,k=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=navigator.userAgent,n,o=!1,p=[],q,r=Object.prototype.toString,s=Object.prototype.hasOwnProperty,t=Array.prototype.push,u=Array.prototype.slice,v=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,d){var e,i,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d)return this.context=f,this[0]=f.body,this.selector="body",this.length=1,this;if(typeof a=="string"){e=h.exec(a);if(e&&(e[1]||!d)){if(e[1])return k=d?d.ownerDocument||d:f,j=l.exec(a),j?c.isPlainObject(d)?(a=[f.createElement(j[1])],c.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=bp([e[1]],[k]),a=(j.cacheable?j.fragment.cloneNode(!0):j.fragment).childNodes),c.merge(this,a);i=f.getElementById(e[2]);if(i){if(i.id!==e[2])return g.find(a);this.length=1,this[0]=i}return this.context=f,this.selector=a,this}return!d&&/^\w+$/.test(a)?(this.selector=a,this.context=f,a=f.getElementsByTagName(a),c.merge(this,a)):!d||d.jquery?(d||g).find(a):c(d).find(a)}return c.isFunction(a)?g.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),c.makeArray(a,this))},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return u.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var e=c();return c.isArray(a)?t.apply(e,a):c.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+d:b&&(e.selector=this.selector+"."+b+"("+d+")"),e},each:function(a,b){return c.each(this,a,b)},ready:function(a){return c.bindReady(),c.isReady?a.call(f,c):p&&p.push(a),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(u.apply(this,arguments),"slice",u.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||c(null)},push:t,sort:[].sort,splice:[].splice},c.fn.init.prototype=c.fn,c.extend=c.fn.extend=function(){var a=arguments[0]||{},d=1,e=arguments.length,f=!1,g,h,i,j;typeof a=="boolean"&&(f=a,a=arguments[1]||{},d=2),typeof a!="object"&&!c.isFunction(a)&&(a={}),e===d&&(a=this,--d);for(;d<e;d++)if((g=arguments[d])!=null)for(h in g){i=a[h],j=g[h];if(a===j)continue;if(f&&j&&(c.isPlainObject(j)||c.isArray(j))){var k=i&&(c.isPlainObject(i)||c.isArray(i))?i:c.isArray(j)?[]:{};a[h]=c.extend(f,k,j)}else j!==b&&(a[h]=j)}return a},c.extend({noConflict:function(b){return a.$=e,b&&(a.jQuery=d),c},isReady:!1,ready:function(){if(!c.isReady){if(!f.body)return setTimeout(c.ready,13);c.isReady=!0;if(p){var a,b=0;while(a=p[b++])a.call(f,c);p=null}c.fn.triggerHandler&&c(f).triggerHandler("ready")}},bindReady:function(){if(o)return;o=!0;if(f.readyState==="complete")return c.ready();if(f.addEventListener)f.addEventListener("DOMContentLoaded",q,!1),a.addEventListener("load",c.ready,!1);else if(f.attachEvent){f.attachEvent("onreadystatechange",q),a.attachEvent("onload",c.ready);var b=!1;try{b=a.frameElement==null}catch(d){}f.documentElement.doScroll&&b&&w()}},isFunction:function(a){return r.call(a)==="[object Function]"},isArray:function(a){return r.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||r.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return!1;if(a.constructor&&!s.call(a,"constructor")&&!s.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||s.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=c.trim(b);if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))();c.error("Invalid JSON: "+b)},noop:function(){},globalEval:function(a){if(a&&j.test(a)){var b=f.getElementsByTagName("head")[0]||f.documentElement,d=f.createElement("script");d.type="text/javascript",c.support.scriptEval?d.appendChild(f.createTextNode(a)):d.text=a,b.insertBefore(d,b.firstChild),b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,d,e){var f,g=0,h=a.length,i=h===b||c.isFunction(a);if(e){if(i){for(f in a)if(d.apply(a[f],e)===!1)break}else for(;g<h;)if(d.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(d.call(a[f],f,a[f])===!1)break}else for(var j=a[0];g<h&&d.call(j,g,j)!==!1;j=a[++g]);return a},trim:function(a){return(a||"").replace(k,"")},makeArray:function(a,b){var d=b||[];return a!=null&&(a.length==null||typeof a=="string"||c.isFunction(a)||typeof a!="function"&&a.setInterval?t.call(d,a):c.merge(d,a)),d},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[];for(var e=0,f=a.length;e<f;e++)!c!=!b(a[e],e)&&d.push(a[e]);return d},map:function(a,b,c){var d=[],e;for(var f=0,g=a.length;f<g;f++)e=b(a[f],f,c),e!=null&&(d[d.length]=e);return d.concat.apply([],d)},guid:1,proxy:function(a,d,e){return arguments.length===2&&(typeof d=="string"?(e=a,a=e[d],d=b):d&&!c.isFunction(d)&&(e=d,d=b)),!d&&a&&(d=function(){return a.apply(e||this,arguments)}),a&&(d.guid=a.guid=a.guid||d.guid||c.guid++),d},uaMatch:function(a){a=a.toLowerCase();var b=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},browser:{}}),n=c.uaMatch(m),n.browser&&(c.browser[n.browser]=!0,c.browser.version=n.version),c.browser.webkit&&(c.browser.safari=!0),v&&(c.inArray=function(a,b){return v.call(b,a)}),g=c(f),f.addEventListener?q=function(){f.removeEventListener("DOMContentLoaded",q,!1),c.ready()}:f.attachEvent&&(q=function(){f.readyState==="complete"&&(f.detachEvent("onreadystatechange",q),c.ready())}),function(){c.support={};var b=f.documentElement,d=f.createElement("script"),e=f.createElement("div"),g="script"+z();e.style.display="none",e.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var h=e.getElementsByTagName("*"),i=e.getElementsByTagName("a")[0];if(!h||!h.length||!i)return;c.support={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/red/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55$/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:e.getElementsByTagName("input")[0].value==="on",optSelected:f.createElement("select").appendChild(f.createElement("option")).selected,parentNode:e.removeChild(e.appendChild(f.createElement("div"))).parentNode===null,deleteExpando:!0,checkClone:!1,scriptEval:!1,noCloneEvent:!0,boxModel:null},d.type="text/javascript";try{d.appendChild(f.createTextNode("window."+g+"=1;"))}catch(j){}b.insertBefore(d,b.firstChild),a[g]&&(c.support.scriptEval=!0,delete a[g]);try{delete d.test}catch(j){c.support.deleteExpando=!1}b.removeChild(d),e.attachEvent&&e.fireEvent&&(e.attachEvent("onclick",function m(){c.support.noCloneEvent=!1,e.detachEvent("onclick",m)}),e.cloneNode(!0).fireEvent("onclick")),e=f.createElement("div"),e.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var k=f.createDocumentFragment();k.appendChild(e.firstChild),c.support.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,c(function(){var a=f.createElement("div");a.style.width=a.style.paddingLeft="1px",f.body.appendChild(a),c.boxModel=c.support.boxModel=a.offsetWidth===2,f.body.removeChild(a).style.display="none",a=null});var l=function(a){var b=f.createElement("div");a="on"+a;var c=a in b;return c||(b.setAttribute(a,"return;"),c=typeof b[a]=="function"),b=null,c};c.support.submitBubbles=l("submit"),c.support.changeBubbles=l("change"),b=d=e=h=i=null}(),c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var A="jQuery"+z(),B=0,C={};c.extend({cache:{},expando:A,noData:{embed:!0,object:!0,applet:!0},data:function(d,e,f){if(d.nodeName&&c.noData[d.nodeName.toLowerCase()])return;d=d==a?C:d;var g=d[A],h=c.cache,i;return!g&&typeof e=="string"&&f===b?null:(g||(g=++B),typeof e=="object"?(d[A]=g,i=h[g]=c.extend(!0,{},e)):h[g]||(d[A]=g,h[g]={}),i=h[g],f!==b&&(i[e]=f),typeof e=="string"?i[e]:i)},removeData:function(b,d){if(b.nodeName&&c.noData[b.nodeName.toLowerCase()])return;b=b==a?C:b;var e=b[A],f=c.cache,g=f[e];d?g&&(delete g[d],c.isEmptyObject(g)&&c.removeData(b)):(c.support.deleteExpando?delete b[c.expando]:b.removeAttribute&&b.removeAttribute(c.expando),delete f[e])}}),c.fn.extend({data:function(a,d){if(typeof a=="undefined"&&this.length)return c.data(this[0]);if(typeof a=="object")return this.each(function(){c.data(this,a)});var e=a.split(".");e[1]=e[1]?"."+e[1]:"";if(d===b){var f=this.triggerHandler("getData"+e[1]+"!",[e[0]]);return f===b&&this.length&&(f=c.data(this[0],a)),f===b&&e[1]?this.data(e[0]):f}return this.trigger("setData"+e[1]+"!",[e[0],d]).each(function(){c.data(this,a,d)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}}),c.extend({queue:function(a,b,d){if(!a)return;b=(b||"fx")+"queue";var e=c.data(a,b);return d?(!e||c.isArray(d)?e=c.data(a,b,c.makeArray(d)):e.push(d),e):e||[]},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),e=d.shift();e==="inprogress"&&(e=d.shift()),e&&(b==="fx"&&d.unshift("inprogress"),e.call(a,function(){c.dequeue(a,b)}))}}),c.fn.extend({queue:function(a,d){return typeof a!="string"&&(d=a,a="fx"),d===b?c.queue(this[0],a):this.each(function(b,e){var f=c.queue(this,a,d);a==="fx"&&f[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){return a=c.fx?c.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var D=/[\n\t]/g,E=/\s+/,F=/\r/g,G=/href|src|style/,H=/(button|input)/i,I=/(button|input|object|select|textarea)/i,J=/^(a|area)$/i,K=/radio|checkbox/;c.fn.extend({attr:function(a,b){return y(this,a,b,!0,c.attr)},removeAttr:function(a,b){return this.each(function(){c.attr(this,a,""),this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(b){var d=c(this);d.addClass(a.call(this,b,d.attr("class")))});if(a&&typeof a=="string"){var b=(a||"").split(E);for(var d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===1)if(!f.className)f.className=a;else{var g=" "+f.className+" ",h=f.className;for(var i=0,j=b.length;i<j;i++)g.indexOf(" "+b[i]+" ")<0&&(h+=" "+b[i]);f.className=c.trim(h)}}}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(b){var d=c(this);d.removeClass(a.call(this,b,d.attr("class")))});if(a&&typeof a=="string"||a===b){var d=(a||"").split(E);for(var e=0,f=this.length;e<f;e++){var g=this[e];if(g.nodeType===1&&g.className)if(a){var h=(" "+g.className+" ").replace(D," ");for(var i=0,j=d.length;i<j;i++)h=h.replace(" "+d[i]+" "," ");g.className=c.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var d=typeof a,e=typeof b=="boolean";return c.isFunction(a)?this.each(function(d){var e=c(this);e.toggleClass(a.call(this,d,e.attr("class"),b),b)}):this.each(function(){if(d==="string"){var f,g=0,h=c(this),i=b,j=a.split(E);while(f=j[g++])i=e?i:!h.hasClass(f),h[i?"addClass":"removeClass"](f)}else if(d==="undefined"||d==="boolean")this.className&&c.data(this,"__className__",this.className),this.className=this.className||a===!1?"":c.data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(D," ").indexOf(b)>-1)return!0;return!1},val:function(a){if(a===b){var d=this[0];if(d){if(c.nodeName(d,"option"))return(d.attributes.value||{}).specified?d.value:d.text;if(c.nodeName(d,"select")){var e=d.selectedIndex,f=[],g=d.options,h=d.type==="select-one";if(e<0)return null;for(var i=h?e:0,j=h?e+1:g.length;i<j;i++){var k=g[i];if(k.selected){a=c(k).val();if(h)return a;f.push(a)}}return f}return K.test(d.type)&&!c.support.checkOn?d.getAttribute("value")===null?"on":d.value:(d.value||"").replace(F,"")}return b}var l=c.isFunction(a);return this.each(function(b){var d=c(this),e=a;if(this.nodeType!==1)return;l&&(e=a.call(this,b,d.val())),typeof e=="number"&&(e+="");if(c.isArray(e)&&K.test(this.type))this.checked=c.inArray(d.val(),e)>=0;else if(c.nodeName(this,"select")){var f=c.makeArray(e);c("option",this).each(function(){this.selected=c.inArray(c(this).val(),f)>=0}),f.length||(this.selectedIndex=-1)}else this.value=e})}}),c.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,d,e,f){if(!a||a.nodeType===3||a.nodeType===8)return b;if(f&&d in c.attrFn)return c(a)[d](e);var g=a.nodeType!==1||!c.isXMLDoc(a),h=e!==b;d=g&&c.props[d]||d;if(a.nodeType===1){var i=G.test(d);if(d==="selected"&&!c.support.optSelected){var j=a.parentNode;j&&(j.selectedIndex,j.parentNode&&j.parentNode.selectedIndex)}if(d in a&&g&&!i){h&&(d==="type"&&H.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed"),a[d]=e);if(c.nodeName(a,"form")&&a.getAttributeNode(d))return a.getAttributeNode(d).nodeValue;if(d==="tabIndex"){var k=a.getAttributeNode("tabIndex");return k&&k.specified?k.value:I.test(a.nodeName)||J.test(a.nodeName)&&a.href?0:b}return a[d]}if(!c.support.style&&g&&d==="style")return h&&(a.style.cssText=""+e),a.style.cssText;h&&a.setAttribute(d,""+e);var l=!c.support.hrefNormalized&&g&&i?a.getAttribute(d,2):a.getAttribute(d);return l===null?b:l}return c.style(a,d,e)}});var L=/\.(.*)$/,M=function(a){return a.replace(/[^\w\s\.\|`]/g,function(a){return"\\"+a})};c.event={add:function(d,e,f,g){if(d.nodeType===3||d.nodeType===8)return;d.setInterval&&d!==a&&!d.frameElement&&(d=a);var h,i;f.handler&&(h=f,f=h.handler),f.guid||(f.guid=c.guid++);var j=c.data(d);if(!j)return;var k=j.events=j.events||{},l=j.handle,l;l||(j.handle=l=function(){return typeof c!="undefined"&&!c.event.triggered?c.event.handle.apply(l.elem,arguments):b}),l.elem=d,e=e.split(" ");var m,n=0,o;while(m=e[n++]){i=h?c.extend({},h):{handler:f,data:g},m.indexOf(".")>-1?(o=m.split("."),m=o.shift(),i.namespace=o.slice(0).sort().join(".")):(o=[],i.namespace=""),i.type=m,i.guid=f.guid;var p=k[m],q=c.event.special[m]||{};if(!p){p=k[m]=[];if(!q.setup||q.setup.call(d,g,o,l)===!1)d.addEventListener?d.addEventListener(m,l,!1):d.attachEvent&&d.attachEvent("on"+m,l)}q.add&&(q.add.call(d,i),i.handler.guid||(i.handler.guid=f.guid)),p.push(i),c.event.global[m]=!0}d=null},global:{},remove:function(a,b,d,e){if(a.nodeType===3||a.nodeType===8)return;var f,g,h,i=0,j,k,l,m,n,o,p,q=c.data(a),r=q&&q.events;if(!q||!r)return;b&&b.type&&(d=b.handler,b=b.type);if(!b||typeof b=="string"&&b.charAt(0)==="."){b=b||"";for(g in r)c.event.remove(a,g+b);return}b=b.split(" ");while(g=b[i++]){p=g,o=null,j=g.indexOf(".")<0,k=[],j||(k=g.split("."),g=k.shift(),l=new RegExp("(^|\\.)"+c.map(k.slice(0).sort(),M).join("\\.(?:.*\\.)?")+"(\\.|$)")),n=r[g];if(!n)continue;if(!d){for(var s=0;s<n.length;s++){o=n[s];if(j||l.test(o.namespace))c.event.remove(a,p,o.handler,s),n.splice(s--,1)}continue}m=c.event.special[g]||{};for(var s=e||0;s<n.length;s++){o=n[s];if(d.guid===o.guid){if(j||l.test(o.namespace))e==null&&n.splice(s--,1),m.remove&&m.remove.call(a,o);if(e!=null)break}}if(n.length===0||e!=null&&n.length===1)(!m.teardown||m.teardown.call(a,k)===!1)&&N(a,g,q.handle),f=null,delete r[g]}if(c.isEmptyObject(r)){var t=q.handle;t&&(t.elem=null),delete q.events,delete q.handle,c.isEmptyObject(q)&&c.removeData(a)}},trigger:function(a,d,e){var f=a.type||a,g=arguments[3];if(!g){a=typeof a=="object"?a[A]?a:c.extend(c.Event(f),a):c.Event(f),f.indexOf("!")>=0&&(a.type=f=f.slice(0,-1),a.exclusive=!0),e||(a.stopPropagation(),c.event.global[f]&&c.each(c.cache,function(){this.events&&this.events[f]&&c.event.trigger(a,d,this.handle.elem)}));if(!e||e.nodeType===3||e.nodeType===8)return b;a.result=b,a.target=e,d=c.makeArray(d),d.unshift(a)}a.currentTarget=e;var h=c.data(e,"handle");h&&h.apply(e,d);var i=e.parentNode||e.ownerDocument;try{e&&e.nodeName&&c.noData[e.nodeName.toLowerCase()]||e["on"+f]&&e["on"+f].apply(e,d)===!1&&(a.result=!1)}catch(j){}if(!a.isPropagationStopped()&&i)c.event.trigger(a,d,i,!0);else if(!a.isDefaultPrevented()){var k=a.target,l,m=c.nodeName(k,"a")&&f==="click",n=c.event.special[f]||{};if((!n._default||n._default.call(e,a)===!1)&&!m&&!(k&&k.nodeName&&c.noData[k.nodeName.toLowerCase()])){try{k[f]&&(l=k["on"+f],l&&(k["on"+f]=null),c.event.triggered=!0,k[f]())}catch(j){}l&&(k["on"+f]=l),c.event.triggered=!1}}},handle:function(d){var e,f,g,h,i;d=arguments[0]=c.event.fix(d||a.event),d.currentTarget=this,e=d.type.indexOf(".")<0&&!d.exclusive,e||(g=d.type.split("."),d.type=g.shift(),h=new RegExp("(^|\\.)"+g.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)"));var i=c.data(this,"events"),f=i[d.type];if(i&&f){f=f.slice(0);for(var j=0,k=f.length;j<k;j++){var l=f[j];if(e||h.test(l.namespace)){d.handler=l.handler,d.data=l.data,d.handleObj=l;var m=l.handler.apply(this,arguments);m!==b&&(d.result=m,m===!1&&(d.preventDefault(),d.stopPropagation()));if(d.isImmediatePropagationStopped())break}}}return d.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[A])return a;var d=a;a=c.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||f),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=f.documentElement,i=f.body;a.pageX=a.clientX+(h&&h.scrollLeft||i&&i.scrollLeft||0)-(h&&h.clientLeft||i&&i.clientLeft||0),a.pageY=a.clientY+(h&&h.scrollTop||i&&i.scrollTop||0)-(h&&h.clientTop||i&&i.clientTop||0)}return!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode)&&(a.which=a.charCode||a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a},guid:1e8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:Y}))},remove:function(a){var b=!0,d=a.origType.replace(L,"");c.each(c.data(this,"events").live||[],function(){if(d===this.origType.replace(L,""))return b=!1,!1}),b&&c.event.remove(this,a.origType,Y)}},beforeunload:{setup:function(a,b,c){return this.setInterval&&(this.onbeforeunload=c),!1},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}};var N=f.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);a&&a.type?(this.originalEvent=a,this.type=a.type):this.type=a,this.timeStamp=z(),this[A]=!0},c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=P;var a=this.originalEvent;if(!a)return;a.preventDefault&&a.preventDefault(),a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=P;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P,this.stopPropagation()},isDefaultPrevented:O,isPropagationStopped:O,isImmediatePropagationStopped:O};var Q=function(a){var b=a.relatedTarget;try{while(b&&b!==this)b=b.parentNode;b!==this&&(a.type=a.data,c.event.handle.apply(this,arguments))}catch(d){}},R=function(a){a.type=a.data,c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?R:Q,a)},teardown:function(a){c.event.remove(this,b,a&&a.selector?R:Q)}}}),c.support.submitBubbles||(c.event.special.submit={setup:function(a,b){if(this.nodeName.toLowerCase()!=="form")c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return W("submit",this,arguments)}),c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return W("submit",this,arguments)});else return!1},teardown:function(a){c.event.remove(this,".specialSubmit")}});if(!c.support.changeBubbles){var S=/textarea|input|select/i,T,U=function(a){var b=a.type,d=a.value;return b==="radio"||b==="checkbox"?d=a.checked:b==="select-multiple"?d=a.selectedIndex>-1?c.map(a.options,function(a){return a.selected}).join("-"):"":a.nodeName.toLowerCase()==="select"&&(d=a.selectedIndex),d},V=function(a){var d=a.target,e,f;if(!S.test(d.nodeName)||d.readOnly)return;e=c.data(d,"_change_data"),f=U(d),(a.type!=="focusout"||d.type!=="radio")&&c.data(d,"_change_data",f);if(e===b||f===e)return;if(e!=null||f)return a.type="change",c.event.trigger(a,arguments[1],d)};c.event.special.change={filters:{focusout:V,click:function(a){var b=a.target,c=b.type;if(c==="radio"||c==="checkbox"||b.nodeName.toLowerCase
()==="select")return V.call(this,a)},keydown:function(a){var b=a.target,c=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")return V.call(this,a)},beforeactivate:function(a){var b=a.target;c.data(b,"_change_data",U(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var d in T)c.event.add(this,d+".specialChange",T[d]);return S.test(this.nodeName)},teardown:function(a){return c.event.remove(this,".specialChange"),S.test(this.nodeName)}},T=c.event.special.change.filters}f.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(a){return a=c.event.fix(a),a.type=b,c.event.handle.call(this,a)}c.event.special[b]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)}}}),c.each(["bind","one"],function(a,d){c.fn[d]=function(a,e,f){if(typeof a=="object"){for(var g in a)this[d](g,e,a[g],f);return this}c.isFunction(e)&&(f=e,e=b);var h=d==="one"?c.proxy(f,function(a){return c(this).unbind(a,h),f.apply(this,arguments)}):f;if(a==="unload"&&d!=="one")this.one(a,e,f);else for(var i=0,j=this.length;i<j;i++)c.event.add(this[i],a,h,e);return this}}),c.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else for(var e=0,f=this.length;e<f;e++)c.event.remove(this[e],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var d=c.Event(a);return d.preventDefault(),d.stopPropagation(),c.event.trigger(d,b,this[0]),d.result}},toggle:function(a){var b=arguments,d=1;while(d<b.length)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(e){var f=(c.data(this,"lastToggle"+a.guid)||0)%d;return c.data(this,"lastToggle"+a.guid,f+1),e.preventDefault(),b[f].apply(this,arguments)||!1}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var X={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,d){c.fn[d]=function(a,e,f,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:c(this.context);c.isFunction(e)&&(f=e,e=b),a=(a||"").split(" ");while((h=a[i++])!=null){j=L.exec(h),k="",j&&(k=j[0],h=h.replace(L,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,h==="focus"||h==="blur"?(a.push(X[h]+k),h=h+k):h=(X[h]||h)+k,d==="live"?n.each(function(){c.event.add(this,Z(h,m),{data:e,selector:m,handler:f,origType:h,origHandler:f,preType:l})}):n.unbind(Z(h,m),f)}return this}}),c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)},c.attrFn&&(c.attrFn[b]=!0)}),a.attachEvent&&!a.addEventListener&&a.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}}),function(){function q(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=q(c.childNodes));return b}function r(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var j=!1;while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function s(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var k=!1;while(i){if(i.sizcache===c){k=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){k=!0;break}}else if(j.filter(b,[i]).length>0){k=i;break}}i=i[a]}d[g]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,g=Object.prototype.toString,h=!1,i=!0;[0,0].sort(function(){return i=!1,0});var j=function(a,b,c,e){c=c||[];var h=b=b||f;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var i=[],m,o,p,q,r=!0,s=u(b),w=a;while((d.exec(""),m=d.exec(w))!==null){w=m[3],i.push(m[1]);if(m[2]){q=m[3];break}}if(i.length>1&&l.exec(a))if(i.length===2&&k.relative[i[0]])o=v(i[0]+i[1],b);else{o=k.relative[i[0]]?[b]:j(i.shift(),b);while(i.length)a=i.shift(),k.relative[a]&&(a+=i.shift()),o=v(a,o)}else{if(!e&&i.length>1&&b.nodeType===9&&!s&&k.match.ID.test(i[0])&&!k.match.ID.test(i[i.length-1])){var x=j.find(i.shift(),b,s);b=x.expr?j.filter(x.expr,x.set)[0]:x.set[0]}if(b){var x=e?{expr:i.pop(),set:n(e)}:j.find(i.pop(),i.length===1&&(i[0]==="~"||i[0]==="+")&&b.parentNode?b.parentNode:b,s);o=x.expr?j.filter(x.expr,x.set):x.set,i.length>0?p=n(o):r=!1;while(i.length){var y=i.pop(),z=y;k.relative[y]?z=i.pop():y="",z==null&&(z=b),k.relative[y](p,z,s)}}else p=i=[]}p||(p=o),p||j.error(y||a);if(g.call(p)==="[object Array]")if(!r)c.push.apply(c,p);else if(b&&b.nodeType===1)for(var A=0;p[A]!=null;A++)p[A]&&(p[A]===!0||p[A].nodeType===1&&t(b,p[A]))&&c.push(o[A]);else for(var A=0;p[A]!=null;A++)p[A]&&p[A].nodeType===1&&c.push(o[A]);else n(p,c);return q&&(j(q,h,c,e),j.uniqueSort(c)),c};j.uniqueSort=function(a){if(p){h=i,a.sort(p);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},j.matches=function(a,b){return j(a,null,null,b)},j.find=function(a,b,c){var d,e;if(!a)return[];for(var f=0,g=k.order.length;f<g;f++){var h=k.order[f],e;if(e=k.leftMatch[h].exec(a)){var i=e[1];e.splice(1,1);if(i.substr(i.length-1)!=="\\"){e[1]=(e[1]||"").replace(/\\/g,""),d=k.find[h](e,b,c);if(d!=null){a=a.replace(k.match[h],"");break}}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},j.filter=function(a,c,d,e){var f=a,g=[],h=c,i,l,m=c&&c[0]&&u(c[0]);while(a&&c.length){for(var n in k.filter)if((i=k.leftMatch[n].exec(a))!=null&&i[2]){var o=k.filter[n],p,q,r=i[1];l=!1,i.splice(1,1);if(r.substr(r.length-1)==="\\")continue;h===g&&(g=[]);if(k.preFilter[n]){i=k.preFilter[n](i,h,d,g,e,m);if(!i)l=p=!0;else if(i===!0)continue}if(i)for(var s=0;(q=h[s])!=null;s++)if(q){p=o(q,i,s,h);var t=e^!!p;d&&p!=null?t?l=!0:h[s]=!1:t&&(g.push(q),l=!0)}if(p!==b){d||(h=g),a=a.replace(k.match[n],"");if(!l)return[];break}}if(a===f)if(l==null)j.error(a);else break;f=a}return h},j.error=function(a){throw"Syntax error, unrecognized expression: "+a};var k=j.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&j.filter(b,a,!0)},">":function(a,b){var c=typeof b=="string";if(c&&!/\W/.test(b)){b=b.toLowerCase();for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f){var g=f.parentNode;a[d]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(var d=0,e=a.length;d<e;d++){var f=a[d];f&&(a[d]=c?f.parentNode:f.parentNode===b)}c&&j.filter(b,a,!0)}},"":function(a,b,c){var d=e++,f=s;if(typeof b=="string"&&!/\W/.test(b)){var g=b=b.toLowerCase();f=r}f("parentNode",b,d,a,g,c)},"~":function(a,b,c){var d=e++,f=s;if(typeof b=="string"&&!/\W/.test(b)){var g=b=b.toLowerCase();f=r}f("previousSibling",b,d,a,g,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");return!f&&k.attrMap[g]&&(a[1]=k.attrMap[g]),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=j(a[3],null,null,b);else{var g=j.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}else if(k.match.POS.test(a[0])||k.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!j(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=k.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||q([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var c=0,h=g.length;c<h;c++)if(g[c]===a)return!1;return!0}j.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=k.attrHandle[c]?k.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=k.setFilters[e];if(f)return f(a,c,b,d)}}},l=k.match.POS;for(var m in k.match)k.match[m]=new RegExp(k.match[m].source+/(?![^\[]*\])(?![^\(]*\))/.source),k.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+k.match[m].source.replace(/\\(\d+)/g,function(a,b){return"\\"+(b-0+1)}));var n=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(f.documentElement.childNodes,0)[0].nodeType}catch(o){n=function(a,b){var c=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(c,a);else if(typeof a.length=="number")for(var d=0,e=a.length;d<e;d++)c.push(a[d]);else for(var d=0;a[d];d++)c.push(a[d]);return c}}var p;f.documentElement.compareDocumentPosition?p=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(h=!0),a.compareDocumentPosition?-1:1;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;return c===0&&(h=!0),c}:"sourceIndex"in f.documentElement?p=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(h=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;return c===0&&(h=!0),c}:f.createRange&&(p=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(h=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0);var e=c.compareBoundaryPoints(Range.START_TO_END,d);return e===0&&(h=!0),e}),function(){var a=f.createElement("div"),c="script"+(new Date).getTime();a.innerHTML="<a name='"+c+"'/>";var d=f.documentElement;d.insertBefore(a,d.firstChild),f.getElementById(c)&&(k.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},k.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=f.createElement("div");a.appendChild(f.createComment("")),a.getElementsByTagName("*").length>0&&(k.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(k.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),f.querySelectorAll&&function(){var a=j,b=f.createElement("div");b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;j=function(b,c,d,e){c=c||f;if(!e&&c.nodeType===9&&!u(c))try{return n(c.querySelectorAll(b),d)}catch(g){}return a(b,c,d,e)};for(var c in a)j[c]=a[c];b=null}(),function(){var a=f.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;k.order.splice(1,0,"CLASS"),k.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}();var t=f.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},u=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1},v=function(a,b){var c=[],d="",e,f=b.nodeType?[b]:b;while(e=k.match.PSEUDO.exec(a))d+=e[0],a=a.replace(k.match.PSEUDO,"");a=k.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)j(a,f[g],c);return j.filter(d,c)};c.find=j,c.expr=j.selectors,c.expr[":"]=c.expr.filters,c.unique=j.uniqueSort,c.text=q,c.isXMLDoc=u,c.contains=t;return}();var $=/Until$/,_=/^(?:parents|prevUntil|prevAll)/,ba=/,/,u=Array.prototype.slice,bb=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(a,c){return!!b.call(a,c,a)===d});if(b.nodeType)return c.grep(a,function(a,c){return a===b===d});if(typeof b=="string"){var e=c.grep(a,function(a){return a.nodeType===1});if(i.test(b))return c.filter(b,e,!d);b=c.filter(b,e)}return c.grep(a,function(a,e){return c.inArray(a,b)>=0===d})};c.fn.extend({find:function(a){var b=this.pushStack("","find",a),d=0;for(var e=0,f=this.length;e<f;e++){d=b.length,c.find(a,this[e],b);if(e>0)for(var g=d;g<b.length;g++)for(var h=0;h<d;h++)if(b[h]===b[g]){b.splice(g--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var a=0,d=b.length;a<d;a++)if(c.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(bb(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bb(this,a,!0),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],e=this[0],f,g={},h;if(e&&a.length){for(var i=0,j=a.length;i<j;i++)h=a[i],g[h]||(g[h]=c.expr.match.POS.test(h)?c(h,b||this.context):h);while(e&&e.ownerDocument&&e!==b){for(h in g){f=g[h];if(f.jquery?f.index(e)>-1:c(e).is(f))d.push({selector:h,elem:e}),delete g[h]}e=e.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(d,e){while(e&&e.ownerDocument&&e!==b){if(k?k.index(e)>-1:c(e).is(a))return e;e=e.parentNode}return null})},index:function(a){return!a||typeof a=="string"?c.inArray(this[0],a?c(a):this.parent().children()):c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a=="string"?c(a,b||this.context):c.makeArray(a),e=c.merge(this.get(),d);return this.pushStack(bc(d[0])||bc(e[0])?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}}),c.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,e){var f=c.map(this,b,d);return $.test(a)||(e=d),e&&typeof e=="string"&&(f=c.filter(e,f)),f=this.length>1?c.unique(f):f,(this.length>1||ba.test(e))&&_.test(a)&&(f=f.reverse()),this.pushStack(f,a,u.call(arguments).join(","))}}),c.extend({filter:function(a,b,d){return d&&(a=":not("+a+")"),c.find.matches(a,b)},dir:function(a,d,e){var f=[],g=a[d];while(g&&g.nodeType!==9&&(e===b||g.nodeType!==1||!c(g).is(e)))g.nodeType===1&&f.push(g),g=g[d];return f},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bd=/ jQuery\d+="(?:\d+|null)"/g,be=/^\s+/,bf=/(<([\w:]+)[^>]*?)\/>/g,bg=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,bh=/<([\w:]+)/,bi=/<tbody/i,bj=/<|&#?\w+;/,bk=/<script|<object|<embed|<option|<style/i,bl=/checked\s*(?:[^=]|=\s*.checked.)/i,bm=function(a,b,c){return bg.test(c)?a:b+"></"+c+">"},bn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bn.optgroup=bn.option,bn.tbody=bn.tfoot=bn.colgroup=bn.caption=bn.thead,bn.th=bn.td,c.support.htmlSerialize||(bn._default=[1,"div<div>","</div>"]),c.fn.extend({text:function(a){return c.isFunction(a)?this.each(function(b){var d=c(this);d.text(a.call(this,b,d.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||f).createTextNode(a)):c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return c.isFunction(a)?this.each(function(b){c(this).wrapInner(a.call(this,b))}):this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=c(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,c(arguments[0]).toArray()),a}},remove:function(a,b){for(var d=0,e;(e=this[d])!=null;d++)if(!a||c.filter(a,[e]).length)!b&&e.nodeType===1&&(c.cleanData(e.getElementsByTagName("*")),c.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var a=this.outerHTML,b=this.ownerDocument;if(!a){var d=b.createElement("div");d.appendChild(this.cloneNode(!0)),a=d.innerHTML}return c.clean([a.replace(bd,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(be,"")],b)[0]}return this.cloneNode(!0)});return a===!0&&(bo(this,b),bo(this.find("*"),b.find("*"))),b},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(bd,""):null;if(typeof a=="string"&&!bk.test(a)&&(c.support.leadingWhitespace||!be.test(a))&&!bn[(bh.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bf,bm);try{for(var d=0,e=this.length;d<e;d++)this[d].nodeType===1&&(c.cleanData(this[d].getElementsByTagName("*")),this[d].innerHTML=a)}catch(f){this.empty().append(a)}}else c.isFunction(a)?this.each(function(b){var d=c(this),e=d.html();d.empty().append(function(){return a.call(this,b,e)})}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?c.isFunction(a)?this.each(function(b){var d=c(this),e=d.html();d.replaceWith(a.call(this,b,e))}):(typeof a!="string"&&(a=c(a).detach()),this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove(),b?c(b).before(a):c(d).append(a)})):this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,!0)},domManip:function(a,d,e){function n(a,b){return c.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}var f,g,h=a[0],i=[],j,k;if(!c.support.checkClone&&arguments.length===3&&typeof h=="string"&&bl.test(h))return this.each(function(){c(this).domManip(a,d,e,!0)});if(c.isFunction(h))return this.each(function(f){var g=c(this);a[0]=h.call(this,f,d?g.html():b),g.domManip(a,d,e)});if(this[0]){k=h&&h.parentNode,c.support.parentNode&&k&&k.nodeType===11&&k.childNodes.length===this.length?f={fragment:k}:f=bp(a,this,i),j=f.fragment,j.childNodes.length===1?g=j=j.firstChild:g=j.firstChild;if(g){d=d&&c.nodeName(g,"tr");for(var l=0,m=this.length;l<m;l++)e.call(d?n(this[l],g):this[l],l>0||f.cacheable||this.length>1?j.cloneNode(!0):j)}i.length&&c.each(i,x)}return this}}),c.fragments={},c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var e=[],f=c(d),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&f.length===1)return f[b](this[0]),this;for(var h=0,i=f.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();c.fn[b].apply(c(f[h]),j),e=e.concat(j)}return this.pushStack(e,a,f.selector)}}),c.extend({clean:function(a,b,d,e){b=b||f,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||f);var g=[];for(var h=0,i;(i=a[h])!=null;h++){typeof i=="number"&&(i+="");if(!i)continue;if(typeof i=="string"&&!bj.test(i))i=b.createTextNode(i);else if(typeof i=="string"){i=i.replace(bf,bm);var j=(bh.exec(i)||["",""])[1].toLowerCase(),k=bn[j]||bn._default,l=k[0],m=b.createElement("div");m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!c.support.tbody){var n=bi.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(var p=o.length-1;p>=0;--p)c.nodeName(o[p],"tbody")&&!o[p].childNodes.length&&o[p].parentNode.removeChild(o[p])}!c.support.leadingWhitespace&&be.test(i)&&m.insertBefore(b.createTextNode(be.exec(i)[0]),m.firstChild),i=m.childNodes}i.nodeType?g.push(i):g=c.merge(g,i)}if(d)for(var h=0;g[h];h++)e&&c.nodeName(g[h],"script")&&(!g[h].type||g[h].type.toLowerCase()==="text/javascript")?e.push(g[h].parentNode?g[h].parentNode.removeChild(g[h]):g[h]):(g[h].nodeType===1&&g.splice.apply(g,[h+1,0].concat(c.makeArray(g[h].getElementsByTagName("script")))),d.appendChild(g[h]));return g},cleanData:function(a){var b,d,e=c.cache,f=c.event.special,g=c.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){d=i[c.expando];if(d){b=e[d];if(b.events)for(var j in b.events)f[j]?c.event.remove(i,j):N(i,j,b.handle);g?delete i[c.expando]:i.removeAttribute&&i.removeAttribute(c.expando),delete e[d]}}}});var bq=/z-?index|font-?weight|opacity|zoom|line-?height/i,br=/alpha\([^)]*\)/,bs=/opacity=([^)]*)/,bt=/float/i,bu=/-([a-z])/ig,bv=/([A-Z])/g,bw=/^-?\d+(?:px)?$/i,bx=/^-?\d/,by={position:"absolute",visibility:"hidden",display:"block"},bz=["Left","Right"],bA=["Top","Bottom"],bB=f.defaultView&&f.defaultView.getComputedStyle,bC=c.support.cssFloat?"cssFloat":"styleFloat",bD=function(a,b){return b.toUpperCase()};c.fn.css=function(a,d){return y(this,a,d,!0,function(a,d,e){if(e===b)return c.curCSS(a,d);typeof e=="number"&&!bq.test(d)&&(e+="px"),c.style(a,d,e)})},c.extend({style:function(a,d,e){if(!a||a.nodeType===3||a.nodeType===8)return b;(d==="width"||d==="height")&&parseFloat(e)<0&&(e=b);var f=a.style||a,g=e!==b;if(!c.support.opacity&&d==="opacity"){if(g){f.zoom=1;var h=parseInt(e,10)+""=="NaN"?"":"alpha(opacity="+e*100+")",i=f.filter||c.curCSS(a,"filter")||"";f.filter=br.test(i)?i.replace(br,h):h}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(bs.exec(f.filter)[1])/100+"":""}return bt.test(d)&&(d=bC),d=d.replace(bu,bD),g&&(f[d]=e),f[d]},css:function(a,b,d,e){if(b==="width"||b==="height"){var f,g=by,h=b==="width"?bz:bA;function i(){f=b==="width"?a.offsetWidth:a.offsetHeight;if(e==="border")return;c.each(h,function(){e||(f-=parseFloat(c.curCSS(a,"padding"+this,!0))||0),e==="margin"?f+=parseFloat(c.curCSS(a,"margin"+this,!0))||0:f-=parseFloat(c.curCSS(a,"border"+this+"Width",!0))||0})}return a.offsetWidth!==0?i():c.swap(a,g,i),Math.max(0,Math.round(f))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var e,f=a.style,g;if(!c.support.opacity&&b==="opacity"&&a.currentStyle)return e=bs.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"",e===""?"1":e;bt.test(b)&&(b=bC);if(!d&&f&&f[b])e=f[b];else if(bB){bt.test(b)&&(b="float"),b=b.replace(bv,"-$1").toLowerCase();var h=a.ownerDocument.defaultView;if(!h)return null;var i=h.getComputedStyle(a,null);i&&(e=i.getPropertyValue(b)),b==="opacity"&&e===""&&(e="1")}else if(a.currentStyle){var j=b.replace(bu,bD);e=a.currentStyle[b]||a.currentStyle[j];if(!bw.test(e)&&bx.test(e)){var k=f.left,l=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,f.left=j==="fontSize"?"1em":e||0,e=f.pixelLeft+"px",f.left=k,a.runtimeStyle.left=l}}return e},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(var e in b)a.style[e]=d[e]}}),c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var b=a.offsetWidth,d=a.offsetHeight,e=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!e?!0:b>0&&d>0&&!e?!1:c.curCSS(a,"display")==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});var bE=z(),bF=/<script(.|\s)*?\/script>/gi,bG=/select|textarea/i,bH=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,bI=/=\?(&|$)/,bJ=/\?/,bK=/(\?|&)_=.*?(&|$)/,bL=/^(\w+:)?\/\/([^\/?#]+)/,bM=/%20/g,bN=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!="string")return bN.call(this,a);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";b&&(c.isFunction(b)?(d=b,b=null):typeof b=="object"&&(b=c.param(b,c.ajaxSettings.traditional),g="POST"));var h=this;return c.ajax({url:a,type:g,dataType:"html",data:b,complete:function(a,b){(b==="success"||b==="notmodified")&&h.html(f?c("<div />").append(a.responseText.replace(bF,"")).find(f):a.responseText),d&&h.each(d,[a.responseText,b,a])}}),this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bG.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var d=c(this).val();return d==null?null:c.isArray(d)?c.map(d,function(a,c){return{name:b.name,value:a}}):{name:b.name,value:d}}).get()}}),c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(a){return this.bind(b,a)}}),c.extend({get:function(a,b,d,e){return c.isFunction(b)&&(e=e||d,d=b,b=null),c.ajax({type:"GET",url:a,data:b,success:d,dataType:e})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,e){return c.isFunction(b)&&(e=e||d,d=b,b={}),c.ajax({type:"POST",url:a,data:b,success:d,dataType:e})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,xhr:a.XMLHttpRequest&&(a.location.protocol!=="file:"||!a.ActiveXObject)?function(){return new a.XMLHttpRequest}:function(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(d){function x(){e.success&&e.success.call(j,i,h,t),e.global&&A("ajaxSuccess",[t,e])}function y(){e.complete&&e.complete.call(j,t,h),e.global&&A("ajaxComplete",[t,e]),e.global&&!--c.active&&c.event.trigger("ajaxStop")}function A(a,b){(e.context?c(e.context):c.event).trigger(a,b)}var e=c.extend(!0,{},c.ajaxSettings,d),g,h,i,j=d&&d.context||e,k=e.type.toUpperCase();e.data&&e.processData&&typeof e.data!="string"&&(e.data=c.param(e.data,e.traditional));if(e.dataType==="jsonp"){if(k==="GET")bI.test(e.url)||(e.url+=(bJ.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!bI.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}e.dataType==="json"&&(e.data&&bI.test(e.data)||bI.test(e.url))&&(g=e.jsonpCallback||"jsonp"+bE++,e.data&&(e.data=(e.data+"").replace(bI,"="+g+"$1")),e.url=e.url.replace(bI,"="+g+"$1"),e.dataType="script",a[g]=a[g]||function(c){i=c,x(),y(),a[g]=b;try{delete a[g]}catch(d){}p&&p.removeChild(q)}),e.dataType==="script"&&e.cache===null&&(e.cache=!1);if(e.cache===!1&&k==="GET"){var l=z(),m=e.url.replace(bK,"$1_="+l+"$2");e.url=m+(m===e.url?(bJ.test(e.url)?"&":"?")+"_="+l:"")}e.data&&k==="GET"&&(e.url+=(bJ.test(e.url)?"&":"?")+e.data),e.global&&!(c.active++)&&c.event.trigger("ajaxStart");var n=bL.exec(e.url),o=n&&(n[1]&&n[1]!==location.protocol||n[2]!==location.host);if(e.dataType==="script"&&k==="GET"&&o){var p=f.getElementsByTagName("head")[0]||f.documentElement,q=f.createElement("script");q.src=e.url,e.scriptCharset&&(q.charset=e.scriptCharset);if(!g){var r=!1;q.onload=q.onreadystatechange=function(){!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(r=!0,x(),y(),q.onload=q.onreadystatechange=null,p&&q.parentNode&&p.removeChild(q))}}return p.insertBefore(q,p.firstChild),b}var s=!1,t=e.
xhr();if(!t)return;e.username?t.open(k,e.url,e.async,e.username,e.password):t.open(k,e.url,e.async);try{(e.data||d&&d.contentType)&&t.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(c.lastModified[e.url]&&t.setRequestHeader("If-Modified-Since",c.lastModified[e.url]),c.etag[e.url]&&t.setRequestHeader("If-None-Match",c.etag[e.url])),o||t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(u){}if(e.beforeSend&&e.beforeSend.call(j,t,e)===!1)return e.global&&!--c.active&&c.event.trigger("ajaxStop"),t.abort(),!1;e.global&&A("ajaxSend",[t,e]);var v=t.onreadystatechange=function(a){if(!t||t.readyState===0||a==="abort")s||y(),s=!0,t&&(t.onreadystatechange=c.noop);else if(!s&&t&&(t.readyState===4||a==="timeout")){s=!0,t.onreadystatechange=c.noop,h=a==="timeout"?"timeout":c.httpSuccess(t)?e.ifModified&&c.httpNotModified(t,e.url)?"notmodified":"success":"error";var b;if(h==="success")try{i=c.httpData(t,e.dataType,e)}catch(d){h="parsererror",b=d}h==="success"||h==="notmodified"?g||x():c.handleError(e,t,h,b),y(),a==="timeout"&&t.abort(),e.async&&(t=null)}};try{var w=t.abort;t.abort=function(){t&&w.call(t),v("abort")}}catch(u){}e.async&&e.timeout>0&&setTimeout(function(){t&&!s&&v("timeout")},e.timeout);try{t.send(k==="POST"||k==="PUT"||k==="DELETE"?e.data:null)}catch(u){c.handleError(e,t,null,u),y()}return e.async||v(),t},handleError:function(a,b,d,e){a.error&&a.error.call(a.context||a,b,d,e),a.global&&(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,e])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223||a.status===0}catch(b){}return!1},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),e=a.getResponseHeader("Etag");return d&&(c.lastModified[b]=d),e&&(c.etag[b]=e),a.status===304||a.status===0},httpData:function(a,b,d){var e=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&&e.indexOf("xml")>=0,g=f?a.responseXML:a.responseText;return f&&g.documentElement.nodeName==="parsererror"&&c.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,b)),typeof g=="string"&&(b==="json"||!b&&e.indexOf("json")>=0?g=c.parseJSON(g):(b==="script"||!b&&e.indexOf("javascript")>=0)&&c.globalEval(g)),g},param:function(a,d){function g(a,b){c.isArray(b)?c.each(b,function(b,e){d||/\[\]$/.test(a)?h(a,e):g(a+"["+(typeof e=="object"||c.isArray(e)?b:"")+"]",e)}):!d&&b!=null&&typeof b=="object"?c.each(b,function(b,c){g(a+"["+b+"]",c)}):h(a,b)}function h(a,b){b=c.isFunction(b)?b():b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)}var e=[];d===b&&(d=c.ajaxSettings.traditional);if(c.isArray(a)||a.jquery)c.each(a,function(){h(this.name,this.value)});else for(var f in a)g(f,a[f]);return e.join("&").replace(bM,"+")}});var bO={},bP=/toggle|show|hide/,bQ=/^([+-]=)?([\d+-.]+)(.*)$/,bR,bS=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(bT("show",3),a,b);for(var d=0,e=this.length;d<e;d++){var f=c.data(this[d],"olddisplay");this[d].style.display=f||"";if(c.css(this[d],"display")==="none"){var g=this[d].nodeName,h;if(bO[g])h=bO[g];else{var i=c("<"+g+" />").appendTo("body");h=i.css("display"),h==="none"&&(h="block"),i.remove(),bO[g]=h}c.data(this[d],"olddisplay",h)}}for(var j=0,k=this.length;j<k;j++)this[j].style.display=c.data(this[j],"olddisplay")||"";return this},hide:function(a,b){if(a||a===0)return this.animate(bT("hide",3),a,b);for(var d=0,e=this.length;d<e;d++){var f=c.data(this[d],"olddisplay");!f&&f!=="none"&&c.data(this[d],"olddisplay",c.css(this[d],"display"))}for(var g=0,h=this.length;g<h;g++)this[g].style.display="none";return this},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a=="boolean";return c.isFunction(a)&&c.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:c(this).is(":hidden");c(this)[b?"show":"hide"]()}):this.animate(bT("toggle",3),a,b),this},fadeTo:function(a,b,c){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c)},animate:function(a,b,d,e){var f=c.speed(b,d,e);return c.isEmptyObject(a)?this.each(f.complete):this[f.queue===!1?"each":"queue"](function(){var b=c.extend({},f),d,e=this.nodeType===1&&c(this).is(":hidden"),g=this;for(d in a){var h=d.replace(bu,bD);d!==h&&(a[h]=a[d],delete a[d],d=h);if(a[d]==="hide"&&e||a[d]==="show"&&!e)return b.complete.call(this);(d==="height"||d==="width")&&this.style&&(b.display=c.css(this,"display"),b.overflow=this.style.overflow),c.isArray(a[d])&&((b.specialEasing=b.specialEasing||{})[d]=a[d][1],a[d]=a[d][0])}return b.overflow!=null&&(this.style.overflow="hidden"),b.curAnim=c.extend({},a),c.each(a,function(d,f){var h=new c.fx(g,b,d);if(bP.test(f))h[f==="toggle"?e?"show":"hide":f](a);else{var i=bQ.exec(f),j=h.cur(!0)||0;if(i){var k=parseFloat(i[2]),l=i[3]||"px";l!=="px"&&(g.style[d]=(k||1)+l,j=(k||1)/h.cur(!0)*j,g.style[d]=j+l),i[1]&&(k=(i[1]==="-="?-1:1)*k+j),h.custom(j,k,l)}else h.custom(j,f,"")}}),!0})},stop:function(a,b){var d=c.timers;return a&&this.queue([]),this.each(function(){for(var a=d.length-1;a>=0;a--)d[a].elem===this&&(b&&d[a](!0),d.splice(a,1))}),b||this.dequeue(),this}}),c.each({slideDown:bT("show",1),slideUp:bT("hide",1),slideToggle:bT("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(a,c){return this.animate(b,a,c)}}),c.extend({speed:function(a,b,d){var e=a&&typeof a=="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};return e.duration=c.fx.off?0:typeof e.duration=="number"?e.duration:c.fx.speeds[e.duration]||c.fx.speeds._default,e.old=e.complete,e.complete=function(){e.queue!==!1&&c(this).dequeue(),c.isFunction(e.old)&&e.old.call(this)},e},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig||(b.orig={})}}),c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(c.fx.step[this.prop]||c.fx.step._default)(this),(this.prop==="height"||this.prop==="width")&&this.elem.style&&(this.elem.style.display="block")},cur:function(a){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var b=parseFloat(c.css(this.elem,this.prop,a));return b&&b>-1e4?b:parseFloat(c.curCSS(this.elem,this.prop))||0}return this.elem[this.prop]},custom:function(a,b,d){function f(a){return e.step(a)}this.startTime=z(),this.start=a,this.end=b,this.unit=d||this.unit||"px",this.now=this.start,this.pos=this.state=0;var e=this;f.elem=this.elem,f()&&c.timers.push(f)&&!bR&&(bR=setInterval(c.fx.tick,13))},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=z(),d=!0;if(a||b>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var e in this.options.curAnim)this.options.curAnim[e]!==!0&&(d=!1);if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;var f=c.data(this.elem,"olddisplay");this.elem.style.display=f?f:this.options.display,c.css(this.elem,"display")==="none"&&(this.elem.style.display="block")}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var g in this.options.curAnim)c.style(this.elem,g,this.options.orig[g]);this.options.complete.call(this.elem)}return!1}var h=b-this.startTime;this.state=h/this.options.duration;var i=this.options.specialEasing&&this.options.specialEasing[this.prop],j=this.options.easing||(c.easing.swing?"swing":"linear");return this.pos=c.easing[i||j](this.state,h,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},c.extend(c.fx,{tick:function(){var a=c.timers;for(var b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||c.fx.stop()},stop:function(){clearInterval(bR),bR=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length}),"getBoundingClientRect"in f.documentElement?c.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){c.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),e=b.ownerDocument,f=e.body,g=e.documentElement,h=g.clientTop||f.clientTop||0,i=g.clientLeft||f.clientLeft||0,j=d.top+(self.pageYOffset||c.support.boxModel&&g.scrollTop||f.scrollTop)-h,k=d.left+(self.pageXOffset||c.support.boxModel&&g.scrollLeft||f.scrollLeft)-i;return{top:j,left:k}}:c.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){c.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,e=b,f=b.ownerDocument,g,h=f.documentElement,i=f.body,j=f.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(c.offset.supportsFixedPosition&&k.position==="fixed")break;g=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,c.offset.doesNotAddBorder&&(!c.offset.doesAddBorderForTableAndCells||!/^t(able|d|h)$/i.test(b.nodeName))&&(l+=parseFloat(g.borderTopWidth)||0,m+=parseFloat(g.borderLeftWidth)||0),e=d,d=b.offsetParent),c.offset.subtractsBorderForOverflowNotVisible&&g.overflow!=="visible"&&(l+=parseFloat(g.borderTopWidth)||0,m+=parseFloat(g.borderLeftWidth)||0),k=g}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return c.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},c.offset={initialize:function(){var a=f.body,b=f.createElement("div"),d,e,g,h,i=parseFloat(c.curCSS(a,"marginTop",!0))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),a=b=d=e=g=h=null,c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;return c.offset.initialize(),c.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(c.curCSS(a,"marginTop",!0))||0,d+=parseFloat(c.curCSS(a,"marginLeft",!0))||0),{top:b,left:d}},setOffset:function(a,b,d){/static/.test(c.curCSS(a,"position"))&&(a.style.position="relative");var e=c(a),f=e.offset(),g=parseInt(c.curCSS(a,"top",!0),10)||0,h=parseInt(c.curCSS(a,"left",!0),10)||0;c.isFunction(b)&&(b=b.call(a,d,f));var i={top:b.top-f.top+g,left:b.left-f.left+h};"using"in b?b.using.call(a,i):e.css(i)}},c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),e=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();return d.top-=parseFloat(c.curCSS(a,"marginTop",!0))||0,d.left-=parseFloat(c.curCSS(a,"marginLeft",!0))||0,e.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",!0))||0,e.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",!0))||0,{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||f.body;while(a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static")a=a.offsetParent;return a})}}),c.each(["Left","Top"],function(a,d){var e="scroll"+d;c.fn[e]=function(d){var f=this[0],g;return f?d!==b?this.each(function(){g=bU(this),g?g.scrollTo(a?c(g).scrollLeft():d,a?d:c(g).scrollTop()):this[e]=d}):(g=bU(f),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]):null}}),c.each(["Height","Width"],function(a,d){var e=d.toLowerCase();c.fn["inner"+d]=function(){return this[0]?c.css(this[0],e,!1,"padding"):null},c.fn["outer"+d]=function(a){return this[0]?c.css(this[0],e,!1,a?"margin":"border"):null},c.fn[e]=function(a){var f=this[0];return f?c.isFunction(a)?this.each(function(b){var d=c(this);d[e](a.call(this,b,d[e]()))}):"scrollTo"in f&&f.document?f.document.compatMode==="CSS1Compat"&&f.document.documentElement["client"+d]||f.document.body["client"+d]:f.nodeType===9?Math.max(f.documentElement["client"+d],f.body["scroll"+d],f.documentElement["scroll"+d],f.body["offset"+d],f.documentElement["offset"+d]):a===b?c.css(f,e):this.css(e,typeof a=="string"?a:a+"px"):a==null?null:this}}),a.jQuery=a.$=c}(window),jQuery.cookie=function(a,b,c){if(typeof b=="undefined"){var i=null;if(document.cookie&&document.cookie!=""){var j=document.cookie.split(";");for(var k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}}return i}c=c||{},b===null&&(b="",c.expires=-1);var d="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){var e;typeof c.expires=="number"?(e=new Date,e.setTime(e.getTime()+c.expires*24*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")},jQuery.fn.extend({getUrlParam:function(a){a=escape(unescape(a));var b=[],c=null;if($(this).attr("nodeName")=="#document")window.location.search.search(a)>-1&&(c=window.location.search.substr(1,window.location.search.length).split("&"));else if($(this).attr("src")!="undefined"){var d=$(this).attr("src");if(d.indexOf("?")>-1){var e=d.substr(d.indexOf("?")+1);c=e.split("&")}}else{if($(this).attr("href")=="undefined")return null;var d=$(this).attr("href");if(d.indexOf("?")>-1){var e=d.substr(d.indexOf("?")+1);c=e.split("&")}}if(c==null)return null;for(var f=0;f<c.length;f++)escape(unescape(c[f].split("=")[0]))==a&&b.push(c[f].split("=")[1]);return b.length==0?null:b.length==1?b[0]:b}}),function($){$.toJSON=function(a){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(a);var b=typeof a;if(a===null)return"null";if(b=="undefined")return undefined;if(b=="number"||b=="boolean")return a+"";if(b=="string")return $.quoteString(a);if(b=="object"){if(typeof a.toJSON=="function")return $.toJSON(a.toJSON());if(a.constructor===Date){var c=a.getUTCMonth()+1;c<10&&(c="0"+c);var d=a.getUTCDate();d<10&&(d="0"+d);var e=a.getUTCFullYear(),f=a.getUTCHours();f<10&&(f="0"+f);var g=a.getUTCMinutes();g<10&&(g="0"+g);var h=a.getUTCSeconds();h<10&&(h="0"+h);var i=a.getUTCMilliseconds();return i<100&&(i="0"+i),i<10&&(i="0"+i),'"'+e+"-"+c+"-"+d+"T"+f+":"+g+":"+h+"."+i+'Z"'}if(a.constructor===Array){var j=[];for(var k=0;k<a.length;k++)j.push($.toJSON(a[k])||"null");return"["+j.join(",")+"]"}var l=[];for(var m in a){var n,b=typeof m;if(b=="number")n='"'+m+'"';else if(b=="string")n=$.quoteString(m);else continue;if(typeof a[m]=="function")continue;var o=$.toJSON(a[m]);l.push(n+":"+o)}return"{"+l.join(", ")+"}"}},$.evalJSON=function(src){return typeof JSON=="object"&&JSON.parse?JSON.parse(src):eval("("+src+")")},$.secureEvalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(a){return a.match(_escapeable)?'"'+a.replace(_escapeable,function(a){var b=_meta[a];return typeof b=="string"?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,_meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}(jQuery),function(a){function b(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return e==null?"":e[1]}a.prettyPhoto={version:"2.5.6"},a.fn.prettyPhoto=function(c){function r(b){g.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),g.find(".pp_fade").fadeOut(c.animationSpeed,function(){a(".pp_loaderIcon").show(),b&&b()}),h.fadeOut(c.animationSpeed)}function s(b){p==b-1?(g.find("a.pp_next").css("visibility","hidden"),g.find("a.pp_arrow_next").addClass("disabled").unbind("click")):(g.find("a.pp_next").css("visibility","visible"),g.find("a.pp_arrow_next.disabled").removeClass("disabled").bind("click",function(){return a.prettyPhoto.changePage("next"),!1})),p==0?(g.find("a.pp_previous").css("visibility","hidden"),g.find("a.pp_arrow_previous").addClass("disabled").unbind("click")):(g.find("a.pp_previous").css("visibility","visible"),g.find("a.pp_arrow_previous.disabled").removeClass("disabled").bind("click",function(){return a.prettyPhoto.changePage("previous"),!1})),b>1?a(".pp_nav").show():a(".pp_nav").hide()}function t(a,b){hasBeenResized=!1,u(a,b),imageWidth=a,imageHeight=b;if((m>o||l>n)&&d&&c.allowresize&&!e){hasBeenResized=!0,notFitting=!0;while(notFitting)m>o?(imageWidth=o-200,imageHeight=b/a*imageWidth):l>n?(imageHeight=n-200,imageWidth=a/b*imageHeight):notFitting=!1,l=imageHeight,m=imageWidth;u(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(l),containerWidth:Math.floor(m)+40,contentHeight:Math.floor(j),contentWidth:Math.floor(k),resized:hasBeenResized}}function u(b,c){b=parseFloat(b),c=parseFloat(c),$pp_details=g.find(".pp_details"),$pp_details.width(b),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().appendTo(a("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,a.browser.msie&&a.browser.version==7&&(detailsHeight+=8),$pp_details.remove(),j=c+detailsHeight,k=b,l=j+h.height()+g.find(".pp_top").height()+g.find(".pp_bottom").height(),m=b}function v(a){return a.match(/youtube\.com\/watch/i)?"youtube":a.match(/vimeo\.com/i)?"vimeo":a.indexOf(".mov")!=-1?"quicktime":a.indexOf(".swf")!=-1?"flash":a.indexOf("iframe")!=-1?"iframe":a.substr(0,1)=="#"?"inline":"image"}function w(){d&&(titleHeight=h.height(),contentHeight=g.height(),contentwidth=g.width(),projectedTop=n/2+q.scrollTop-(contentHeight+titleHeight)/2,g.css({top:projectedTop,left:o/2+q.scrollLeft-contentwidth/2}),h.css({top:projectedTop-titleHeight,left:o/2+q.scrollLeft-contentwidth/2+20}))}function x(){if(self.pageYOffset)return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};if(document.documentElement&&document.documentElement.scrollTop)return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};if(document.body)return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}function y(){n=a(window).height(),o=a(window).width(),i.css({height:a(document).height()})}function z(){a("body").append(c.markup),g=a(".pp_pic_holder"),h=a(".ppt"),i=a("div.pp_overlay"),g.attr("class","pp_pic_holder "+c.theme),i.css({opacity:0,height:a(document).height()}).bind("click",function(){c.modal||a.prettyPhoto.close()}),a("a.pp_close").bind("click",function(){return a.prettyPhoto.close(),!1}),a("a.pp_expand").bind("click",function(){return $this=a(this),$this.hasClass("pp_expand")?($this.removeClass("pp_expand").addClass("pp_contract"),d=!1):($this.removeClass("pp_contract").addClass("pp_expand"),d=!0),r(function(){a.prettyPhoto.open(imagesnew,titles,descriptions)}),g.find(".pp_fade").fadeOut(c.animationSpeed),!1}),g.find(".pp_previous, .pp_arrow_previous").bind("click",function(){return a.prettyPhoto.changePage("previous"),!1}),g.find(".pp_next, .pp_arrow_next").bind("click",function(){return a.prettyPhoto.changePage("next"),!1})}c=jQuery.extend({animationSpeed:"normal",opacity:.8,showTitle:!0,allowresize:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"light_rounded",hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,changepicturecallback:function(){},callback:function(){},markup:'<div class="pp_pic_holder"> \t\t\t\t\t\t<div class="pp_top"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_content_container"> \t\t\t\t\t\t\t<div class="pp_left"> \t\t\t\t\t\t\t<div class="pp_right"> \t\t\t\t\t\t\t\t<div class="pp_content"> \t\t\t\t\t\t\t\t\t<div class="pp_loaderIcon"></div> \t\t\t\t\t\t\t\t\t<div class="pp_fade"> \t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_expand" title="Expand the image">Expand</a> \t\t\t\t\t\t\t\t\t\t<div class="pp_hoverContainer"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_next" href="#">next</a> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_previous" href="#">previous</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t<div id="pp_full_res"></div> \t\t\t\t\t\t\t\t\t\t<div class="pp_details clearfix"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_close" href="#">Close</a> \t\t\t\t\t\t\t\t\t\t\t<p class="pp_description"></p> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_nav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t\t\t\t\t<p class="currentTextHolder">0/0</p> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_bottom"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<div class="pp_overlay"></div> \t\t\t\t\t<div class="ppt"></div>',image_markup:'<img id="fullResImage" src="" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline clearfix">{content}</div>'},c),a.browser.msie&&parseInt(a.browser.version)==6&&(c.theme="light_square"),a(".pp_overlay").size()==0&&z();var d=!0,e=!1,f,g,h,i,j,k,l,m,n=a(window).height(),o=a(window).width(),p=0,q=x();a(window).scroll(function(){q=x(),w(),y()}),a(window).resize(function(){w(),y()}),a(document).keydown(function(b){if(g.is(":visible"))switch(b.keyCode){case 37:a.prettyPhoto.changePage("previous");break;case 39:a.prettyPhoto.changePage("next");break;case 27:c.modal||a.prettyPhoto.close()}}),a(this).each(function(){a(this).bind("click",function(){_self=this,theRel=a(this).attr("rel"),galleryRegExp=/\[(?:.*)\]/,theGallery=galleryRegExp.exec(theRel);var b=[],c=[],d=[];return theGallery?a("a[rel*="+theGallery+"]").each(function(e){a(this)[0]===a(_self)[0]&&(p=e),b.push(a(this).attr("href")),c.push(a(this).find("img").attr("alt")),d.push(a(this).attr("title"))}):(b=a(this).attr("href"),c=a(this).find("img").attr("alt")?a(this).find("img").attr("alt"):"",d=a(this).attr("title")?a(this).attr("title"):""),a.prettyPhoto.open(b,c,d),!1})}),a.prettyPhoto.open=function(d,j,k){a.browser.msie&&a.browser.version==6&&a("select").css("visibility","hidden"),c.hideflash&&a("object,embed").css("visibility","hidden"),imagesnew=a.makeArray(d),titles=a.makeArray(j),descriptions=a.makeArray(k),image_set=a(imagesnew).size()>0?!0:!1,s(a(imagesnew).size()),a(".pp_loaderIcon").show(),i.show().fadeTo(c.animationSpeed,c.opacity),g.find(".currentTextHolder").text(p+1+c.counter_separator_label+a(imagesnew).size()),descriptions[p]?g.find(".pp_description").show().html(unescape(descriptions[p])):g.find(".pp_description").hide().text(""),titles[p]&&c.showTitle?(hasTitle=!0,h.html(unescape(titles[p]))):hasTitle=!1,movie_width=parseFloat(b("width",imagesnew[p]))?b("width",imagesnew[p]):c.default_width.toString(),movie_height=parseFloat(b("height",imagesnew[p]))?b("height",imagesnew[p]):c.default_height.toString();if(movie_width.indexOf("%")!=-1||movie_height.indexOf("%")!=-1)movie_height=parseFloat(a(window).height()*parseFloat(movie_height)/100-100),movie_width=parseFloat(a(window).width()*parseFloat(movie_width)/100-100),e=!0;g.fadeIn(function(){imgPreloader="";switch(v(imagesnew[p])){case"image":imgPreloader=new Image,nextImage=new Image,image_set&&p>a(imagesnew).size()&&(nextImage.src=imagesnew[p+1]),prevImage=new Image,image_set&&imagesnew[p-1]&&(prevImage.src=imagesnew[p-1]),g.find("#pp_full_res")[0].innerHTML=c.image_markup,g.find("#fullResImage").attr("src",imagesnew[p]),imgPreloader.onload=function(){f=t(imgPreloader.width,imgPreloader.height),_showContent()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),a.prettyPhoto.close()},imgPreloader.src=imagesnew[p];break;case"youtube":f=t(movie_width,movie_height),movie="http://www.youtube.com/v/"+b("v",imagesnew[p]),c.autoplay&&(movie+="&autoplay=1"),toInject=c.flash_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,movie);break;case"vimeo":f=t(movie_width,movie_height),movie_id=imagesnew[p],movie="http://vimeo.com/moogaloop.swf?clip_id="+movie_id.replace("http://vimeo.com/",""),c.autoplay&&(movie+="&autoplay=1"),toInject=c.flash_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,movie);break;case"quicktime":f=t(movie_width,movie_height),f.height+=15,f.contentHeight+=15,f.containerHeight+=15,toInject=c.quicktime_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,imagesnew[p]).replace(/{autoplay}/g,c.autoplay);break;case"flash":f=t(movie_width,movie_height),flash_vars=imagesnew[p],flash_vars=flash_vars.substring(imagesnew[p].indexOf("flashvars")+10,imagesnew[p].length),filename=imagesnew[p],filename=filename.substring(0,filename.indexOf("?")),toInject=c.flash_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":f=t(movie_width,movie_height),frame_url=imagesnew[p],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=c.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{path}/g,frame_url);break;case"inline":myClone=a(imagesnew[p]).clone().css({width:c.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline clearfix"></div></div>').appendTo(a("body")),f=t(a(myClone).width(),a(myClone).height()),a(myClone).remove(),toInject=c.inline_markup.replace(/{content}/g,a(imagesnew[p]).html())}imgPreloader||(g.find("#pp_full_res")[0].innerHTML=toInject,_showContent())})},a.prettyPhoto.changePage=function(b){if(b=="previous"){p--;if(p<0){p=0;return}}else{if(a(".pp_arrow_next").is(".disabled"))return;p++}d||(d=!0),r(function(){a.prettyPhoto.open(imagesnew,titles,descriptions)}),a("a.pp_expand,a.pp_contract").fadeOut(c.animationSpeed)},a.prettyPhoto.close=function(){g.find("object,embed").css("visibility","hidden"),a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(c.animationSpeed),i.fadeOut(c.animationSpeed,function(){a("#pp_full_res").html(""),g.attr("style","").find("div:not(.pp_hoverContainer)").attr("style",""),w(),a.browser.msie&&a.browser.version==6&&a("select").css("visibility","visible"),c.hideflash&&a("object,embed").css("visibility","visible"),p=0,c.callback()}),d=!0},_showContent=function(){a(".pp_loaderIcon").hide(),projectedTop=q.scrollTop+(n/2-f.containerHeight/2),projectedTop<0&&(projectedTop=0+h.height()),g.find(".pp_content").animate({height:f.contentHeight},c.animationSpeed),g.animate({top:projectedTop,left:o/2-f.containerWidth/2,width:f.containerWidth},c.animationSpeed,function(){g.find(".pp_hoverContainer,#fullResImage").height(f.height).width(f.width),g.find(".pp_fade").fadeIn(c.animationSpeed),image_set&&v(imagesnew[p])=="image"?g.find(".pp_hoverContainer").show():g.find(".pp_hoverContainer").hide(),c.showTitle&&hasTitle&&(h.css({top:g.offset().top-25,left:g.offset().left+20,display:"none"}),h.fadeIn(c.animationSpeed)),f.resized&&a("a.pp_expand,a.pp_contract").fadeIn(c.animationSpeed),c.changepicturecallback()})},w()}}(jQuery);if(typeof EXAMPLE=="undefined"||!EXAMPLE)var EXAMPLE={};EXAMPLE.Product=new GENTICS.Aloha.Plugin("com.example.aloha.plugins.Product"),EXAMPLE.Product.languages=["en","de","fr"],EXAMPLE.Product.productField=null,EXAMPLE.Product.init=function(){var a=this;jQuery("head").append('<link rel="stylesheet" type="text/css" href="'+GENTICS.Aloha.settings.base+'/plugins/com.example.aloha.plugins.Product/resources/product.css">');var b=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_product",size:"small",onclick:function(){a.insertProduct()},tooltip:this.i18n("button.insertproduct"),toggle:!1});GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",b,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.insert"),1),GENTICS.Aloha.FloatingMenu.createScope(this.getUID("product"),"GENTICS.Aloha.global"),this.productField=new GENTICS.Aloha.ui.AttributeField,this.productField.setTemplate('<span><b>{name}</b><span class="product-preview" style="background-image: url('+GENTICS.Aloha.settings.base+'{url});"></span>'+'<br class="clear" /><i>{type}</i></span>'),this.productField.setObjectTypeFilter(["product"]),this.productField.setDisplayField("name"),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("product"),this.productField,this.i18n("floatingmenu.tab.product"),1),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(b,c){var d=a.findProduct(c);jQuery(".product-selected").removeClass("product-selected"),d.length!=0&&(GENTICS.Aloha.FloatingMenu.setScope(a.getUID("product")),a.productField.setTargetObject(d,"data-product-name"),d.addClass("product-selected")),GENTICS.Aloha.FloatingMenu.doLayout()}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableDeactivated",function(a,b){jQuery(".product-selected").removeClass("product-selected")})},EXAMPLE.Product.findProduct=function(a){return jQuery(a.commonAncestorContainer).closest(".GENTICS_block.product")},EXAMPLE.Product.insertProduct=function(){GENTICS.Aloha.FloatingMenu.userActivatedTab=this.i18n("floatingmenu.tab.product");var a=GENTICS.Aloha.Selection.getRangeObject(),b=jQuery('<div class="GENTICS_block product" contentEditable="false"><div class="image"></div><div class="name">'+this.i18n("newproductname")+"</div></div>");GENTICS.Utils.Dom.insertIntoDOM(b,a,jQuery(GENTICS.Aloha.activeEditable
.obj)),a.startContainer=a.endContainer=b.contents().get(0),a.select(),this.productField.focus()},EXAMPLE.Product.updateProduct=function(a,b){a.find(".name").text(b.name),a.find(".image").css("backgroundImage","url("+GENTICS.Aloha.settings.base+b.url+")")},GENTICS.Aloha.Repositories||(GENTICS.Aloha.Repositories={}),GENTICS.Aloha.Repositories.Product=new GENTICS.Aloha.Repository("com.gentics.aloha.resources.Product"),GENTICS.Aloha.Repositories.Product.settings.data=[{id:1,name:"Kuota Kueen K",url:"/plugins/com.example.aloha.plugins.Product/resources/kuota-kueen-k.jpg",type:"product"},{id:2,name:"2XU Wetsuit",url:"/plugins/com.example.aloha.plugins.Product/resources/2xu-wetsuit.jpg",type:"product"},{id:3,name:"Asics Noosa Tri",url:"/plugins/com.example.aloha.plugins.Product/resources/asics-noosa.jpg",type:"product"},{id:4,name:"Mizuno Wave Musha 2",url:"/plugins/com.example.aloha.plugins.Product/resources/mizuno-wave-musha2.jpg",type:"product"},{id:5,name:"Simplon Mr. T",url:"/plugins/com.example.aloha.plugins.Product/resources/simplon-mrt.jpg",type:"product"},{id:6,name:"Zoggs Predator",url:"/plugins/com.example.aloha.plugins.Product/resources/zoggs-predator.jpg",type:"product"},{id:7,name:"Fivefingers KSO",url:"/plugins/com.example.aloha.plugins.Product/resources/fivefingers-kso.jpg",type:"product"},{id:8,name:"Trek Fuel EX",url:"/plugins/com.example.aloha.plugins.Product/resources/trek-fuel-ex.jpg",type:"product"}],GENTICS.Aloha.Repositories.Product.query=function(a,b){var c=this.settings.data.filter(function(b,c,d){var e=new RegExp(a.queryString,"i");return jQuery.inArray(b.type,a.objectTypeFilter)>-1&&(b.name.match(e)||b.url.match(e))});b.call(this,c)},GENTICS.Aloha.Repositories.Product.markObject=function(a,b){EXAMPLE.Product.updateProduct(a,b)};if(typeof EXAMPLE=="undefined"||!EXAMPLE)var EXAMPLE={};EXAMPLE.DummySavePlugin=new GENTICS.Aloha.Plugin("com.example.aloha.DummySave"),EXAMPLE.DummySavePlugin.languages=["en","de","fi","fr","it"],EXAMPLE.DummySavePlugin.init=function(){var a=this,b=new GENTICS.Aloha.ui.Button({label:this.i18n("save"),onclick:function(){a.save()}});GENTICS.Aloha.Ribbon.addButton(b)},EXAMPLE.DummySavePlugin.save=function(){var a="";jQuery.each(GENTICS.Aloha.editables,function(b,c){a=a+"Editable ID: "+c.getId()+"\nHTML code: "+c.getContents()+"\n\n"}),alert(this.i18n("saveMessage")+"\n\n"+a)},GENTICS.Aloha.Abbr=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.Abbr"),GENTICS.Aloha.Abbr.languages=["en","de"],GENTICS.Aloha.Abbr.config=["abbr"],GENTICS.Aloha.Abbr.init=function(){this.createButtons(),this.subscribeEvents(),this.bindInteractions()},GENTICS.Aloha.Abbr.createButtons=function(){var a=this;this.formatAbbrButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_abbr",size:"small",onclick:function(){a.formatAbbr()},tooltip:this.i18n("button.abbr.tooltip"),toggle:!0}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.formatAbbrButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.format"),1),this.insertAbbrButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_abbr",size:"small",onclick:function(){a.insertAbbr(!1)},tooltip:this.i18n("button.addabbr.tooltip"),toggle:!1}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.insertAbbrButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.insert"),1),GENTICS.Aloha.FloatingMenu.createScope(this.getUID("abbr"),"GENTICS.Aloha.continuoustext"),this.abbrField=new GENTICS.Aloha.ui.AttributeField({width:320}),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("abbr"),this.abbrField,this.i18n("floatingmenu.tab.abbr"),1)},GENTICS.Aloha.Abbr.bindInteractions=function(){var a=this;this.abbrField.addListener("blur",function(b,c){this.getValue()==""&&a.removeAbbr()});for(var b=0;b<GENTICS.Aloha.editables.length;b++)GENTICS.Aloha.editables[b].obj.keydown(function(b){if(b.metaKey&&b.which==71)return a.findAbbrMarkup()?(GENTICS.Aloha.FloatingMenu.userActivatedTab=a.i18n("floatingmenu.tab.abbr"),GENTICS.Aloha.FloatingMenu.doLayout(),a.abbrField.focus()):a.insertAbbr(),!1})},GENTICS.Aloha.Abbr.subscribeEvents=function(){var a=this;GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(b,c){if(GENTICS.Aloha.activeEditable){var d=a.getEditableConfig(GENTICS.Aloha.activeEditable.obj);if(jQuery.inArray("abbr",d)!=-1)a.formatAbbrButton.show(),a.insertAbbrButton.show();else{a.formatAbbrButton.hide(),a.insertAbbrButton.hide();return}var e=a.findAbbrMarkup(c);e?(a.insertAbbrButton.hide(),a.formatAbbrButton.setPressed(!0),GENTICS.Aloha.FloatingMenu.setScope(a.getUID("abbr")),a.abbrField.setTargetObject(e,"title")):(a.formatAbbrButton.setPressed(!1),a.abbrField.setTargetObject(null)),GENTICS.Aloha.FloatingMenu.doLayout()}})},GENTICS.Aloha.Abbr.findAbbrMarkup=function(a){if(typeof a=="undefined")var a=GENTICS.Aloha.Selection.getRangeObject();return GENTICS.Aloha.activeEditable?a.findMarkup(function(){return this.nodeName.toLowerCase()=="abbr"},GENTICS.Aloha.activeEditable.obj):null},GENTICS.Aloha.Abbr.formatAbbr=function(){var a=GENTICS.Aloha.Selection.getRangeObject();GENTICS.Aloha.activeEditable&&(this.findAbbrMarkup(a)?this.removeAbbr():this.insertAbbr())},GENTICS.Aloha.Abbr.insertAbbr=function(a){if(this.findAbbrMarkup(b))return;GENTICS.Aloha.FloatingMenu.userActivatedTab=this.i18n("floatingmenu.tab.abbr");var b=GENTICS.Aloha.Selection.getRangeObject();b.isCollapsed()&&a!=!1&&GENTICS.Utils.Dom.extendToWord(b);if(b.isCollapsed()){var c=this.i18n("newabbr.defaulttext"),d=jQuery('<abbr title="">'+c+"</abbr>");GENTICS.Utils.Dom.insertIntoDOM(d,b,jQuery(GENTICS.Aloha.activeEditable.obj)),b.startContainer=b.endContainer=d.contents().get(0),b.startOffset=0,b.endOffset=c.length}else{var d=jQuery('<abbr title=""></abbr>');GENTICS.Utils.Dom.addMarkup(b,d,!1)}b.select(),this.abbrField.focus()},GENTICS.Aloha.Abbr.removeAbbr=function(){var a=GENTICS.Aloha.Selection.getRangeObject(),b=this.findAbbrMarkup();b&&(GENTICS.Utils.Dom.removeFromDOM(b,a,!0),GENTICS.Aloha.activeEditable.obj[0].focus(),a.select())},GENTICS.Aloha.Abbr.makeClean=function(a){},GENTICS.Aloha.Format=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.Format"),GENTICS.Aloha.Format.languages=["en","de","fr","eo","fi","ru","it","pl"],GENTICS.Aloha.Format.config=["b","i","del","sub","sup","p","title","h1","h2","h3","h4","h5","h6","pre","removeFormat"],GENTICS.Aloha.Format.init=function(){this.initButtons();var a=this;GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableActivated",function(b,c){a.applyButtonConfig(c.editable.obj)})},GENTICS.Aloha.Format.applyButtonConfig=function(a){config=this.getEditableConfig(a);for(var b in this.buttons)jQuery.inArray(b,config)!=-1?this.buttons[b].button.show():this.buttons[b].button.hide();for(var c in this.multiSplitItems)jQuery.inArray(this.multiSplitItems[c].name,config)!=-1?this.multiSplitButton.extButton.showItem(this.multiSplitItems[c].name):this.multiSplitButton.extButton.hideItem(this.multiSplitItems[c].name)},GENTICS.Aloha.Format.initButtons=function(){var a="GENTICS.Aloha.continuoustext";this.buttons={};var b=this;this.multiSplitItems=[],this.multiSplitButton,jQuery.each(GENTICS.Aloha.Format.config,function(c,d){switch(d){case"b":case"i":case"cite":case"q":case"code":case"abbr":case"del":case"sub":case"sup":b.buttons[d]={button:new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_"+d,size:"small",onclick:function(){GENTICS.Aloha.activeEditable&&GENTICS.Aloha.activeEditable.obj[0].focus();var a=jQuery("<"+d+"></"+d+">"),b=GENTICS.Aloha.Selection.rangeObject,c=b.findMarkup(function(){return this.nodeName.toLowerCase()==a.get(0).nodeName.toLowerCase()},GENTICS.Aloha.activeEditable.obj);return c?b.isCollapsed()?GENTICS.Utils.Dom.removeFromDOM(c,b,!0):GENTICS.Utils.Dom.removeMarkup(b,a,GENTICS.Aloha.activeEditable.obj):(b.isCollapsed()&&GENTICS.Utils.Dom.extendToWord(b),GENTICS.Utils.Dom.addMarkup(b,a)),b.select(),!1},tooltip:b.i18n("button."+d+".tooltip"),toggle:!0}),markup:jQuery("<"+d+"></"+d+">")},GENTICS.Aloha.FloatingMenu.addButton(a,b.buttons[d].button,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.format"),1);break;case"p":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"pre":b.multiSplitItems.push({name:d,tooltip:b.i18n("button."+d+".tooltip"),iconClass:"GENTICS_button "+b.i18n("GENTICS_button_"+d),markup:jQuery("<"+d+"></"+d+">"),click:function(){GENTICS.Aloha.activeEditable&&GENTICS.Aloha.activeEditable.obj[0].focus(),GENTICS.Aloha.Selection.changeMarkupOnSelection(jQuery("<"+d+"></"+d+">"))}});break;case"removeFormat":b.multiSplitItems.push({name:d,text:b.i18n("button."+d+".text"),tooltip:b.i18n("button."+d+".tooltip"),iconClass:"GENTICS_button GENTICS_button_"+d,wide:!0,click:function(){GENTICS.Aloha.Format.removeFormat()}});break;default:GENTICS.Aloha.log("warn",this,'Button "'+d+'" is not defined')}}),this.multiSplitItems.length>0&&(this.multiSplitButton=new GENTICS.Aloha.ui.MultiSplitButton({items:this.multiSplitItems}),GENTICS.Aloha.FloatingMenu.addButton(a,this.multiSplitButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.format"),3)),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(a,c){jQuery.each(b.buttons,function(a,b){for(var d=0;d<c.markupEffectiveAtStart.length;d++){var e=c.markupEffectiveAtStart[d];if(GENTICS.Aloha.Selection.standardTextLevelSemanticsComparator(e,b.markup)){b.button.setPressed(!0);var f=!0}}f||b.button.setPressed(!1)});if(b.multiSplitItems.length>0){var d=!1;for(var e=0;e<c.markupEffectiveAtStart.length&&!d;e++){var f=c.markupEffectiveAtStart[e];for(var g=0;g<b.multiSplitItems.length&&!d;g++){var h=b.multiSplitItems[g];if(!h.markup)continue;GENTICS.Aloha.Selection.standardTextLevelSemanticsComparator(f,h.markup)&&(b.multiSplitButton.setActiveItem(h.name),d=!0)}}d||b.multiSplitButton.setActiveItem(null)}})},GENTICS.Aloha.Format.removeFormat=function(){GENTICS.Aloha.Selection.changeMarkupOnSelection(jQuery("<p></p>"));var a=["b","i","cite","q","code","abbr","del","sub","sup"],b=GENTICS.Aloha.Selection.rangeObject,c=jQuery(b.startContainer),d=jQuery(b.limitObject);if(b.isCollapsed()||c===d)return;var e=c.parent();while(e.get(0)!==d.get(0)){var f=a.indexOf(e.get(0).nodeName.toLowerCase());e=e.parent(),f!=-1&&(GENTICS.Aloha.Selection.changeMarkupOnSelection(jQuery("<"+a[f]+"></"+a[f]+">")),a.splice(f,1))}for(var g in a)GENTICS.Aloha.Selection.changeMarkupOnSelection(jQuery("<"+a[g]+"></"+a[g]+">")),GENTICS.Aloha.Selection.changeMarkupOnSelection(jQuery("<"+a[g]+"></"+a[g]+">"))},GENTICS.Aloha.Format.toString=function(){return"com.gentics.aloha.plugins.Format"},GENTICS.Aloha.HighlightEditables=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.highlighteditables"),GENTICS.Aloha.HighlightEditables.init=function(){var a=this;GENTICS.Utils.Position.addMouseMoveCallback(function(){for(var a=0;a<GENTICS.Aloha.editables.length;a++){var b=GENTICS.Aloha.editables[a];!GENTICS.Aloha.activeEditable&&!b.isDisabled()&&b.obj.addClass("GENTICS_editable_highlight")}}),GENTICS.Utils.Position.addMouseStopCallback(function(){a.fade()}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableActivated",function(b,c){c.editable.obj.addClass("GENTICS_editable_active"),a.fade()}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableDeactivated",function(a,b){b.editable.obj.removeClass("GENTICS_editable_active")})},GENTICS.Aloha.HighlightEditables.fade=function(){for(var a=0;a<GENTICS.Aloha.editables.length;a++){var b=GENTICS.Aloha.editables[a].obj;b.hasClass("GENTICS_editable_highlight")&&b.removeClass("GENTICS_editable_highlight").css("outline","5px solid #FFE767").animate({outlineWidth:"0px"},300,"swing",function(){jQuery(this).css("outline","")})}},GENTICS.Aloha.Repositories||(GENTICS.Aloha.Repositories={}),GENTICS.Aloha.Repositories.LinkList=new GENTICS.Aloha.Repository("com.gentics.aloha.repositories.LinkList"),GENTICS.Aloha.Repositories.LinkList.settings.data=[{name:"Aloha Editor - The HTML5 Editor",url:"http://aloha-editor.com",type:"website"},{name:"Aloha Logo",url:"http://www.aloha-editor.com/images/aloha-editor-logo.png",type:"image"}],GENTICS.Aloha.Repositories.LinkList.folder=[],GENTICS.Aloha.Repositories.LinkList.init=function(){for(var a=0;a<this.settings.data.length;a++){var b=this.settings.data[a];b.repositoryId=this.repositoryId,b.id=b.id?b.id:b.url;var c=b.uri=this.parseUri(b.url),d=this.addFolder("",c.host),e=c.path.split("/");for(j=0;j<e.length;j++)e[j]&&e[j].lastIndexOf(".")<0&&(d=this.addFolder(d,e[j]));b.parentId=d,this.settings.data[a]=new GENTICS.Aloha.Repository.Document(b)}this.repositoryName="Linklist"},GENTICS.Aloha.Repositories.LinkList.addFolder=function(a,b){var c=a?"folder":"hostname",d=a?a+"/"+b:b;return b&&!this.folder[d]&&(this.folder[d]=new GENTICS.Aloha.Repository.Folder({id:d,name:b?b:d,parentId:a,type:"host",repositoryId:this.repositoryId})),d},GENTICS.Aloha.Repositories.LinkList.query=function(a,b){var c=this.settings.data.filter(function(b,c,d){var e=new RegExp(a.queryString,"i"),f=!1;return(!a.queryString||b.name.match(e)||b.url.match(e))&&(!a.objectTypeFilter||jQuery.inArray(b.type,a.objectTypeFilter)>-1)&&(!a.inFolderId||a.inFolderId==b.parentId)});b.call(this,c)},GENTICS.Aloha.Repositories.LinkList.getChildren=function(a,b){var c=[];for(e in this.folder){var d=this.folder[e].parentId;typeof this.folder[e]!="function"&&(this.folder[e].parentId==a.inFolderId||!this.folder[e].parentId&&a.inFolderId==this.repositoryId)&&c.push(this.folder[e])}b.call(this,c)},GENTICS.Aloha.Repositories.LinkList.parseUri=function(a){var b={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;while(e--)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d},GENTICS.Aloha.Repositories.LinkList.getObjectById=function(a,b){var c=[];for(var d=0;d<this.settings.data.length;d++)this.settings.data[d].id==a&&c.push(this.settings.data[d]);return b.call(this,c),!0},GENTICS.Aloha.Repositories||(GENTICS.Aloha.Repositories={}),GENTICS.Aloha.Repositories.delicious=new GENTICS.Aloha.Repository("com.gentics.aloha.repositories.delicious"),GENTICS.Aloha.Repositories.delicious.settings.username="draftkraft",GENTICS.Aloha.Repositories.delicious.settings.weight=.35,GENTICS.Aloha.Repositories.delicious.init=function(){var a=this;this.settings.weight+.15>1&&(this.settings.weight=.85),this.deliciousURL="http://feeds.delicious.com/v2/json/",this.settings.username?(this.deliciousURL+=this.settings.username+"/",this.repositoryName="deliciuos/"+this.settings.username,this.tags=[],jQuery.ajax({type:"GET",dataType:"jsonp",url:"http://feeds.delicious.com/v2/json/tags/"+a.settings.username,success:function(b){for(var c in b)a.tags.push(c)}})):(this.repositoryName="deliciuos/"+popular,this.deliciousURL+="tag/")},GENTICS.Aloha.Repositories.delicious.query=function(a,b){var c=this;if(a.objectTypeFilter&&jQuery.inArray("website",a.objectTypeFilter)==-1)b.call(this,[]);else{var d=[];if(this.settings.username){var e=a.queryString?a.queryString.split(" "):[];for(var f=0;f<e.length;f++){var g=e[f].trim();if(jQuery.inArray(g,c.tags)==-1){var h=c.tags.filter(function(a,b,c){var d=new RegExp(g,"i");return a.match(d)});h.length>0&&d.push(h[0])}else d.push(g)}}else d=a.queryString.split(" ");var i=a.inFolderId?a.inFolderId.split("+"):[];jQuery.extend(d,i);if(a.queryString&&d.length==0){b.call(c,[]);return}jQuery.ajax({type:"GET",dataType:"jsonp",url:c.deliciousURL+d.join("+"),success:function(a){var d=[];for(var e=0;e<a.length;e++)typeof a[e]!="function"&&d.push(new GENTICS.Aloha.Repository.Document({id:a[e].u,name:a[e].d,repositoryId:c.repositoryId,type:"website",url:a[e].u,weight:c.settings.weight+.14}));b.call(c,d)}})}},GENTICS.Aloha.Repositories.delicious.getChildren=function(a,b){var c=this;if(this.settings.username){var d=[];if(a.inFolderId==this.repositoryId){for(var e=0;e<this.tags.length;e++)typeof this.tags[e]!="function"&&d.push(new GENTICS.Aloha.Repository.Folder({id:this.tags[e],name:this.tags[e],repositoryId:this.repositoryId,type:"tag",url:"http://feeds.delicious.com/v2/rss/tags/"+c.settings.username+"/"+this.tags[e]}));b.call(this,d)}else jQuery.ajax({type:"GET",dataType:"jsonp",url:"http://feeds.delicious.com/v2/json/tags/"+c.settings.username+"/"+a.inFolderId,success:function(d){var e=[];for(var f in d){var g=a.inFolderId?a.inFolderId+"+"+f:f;typeof d[f]!="function"&&e.push(new GENTICS.Aloha.Repository.Folder({id:g,name:f,repositoryId:c.repositoryId,type:"tag",url:"http://feeds.delicious.com/v2/rss/tags/"+c.settings.username+"/"+g,hasMoreItems:!0}))}b.call(c,e)}})}else b.call(this,[])},GENTICS.Aloha.Repositories.delicious.getObjectById=function(a,b){var c=this;jQuery.ajax({type:"GET",dataType:"jsonp",url:"http://feeds.delicious.com/v2/json/urlinfo/"+jQuery.md5(a),success:function(d){var e=[];for(var f=0;f<d.length;f++)typeof d[f]!="function"&&e.push(new GENTICS.Aloha.Repository.Document({id:a,name:d[f].title,repositoryId:c.repositoryId,type:"website",url:a,weight:c.settings.weight+.14}));b.call(c,e)}})},GENTICS.Aloha.Link=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.Link"),GENTICS.Aloha.Link.languages=["en","de","fr","ru","pl"],GENTICS.Aloha.Link.config=["a"],GENTICS.Aloha.Link.targetregex="",GENTICS.Aloha.Link.target="",GENTICS.Aloha.Link.cssclassregex="",GENTICS.Aloha.Link.cssclass="",GENTICS.Aloha.Link.objectTypeFilter=[],GENTICS.Aloha.Link.onHrefChange=null,GENTICS.Aloha.Link.init=function(){GENTICS.Aloha.Link.settings.targetregex!=undefined&&(GENTICS.Aloha.Link.targetregex=GENTICS.Aloha.Link.settings.targetregex),GENTICS.Aloha.Link.settings.target!=undefined&&(GENTICS.Aloha.Link.target=GENTICS.Aloha.Link.settings.target),GENTICS.Aloha.Link.settings.cssclassregex!=undefined&&(GENTICS.Aloha.Link.cssclassregex=GENTICS.Aloha.Link.settings.cssclassregex),GENTICS.Aloha.Link.settings.cssclass!=undefined&&(GENTICS.Aloha.Link.cssclass=GENTICS.Aloha.Link.settings.cssclass),GENTICS.Aloha.Link.settings.objectTypeFilter!=undefined&&(GENTICS.Aloha.Link.objectTypeFilter=GENTICS.Aloha.Link.settings.objectTypeFilter),GENTICS.Aloha.Link.settings.onHrefChange!=undefined&&(GENTICS.Aloha.Link.onHrefChange=GENTICS.Aloha.Link.settings.onHrefChange),this.createButtons(),this.subscribeEvents(),this.bindInteractions()},GENTICS.Aloha.Link.createButtons=function(){var a=this;this.formatLinkButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_a",size:"small",onclick:function(){a.formatLink()},tooltip:this.i18n("button.addlink.tooltip"),toggle:!0}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.formatLinkButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.format"),1),this.insertLinkButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_a",size:"small",onclick:function(){a.insertLink(!1)},tooltip:this.i18n("button.addlink.tooltip"),toggle:!1}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.insertLinkButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.insert"),1),GENTICS.Aloha.FloatingMenu.createScope(this.getUID("link"),"GENTICS.Aloha.continuoustext"),this.browser=new GENTICS.Aloha.ui.Browser,this.browser.setObjectTypeFilter(GENTICS.Aloha.Link.objectTypeFilter),this.browser.onSelect=function(b){a.hrefField.setItem(b),a.hrefChange()},this.repositoryButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button_big GENTICS_button_tree",size:"large",onclick:function(){a.browser.show()},tooltip:this.i18n("button.addlink.tooltip"),toggle:!1}),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("link"),this.repositoryButton,this.i18n("floatingmenu.tab.link"),1),this.hrefField=new GENTICS.Aloha.ui.AttributeField({width:320,valueField:"url"}),this.hrefField.setTemplate("<span><b>{name}</b><br/>{url}</span>"),this.hrefField.setObjectTypeFilter(GENTICS.Aloha.Link.objectTypeFilter),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("link"),this.hrefField,this.i18n("floatingmenu.tab.link"),1),this.removeLinkButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_a_remove",size:"small",onclick:function(){a.removeLink()},tooltip:this.i18n("button.removelink.tooltip")}),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("link"),this.removeLinkButton,this.i18n("floatingmenu.tab.link"),1)},GENTICS.Aloha.Link.bindInteractions=function(){var a=this;this.hrefField.addListener("keyup",function(b,c){if(c.keyCode==27){var d=a.hrefField.getQueryValue();d[0]!="/"&&!d.match(/^.*\.([a-z]){2,4}$/i)&&d[0]!="#"&&!d.match(/^htt.*/i)}a.hrefChange()}),this.hrefField.addListener("blur",function(b,c){this.getValue()==""&&a.removeLink()});for(var b=0;b<GENTICS.Aloha.editables.length;b++)GENTICS.Aloha.editables[b].obj.keydown(function(b){if(b.metaKey&&b.which==76)return a.findLinkMarkup()?(GENTICS.Aloha.FloatingMenu.userActivatedTab=a.i18n("floatingmenu.tab.link"),GENTICS.Aloha.FloatingMenu.doLayout(),a.hrefField.focus()):a.insertLink(),!1}),GENTICS.Aloha.editables[b].obj.find("a").each(function(b){jQuery(this).mouseenter(function(b){GENTICS.Aloha.Log.debug(GENTICS.Aloha.Link,"mouse over link."),a.mouseOverLink=this,a.updateMousePointer()}),jQuery(this).mouseleave(function(b){GENTICS.Aloha.Log.debug(GENTICS.Aloha.Link,"mouse left link."),a.mouseOverLink=null,a.updateMousePointer()}),jQuery(this).click(function(a){if(a.metaKey)return GENTICS.Aloha.activeEditable.blur(),setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})});jQuery(document).keydown(function(b){GENTICS.Aloha.Log.debug(GENTICS.Aloha.Link,"Meta key down."),a.metaKey=b.metaKey,a.updateMousePointer()}),jQuery(document).keyup(function(b){GENTICS.Aloha.Log.debug(GENTICS.Aloha.Link,"Meta key up."),a.metaKey=b.metaKey,a.updateMousePointer()})},GENTICS.Aloha.Link.updateMousePointer=function(){this.metaKey&&this.mouseOverLink?(GENTICS.Aloha.Log.debug(GENTICS.Aloha.Link,"set pointer"),jQuery(this.mouseOverLink).removeClass("GENTICS_link_text"),jQuery(this.mouseOverLink).addClass("GENTICS_link_pointer")):(jQuery(this.mouseOverLink).removeClass("GENTICS_link_pointer"),jQuery(this.mouseOverLink).addClass("GENTICS_link_text"))},GENTICS.Aloha.Link.subscribeEvents=function(){var a=this;GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(b,c){if(GENTICS.Aloha.activeEditable){var d=a.getEditableConfig(GENTICS.Aloha.activeEditable.obj);if(jQuery.inArray("a",d)!=-1)a.formatLinkButton.show(),a.insertLinkButton.show();else{a.formatLinkButton.hide(),a.insertLinkButton.hide();return}var e=a.findLinkMarkup(c);e?(a.insertLinkButton.hide(),a.formatLinkButton.setPressed(!0),GENTICS.Aloha.FloatingMenu.setScope(a.getUID("link")),a.hrefField.setTargetObject(e,"href")):(a.formatLinkButton.setPressed(!1),a.hrefField.setTargetObject(null)),GENTICS.Aloha.FloatingMenu.doLayout()}})},GENTICS.Aloha.Link.findLinkMarkup=function(a){if(typeof a=="undefined")var a=GENTICS.Aloha.Selection.getRangeObject();return GENTICS.Aloha.activeEditable?a.findMarkup(function(){return this.nodeName.toLowerCase()=="a"},GENTICS.Aloha.activeEditable.obj):null},GENTICS.Aloha.Link.formatLink=function(){var a=GENTICS.Aloha.Selection.getRangeObject();GENTICS.Aloha.activeEditable&&(this.findLinkMarkup(a)?this.removeLink():this.insertLink())},GENTICS.Aloha.Link.insertLink=function(a){if(this.findLinkMarkup(b))return;GENTICS.Aloha.FloatingMenu.userActivatedTab=this.i18n("floatingmenu.tab.link");var b=GENTICS.Aloha.Selection.getRangeObject();b.isCollapsed()&&a!=!1&&GENTICS.Utils.Dom.extendToWord(b);if(b.isCollapsed()){var c=this.i18n("newlink.defaulttext"),d=jQuery('<a href="">'+c+"</a>");GENTICS.Utils.Dom.insertIntoDOM(d,b,jQuery(GENTICS.Aloha.activeEditable.obj)),b.startContainer=b.endContainer=d.contents().get(0),b.startOffset=0,b.endOffset=c.length}else{var d=jQuery('<a href=""></a>');GENTICS.Utils.Dom.addMarkup(b,d,!1)}b.select(),this.hrefField.focus(),this.hrefChange()},GENTICS.Aloha.Link.removeLink=function(){var a=GENTICS.Aloha.Selection.getRangeObject(),b=this.findLinkMarkup();b&&(GENTICS.Utils.Dom.removeFromDOM(b,a,!0),GENTICS.Aloha.activeEditable.obj[0].focus(),a.select())},GENTICS.Aloha.Link.hrefChange=function(){this.hrefField.setAttribute("target",this.target,this.targetregex,this.hrefField.getQueryValue()),this.hrefField.setAttribute("class",this.cssclass,this.cssclassregex,this.hrefField.getQueryValue()),typeof this.onHrefChange=="function"&&this.onHrefChange.call(this,this.hrefField.getTargetObject(),this.hrefField.getQueryValue(),this.hrefField.getItem()),GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("hrefChanged",GENTICS.Aloha,{obj:this.hrefField.getTargetObject(),href:this.hrefField.getQueryValue(),item:this.hrefField.getItem()}))},GENTICS.Aloha.Link.makeClean=function(a){a.find("a").each(function(){jQuery(this).removeClass("GENTICS_link_pointer"),jQuery(this).removeClass("GENTICS_link_text")})},GENTICS.Aloha.LinkChecker=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.LinkChecker"),GENTICS.Aloha.LinkChecker.languages=["en"],GENTICS.Aloha.LinkChecker.errorCodes=[400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,422,423,424,425,426,449,450,500,501,502,503,504,505,506,507,509,510],GENTICS.Aloha.LinkChecker.warningCodes=[404,411,412,413,426,449,450,500,503,504,505,507,509,510],GENTICS.Aloha.LinkChecker.init=function(){this.proxyUrl=null,GENTICS.Aloha.LinkChecker.settings.proxyUrl!=undefined&&(this.proxyUrl=GENTICS.Aloha.LinkChecker.settings.proxyUrl),this.timer={},this.xhr={};var a=this;GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableActivated",function(b,c){c.editable.obj.find("a").each(function(){a.checkLink(this,jQuery(this).attr("href"),0)})}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableDeactivated",function(b,c){a.makeClean(c.editable.obj)}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"hrefChanged",function(b,c){a.checkLink(c.obj,"hrefChanged")})},GENTICS.Aloha.LinkChecker.checkLink=function(a,b,c,d){var e=this,f=jQuery(a).attr("href"),g=f;if(typeof f=="string"&&!/^http/.test(f.toLowerCase())){this.makeCleanLink(a);return}this.proxyUrl&&(f=this.proxyUrl+f),this.xhr[b]&&(this.xhr[b].abort(),this.xhr[b]=undefined),this.timer[b]=this.urlExists(f,function(b){e.makeCleanLink(a)},function(b){if(a){if(jQuery.inArray(b.status,e.errorCodes)>=0)var c=b.status;else var c="0";var d=jQuery(a);d.attr("title")&&!d.attr("data-invalid")&&d.attr("data-title",d.attr("title")),d.attr("data-invalid","true"),d.attr("title",g+". "+e.i18n("error."+c)),jQuery.inArray(b.status,e.warningCodes)>=0?d.addClass("GENTICS_link_warn"):d.addClass("GENTICS_link_error")}},b,d,c)},GENTICS.Aloha.LinkChecker.urlExists=function(a,b,c,d,e,f){var g=this;clearTimeout(this.timer[d]),f=f!=null&&f!=undefined?f:700;var h=setTimeout(function(){g.xhr[d]=jQuery.ajax({url:a,timeout:e?1e4:e,type:"HEAD",complete:function(a){clearTimeout(h);try{a.status<400?b.call(this,a):c.call(this,a)}catch(d){c.call(this,{status:0})}}})},f);return h},GENTICS.Aloha.LinkChecker.makeCleanLink=function(a){if(a){var b=jQuery(a);b.attr("data-title")?b.attr("title",b.attr("data-title")):b.removeAttr("title"),b.removeAttr("data-title"),b.removeAttr("data-invalid"),b.removeClass("GENTICS_link_error"),b.removeClass("GENTICS_link_warn")}},GENTICS.Aloha.LinkChecker.makeClean=function(a){var b=this;a.find("a").each(function(){b.makeCleanLink(this)})},GENTICS.Aloha.LinkChecker.urlencode=function(a){return a=(a+"").toString(),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},GENTICS.Aloha.ListPlugin=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.List"),GENTICS.Aloha.ListPlugin.languages=["en","de","fr","eo","fi","ru","it"],GENTICS.Aloha.ListPlugin.config=["ul","ol"],GENTICS.Aloha.ListPlugin.transformableElements={p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ul:!0,ol:!0},GENTICS.Aloha.ListPlugin.init=function(){var a=this;this.createUnorderedListButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_ul",size:"small",tooltip:this.i18n("button.createulist.tooltip"),toggle:!0,onclick:function(b,c){a.transformList(!1)}}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.createUnorderedListButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.format"),1),this.createOrderedListButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_ol",size:"small",tooltip:this.i18n("button.createolist.tooltip"),toggle:!0,onclick:function(b,c){a.transformList(!0)}}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.createOrderedListButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.format"),1),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(b,c){a.createUnorderedListButton.setPressed(!1),a.createOrderedListButton.setPressed(!1);for(var d=0;d<c.markupEffectiveAtStart.length;d++){var e=c.markupEffectiveAtStart[d];if(GENTICS.Aloha.Selection.standardTextLevelSemanticsComparator(e,jQuery("<ul></ul>"))){a.createUnorderedListButton.setPressed(!0);break}if(GENTICS.Aloha.Selection.standardTextLevelSemanticsComparator(e,jQuery("<ol></ol>"))){a.createOrderedListButton.setPressed(!0);break}}GENTICS.Aloha.activeEditable&&a.applyButtonConfig(GENTICS.Aloha.activeEditable.obj),GENTICS.Aloha.FloatingMenu.doLayout()}),GENTICS.Aloha.Markup.addKeyHandler(9,function(b){return a.processTab(b)})},GENTICS.Aloha.ListPlugin.applyButtonConfig=function(a){var b=this.getEditableConfig(a);GENTICS.Aloha.Selection.rangeObject.unmodifiableMarkupAtStart[0]&&(jQuery.inArray("ul",b)!=-1&&GENTICS.Aloha.Selection.canTag1WrapTag2(GENTICS.Aloha.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ul")!=-1?this.createUnorderedListButton.show():this.createUnorderedListButton.hide(),jQuery.inArray("ol",b)!=-1&&GENTICS.Aloha.Selection.canTag1WrapTag2(GENTICS.Aloha.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ol")!=-1?this.createOrderedListButton.show():this.createOrderedListButton.hide())},GENTICS.Aloha.ListPlugin.processTab=function(a){switch(a.keyCode){case 9:return a.shiftKey?this.outdentList():this.indentList()}return!0},GENTICS.Aloha.ListPlugin.getStartingDomObjectToTransform=function(){var a=GENTICS.Aloha.Selection.rangeObject;for(var b=0;b<a.markupEffectiveAtStart.length;b++){var c=a.markupEffectiveAtStart[b];if(this.transformableElements[c.nodeName.toLowerCase()])return c}return!1},GENTICS.Aloha.ListPlugin.getNearestSelectedListItem=function(){var a=GENTICS.Aloha.Selection.rangeObject;for(var b=0;b<a.markupEffectiveAtStart.length;b++){var c=a.markupEffectiveAtStart[b];if(GENTICS.Utils.Dom.isListElement(c))return c}return!1},GENTICS.Aloha.ListPlugin.transformList=function(a){var b=this.getStartingDomObjectToTransform();if(!b){GENTICS.Aloha.Selection.changeMarkupOnSelection(jQuery("<p></p>")),b=this.getStartingDomObjectToTransform();if(!b){GENTICS.Aloha.Log.error(this,"Could not transform selection into a list");return}}var c=b.nodeName.toLowerCase();if(c=="ul"&&!a){var d=jQuery(b),e=d.parent();if(e.length>0&&GENTICS.Utils.Dom.isListElement(e.get(0)))d.children().unwrap();else{var f=jQuery(b);jQuery.each(f.children("li"),function(a,b){var c=GENTICS.Aloha.Markup.transformDomObject(b,"p");c.after(c.children("ol,ul"))}),f.children().unwrap()}}else if(c=="ul"&&a)GENTICS.Aloha.Markup.transformDomObject(b,"ol"),this.mergeAdjacentLists(jQuery(b));else if(c=="ol"&&!a)GENTICS.Aloha.Markup.transformDomObject(b,"ul"),this.mergeAdjacentLists(jQuery(b));else if(c=="ol"&&a){var d=jQuery(b),e=d.parent();if(e.length>0&&GENTICS.Utils.Dom.isListElement(e.get(0)))d.children().unwrap();else{var f=jQuery(b);jQuery.each(f.children("li"),function(a,b){var c=GENTICS.Aloha.Markup.transformDomObject(b,"p");c.after(c.children("ol,ul"))}),f.children().unwrap()}}else{var g=GENTICS.Aloha.Selection.rangeObject.getSelectedSiblings(b),d=a?jQuery("<ol></ol>"):jQuery("<ul></ul>"),h=jQuery("<li></li>");d.append(h),jQuery(b).contents().appendTo(h),jQuery(b).replaceWith(d);if(g){var i=!1;for(var j=0;j<g.length;++j)if(GENTICS.Utils.Dom.isBlockLevelElement(g[j]))i&&(i=!1),h=GENTICS.Aloha.Markup.transformDomObject(g[j],"li"),d.append(h);else{if(g[j].nodeType==3&&jQuery.trim(g[j].data
).length==0)continue;i||(i=jQuery("<li></li>"),d.append(i)),i.append(g[j])}}this.mergeAdjacentLists(d)}this.refreshSelection()},GENTICS.Aloha.ListPlugin.indentList=function(){var a=this.getNearestSelectedListItem();if(a){var b=jQuery(a).prev("li");if(b.length==0)return!1;var c=jQuery(a).parent(),d=GENTICS.Aloha.Selection.rangeObject.getSelectedSiblings(a),e=jQuery(a).parent().clone(!1).empty();e.append(a),b.append(e);if(d)for(var f=0;f<d.length;++f)e.append(jQuery(d[f]));return this.mergeAdjacentLists(e),this.refreshSelection(),!1}return!0},GENTICS.Aloha.ListPlugin.outdentList=function(){var a=this.getNearestSelectedListItem();if(a){var b=jQuery(a),c=b.parent(),d=c.parents("ul,ol"),e=c.parent("li");if(d.length>0&&GENTICS.Utils.Dom.isListElement(d.get(0))){var f=GENTICS.Aloha.Selection.rangeObject.getSelectedSiblings(a);if(f&&f.length>0)var g=jQuery(f[f.length-1]);else var g=b;if(g.nextAll("li").length>0){var h=c.clone(!1).empty();h.append(g.nextAll())}e.length>0?(typeof h!="undefined"&&b.append(h),e.after(b)):c.before(b);if(f&&f.length>0)for(var i=f.length-1;i>=0;--i)b.after(jQuery(f[i]));c.contents("li").length==0&&c.remove(),e.length>0&&e.contents().length==0&&e.remove(),this.refreshSelection()}return!1}return!0},GENTICS.Aloha.ListPlugin.refreshSelection=function(){GENTICS.Aloha.activeEditable&&GENTICS.Aloha.activeEditable.obj[0].focus(),GENTICS.Aloha.Selection.rangeObject.update(),GENTICS.Aloha.Selection.rangeObject.select(),GENTICS.Aloha.Selection.updateSelection()},GENTICS.Aloha.ListPlugin.mergeAdjacentLists=function(a){var b=a.get(0);while(b.previousSibling&&b.previousSibling.nodeType==1&&b.previousSibling.nodeName==b.nodeName)b=b.previousSibling;a=jQuery(b);while(b.nextSibling&&(b.nextSibling.nodeType==1&&b.nextSibling.nodeName==b.nodeName||b.nextSibling.nodeType==3&&jQuery.trim(b.nextSibling.data).length==0)){var c=jQuery(b.nextSibling);b.nextSibling.nodeType==1&&c.contents().appendTo(a),c.remove()}},GENTICS.Aloha.PastePlugin=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.Paste"),GENTICS.Aloha.PastePlugin.pasteHandlers=[],GENTICS.Aloha.PastePlugin.init=function(){var a=this;this.pasteDiv=jQuery('<div style="position:absolute; top:-100000px; left:-100000px"></div>'),this.pasteDiv.attr("contentEditable","true"),jQuery("body").append(this.pasteDiv),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableCreated",function(b,c){jQuery.browser.msie?c.obj.bind("beforepaste",function(b){a.redirectPaste(),b.stopPropagation()}):c.obj.bind("paste",function(b){a.redirectPaste(),window.setTimeout(function(){a.getPastedContent()},10),b.stopPropagation()})}),jQuery.browser.msie&&this.pasteDiv.bind("paste",function(b){window.setTimeout(function(){a.getPastedContent()},10)})},GENTICS.Aloha.PastePlugin.redirectPaste=function(){this.currentRange=new GENTICS.Utils.RangeObject(!0),this.currentEditable=GENTICS.Aloha.activeEditable,this.pasteDiv.text(""),this.currentEditable&&this.currentEditable.blur(),GENTICS.Utils.Dom.setCursorInto(this.pasteDiv.get(0)),this.pasteDiv.focus()},GENTICS.Aloha.PastePlugin.getPastedContent=function(){var a=this;for(var b=0;b<this.pasteHandlers.length;++b)this.pasteHandlers[b].handlePaste(this.pasteDiv);if(this.currentRange&&this.currentEditable){var c=this.pasteDiv.contents();for(var b=c.length-1;b>=0;--b)GENTICS.Utils.Dom.insertIntoDOM(jQuery(c.get(b)),a.currentRange,a.currentEditable.obj,!1);this.currentEditable.activate(),this.currentEditable.obj.focus(),c.length>0?GENTICS.Utils.Dom.setCursorAfter(c.get(c.length-1)):this.currentRange.select()}this.currentRange=!1,this.currentEditable=!1,this.pasteDiv.text("")},GENTICS.Aloha.PastePlugin.register=function(a){this.pasteHandlers.push(a)},GENTICS.Aloha.PastePlugin.PasteHandler=function(){GENTICS.Aloha.PastePlugin.register(this)},GENTICS.Aloha.PastePlugin.PasteHandler.prototype.handlePaste=function(a){},GENTICS.Aloha.PastePlugin.WordPasteHandler=new GENTICS.Aloha.PastePlugin.PasteHandler,GENTICS.Aloha.PastePlugin.WordPasteHandler.handlePaste=function(a){this.detectWordContent(a)&&this.transformWordContent(a)},GENTICS.Aloha.PastePlugin.WordPasteHandler.detectWordContent=function(a){var b=!1;return a.find("*").each(function(){var a=jQuery(this).attr("style");if(a&&a.toLowerCase().indexOf("mso")>=0)return b=!0,!1;var c=jQuery(this).attr("class");if(c&&c.toLowerCase().indexOf("mso")>=0)return b=!0,!1}),b},GENTICS.Aloha.PastePlugin.WordPasteHandler.isOrderedList=function(a){return a.css("fontFamily")=="Wingdings"||a.css("fontFamily")=="Symbol"?!1:a.text().match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)?!0:!1},GENTICS.Aloha.PastePlugin.WordPasteHandler.transformListsFromWord=function(a){var b=this,c="aloha-list-element",d="aloha-list-bullet",e="p.MsoListParagraphCxSpFirst,p.MsoListParagraph,p span",f=a.find(e);f.each(function(){var a=jQuery(this);a.hasClass("MsoListParagraphCxSpFirst")||a.hasClass("MsoListParagraph")?a.addClass(c):a.css("font-family").indexOf("Symbol")>=0?a.closest("p").addClass(c):a.css("mso-list")&&a.css("mso-list")!=""&&a.closest("p").addClass(c)}),e="p span span span";var g=a.find(e);g.each(function(){var a=jQuery(this),b=a.text().trim().replace(/&nbsp;/g,"");if(b.length==0){var e=a.parent().parent().text().trim().replace(/&nbsp;/g,"");e.match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)&&(a.closest("p").addClass(c),a.parent().parent().addClass(d))}}),e="p."+c;var h=":not("+e+")";f=a.find(e),f.length>0&&f.each(function(){var a=jQuery(this);a.removeClass(c),a.find("font").each(function(){jQuery(this).contents().unwrap()});var e=0,f=parseFloat(a.css("marginLeft")),g=[],i=a.nextUntil(h),j=jQuery(a.find("span."+d));j.length==0&&(j=jQuery(a.children("span:first")));var k=b.isOrderedList(j);j.remove();var l=jQuery(k?"<ol></ol>":"<ul></ul>");g.push(l);var m=jQuery("<li></li>");l.append(m),a.contents().appendTo(m),a.replaceWith(l),i.each(function(){var a=jQuery(this);a.find("font").each(function(){jQuery(this).contents().unwrap()});var c=parseFloat(a.css("marginLeft"));j=jQuery(a.find("span."+d)),j.length==0&&(j=jQuery(a.children("span:first"))),k=b.isOrderedList(j),j.remove();if(c>f){var h=jQuery(k?"<ol></ol>":"<ul></ul>");l.children(":last").append(h),l=h,g.push(l),e++,f=c}else c<f&&e>0&&(g.pop(),e--,l=g[e],f=c);m=jQuery("<li></li>"),l.append(m),a.contents().appendTo(m),a.remove()})})},GENTICS.Aloha.PastePlugin.WordPasteHandler.transformTitles=function(a){a.find("p.MsoTitle").each(function(){GENTICS.Aloha.Markup.transformDomObject(jQuery(this),"h1")}),a.find("p.MsoSubtitle").each(function(){GENTICS.Aloha.Markup.transformDomObject(jQuery(this),"h2")})},GENTICS.Aloha.PastePlugin.WordPasteHandler.transformTables=function(a){a.find("table").each(function(){jQuery(this).removeAttr("border").removeAttr("cellspacing").removeAttr("cellpadding")}),a.find("td").each(function(){jQuery(this).removeAttr("width").removeAttr("height").removeAttr("valign")})},GENTICS.Aloha.PastePlugin.WordPasteHandler.transformFormattings=function(a){a.find("strong,em,s,u").each(function(){this.nodeName.toLowerCase()=="strong"?GENTICS.Aloha.Markup.transformDomObject(jQuery(this),"b"):this.nodeName.toLowerCase()=="em"?GENTICS.Aloha.Markup.transformDomObject(jQuery(this),"i"):this.nodeName.toLowerCase()=="s"?GENTICS.Aloha.Markup.transformDomObject(jQuery(this),"del"):this.nodeName.toLowerCase()=="u"&&jQuery(this).contents().unwrap()})},GENTICS.Aloha.PastePlugin.WordPasteHandler.removeComments=function(a){a.contents().each(function(){this.nodeType==8&&jQuery(this).remove()})},GENTICS.Aloha.PastePlugin.WordPasteHandler.unwrapTags=function(a){a.find("span,font,div").each(function(){jQuery(this).contents().unwrap()})},GENTICS.Aloha.PastePlugin.WordPasteHandler.removeStyles=function(a){a.find("*").each(function(){jQuery(this).removeAttr("style").removeClass()})},GENTICS.Aloha.PastePlugin.WordPasteHandler.removeNamespacedElements=function(a){a.find("*").each(function(){var a=this.prefix?this.prefix:this.scopeName?this.scopeName:undefined;a&&a!="HTML"&&jQuery(this).remove()})},GENTICS.Aloha.PastePlugin.WordPasteHandler.transformWordContent=function(a){this.transformListsFromWord(a),this.transformTables(a),this.transformTitles(a),this.removeComments(a),this.unwrapTags(a),this.removeStyles(a),this.removeNamespacedElements(a),this.transformFormattings(a)},function(){function c(a){return a[a.length-1]}function d(a){return a[0]}function e(a){return a.slice(1)}function f(a,b){return g(a,function(a){return a===b})}function g(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c];return null}function h(a,b){var c=[];for(var d=0;d<a.length;d++)c.push(b(a[d]));return c}function i(a,b){h(a,b)}var a=GENTICS.Aloha.TOC||{jQuery:jQuery},b=a.jQuery,j="com.gentics.aloha.plugins.TOC",k=GENTICS.Aloha.TOC=new GENTICS.Aloha.Plugin(j);GENTICS.Aloha.TOC.languages=["en","de"];var l=null,m=[];k.init=function(){var a=k.settings;a.updateInterval=a.updateInterval||5e3,a.minEntries=a.minEntries||0,k.initButtons(),b(document).ready(function(){k.spawn()})},k.initButtons=function(){k.insertTocButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_ul",size:"small",onclick:function(){k.insertAtSelection(l)},tooltip:this.i18n("button.addtoc.tooltip"),toggle:!1}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.insertTocButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.insert"),1)},k.register=function(a){l=a},k.generateId=function(a){var c;typeof a=="object"?c=b(a).text().replace(/[^a-zA-Z-]+/g,"-").replace(/^[^a-zA-Z]+/,""):a&&(c=a);for(var d=0;;d++){var e=c;d&&(e+="-"+d);var f=document.getElementById(e);if(!f||typeof a=="object"&&f===a)return e}},k.outline=function(a){var c=[b()],d=[c];return k.headings(a).each(function(){var a=b(this),c=this.nodeName.toLowerCase(),e=["h6","h5","h4","h3","h2","h1"],h=b.inArray(c,e),i=e.slice(h).join(","),j=a.nextUntil(i).andSelf(),k=[j],l=g(d,function(c){var d=c[0];return!d.length||g(d,function(c){return a.get(0)===c||b.contains(c,a.get(0))})});l.push(k),d.splice(0,f(d,l),k)}),c},k.editableContainers=function(){return b(h(GENTICS.Aloha.editables,function(a){return document.getElementById(a.getId())}))},k.headings=function(a){return a.find(":header").add(a.filter(":header"))},k.anchorFromLinkId=function(a,c){return c?a.find('a[href $= "#'+c+'"]'):b()},k.linkIdFromAnchor=function(a){var b=a.attr("href");return b?b.match(/#(.*?)$/)[1]:null},k.insertAtSelection=function(a){a=a||k.editableContainers();var c=k.generateId("toc"),d=b("<ol class='toc_root'></ol>").attr("id",c).attr("contentEditable","false"),e=GENTICS.Aloha.Selection.getRangeObject(),f=GENTICS.Aloha.activeEditable,g=b(document.getElementById(f.getId()));GENTICS.Utils.Dom.insertIntoDOM(d,e,g),k.create(c).register(a).update().tickTock()},k.spawn=function(a,c){a=a||b("body"),c=c||k.editableContainers(),a.find("ol.toc_root").each(function(){var a=b(this).attr("id");a||(a=k.generateId("toc"),b(this).attr("id",a)),k.create(a).register(c).tickTock()})},k.create=function(a){return m.push(this),{id:a,$containers:b(),root:function(){return b(document.getElementById(this.id))},register:function(a){var c=this;return c.$containers=c.$containers.add(a),c.$containers.filter(function(){return!b(this).data(j+"."+c.id+".listening")}).each(function(){var a=b(this);a.data(j+"."+c.id+".listening",!0),a.bind("blur",function(){c.cleanupIds(a.get(0)),c.update(a)})}),c},tickTock:function(a){var b=this;a=a||k.settings.updateInterval;if(!a)return;return window.setInterval(function(){b.register(k.editableContainers()),b.update()},a),b},cleanupIds:function(a){var c=[];return k.headings(this.$containers).each(function(){var d=b(this).attr("id");(d&&-1!=b.inArray(d,c)||a&&(b.contains(a,this)||a===this))&&b(this).attr("id",k.generateId(this)),c.push(d)}),this},update:function(a){var b=this;a=a||b.$containers;var f=k.outline(b.$containers),g=[b.root()],h=[];c(g).empty(),function l(a){var c=[];i(a,function(a){var f=d(a),h=b.linkSection(f,g,c);g.push(h),l(e(a)),g.pop(),c.push(h)})}(e(f));var j=b.root().attr("data-TOC-minEntries")||k.settings.minEntries;return b.root().find("li").length>=j?b.root().show():b.root().hide(),this},linkSection:function(a,d,e){var f=a.eq(0).attr("id");f||(f=k.generateId(a.get(0)),a.eq(0).attr("id",f));var g=this.root(),h=k.anchorFromLinkId(g,f);h.length||(h=b("<li><a/></li>")),h.find("a").attr("href","#"+f).text(a.eq(0).text());if(c(e))c(e).after(h);else if(c(d).get(0)==g.get(0))g.append(h);else{var i=b("<ol/>").append(h);c(d).append(i)}return h}}}}(),GENTICS.Aloha.TablePlugin=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.Table"),GENTICS.Aloha.TablePlugin.createLayer=undefined,GENTICS.Aloha.TablePlugin.languages=["en","de","fr","eo","fi","ru","it","pl"],GENTICS.Aloha.TablePlugin.config=["table"],GENTICS.Aloha.TablePlugin.TableRegistry=[],GENTICS.Aloha.TablePlugin.activeTable=undefined,GENTICS.Aloha.TablePlugin.parameters={className:"GENTICS_Aloha_Table",classSelectionRow:"GENTICS_Aloha_Table_selectColumn",classSelectionColumn:"GENTICS_Aloha_Table_selectRow",classLeftUpperCorner:"GENTICS_Aloha_Table_leftUpperCorner",classTableWrapper:"GENTICS_Aloha_Table_wrapper",classCellSelected:"GENTICS_Aloha_Cell_selected",waiRed:"GENTICS_WAI_RED",waiGreen:"GENTICS_WAI_GREEN",selectionArea:10},GENTICS.Aloha.TablePlugin.init=function(){this.createLayer=new GENTICS.Aloha.Table.CreateLayer;var a=this;GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableCreated",function(b,c){c.obj.bind("mousedown",function(a){GENTICS.Aloha.TablePlugin.setFocusedTable(undefined)}),c.obj.find("table").each(function(){if(a.isEditableTable(this)){var b=new GENTICS.Aloha.Table(this);b.parentEditable=c,GENTICS.Aloha.TablePlugin.TableRegistry.push(b)}})}),this.initTableButtons(),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"selectionChanged",function(b,c){if(GENTICS.Aloha.activeEditable){var d=a.getEditableConfig(GENTICS.Aloha.activeEditable.obj);jQuery.inArray("table",d)!=-1&&GENTICS.Aloha.Selection.mayInsertTag("table")?a.createTableButton.show():a.createTableButton.hide(),GENTICS.Aloha.TableHelper.unselectCells();var e=c.findMarkup(function(){return this.nodeName.toLowerCase()=="table"},GENTICS.Aloha.activeEditable.obj);e?GENTICS.Aloha.FloatingMenu.setScope(a.getUID(GENTICS.Aloha.TableHelper.selectionType)):a.activeTable&&a.activeTable.focusOut(),GENTICS.Aloha.FloatingMenu.doLayout()}}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableActivated",function(b,c){c.editable.obj.find("table").each(function(){var b=GENTICS.Aloha.TablePlugin.TableRegistry;for(var d=0;d<b.length;d++)if(b[d].obj.attr("id")==jQuery(this).attr("id"))return b[d].activate(),!0;if(a.isEditableTable(this)){var e=new GENTICS.Aloha.Table(this);e.parentEditable=c.editable,e.activate(),GENTICS.Aloha.TablePlugin.TableRegistry.push(e)}})}),GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableDeactivated",function(a,b){GENTICS.Aloha.TablePlugin.setFocusedTable(undefined),GENTICS.Aloha.TableHelper.unselectCells();var c=GENTICS.Aloha.TablePlugin.TableRegistry;for(var d=0;d<c.length;d++)c[d].deactivate()})},GENTICS.Aloha.TablePlugin.isEditableTable=function(a){var b=jQuery(a.parentNode);return b.contentEditable()=="true"?!0:!1},GENTICS.Aloha.TablePlugin.initTableButtons=function(){var a=this;GENTICS.Aloha.FloatingMenu.createScope(this.getUID("row"),"GENTICS.Aloha.global"),GENTICS.Aloha.FloatingMenu.createScope(this.getUID("column"),"GENTICS.Aloha.global"),GENTICS.Aloha.FloatingMenu.createScope(this.getUID("cell"),"GENTICS.Aloha.continuoustext"),this.createTableButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_table",size:"small",tooltip:this.i18n("button.createtable.tooltip"),onclick:function(a,b){GENTICS.Aloha.TablePlugin.createDialog(a.btnEl.dom)}}),GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",this.createTableButton,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.insert"),1),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("column"),new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_addColumnLeft",size:"small",tooltip:this.i18n("button.addcolleft.tooltip"),onclick:function(){a.activeTable&&a.activeTable.addColumnsLeft()}}),GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("column"),new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_addColumnRight",size:"small",tooltip:this.i18n("button.addcolright.tooltip"),onclick:function(){a.activeTable&&a.activeTable.addColumnsRight()}}),GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("column"),new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_deleteColumns",size:"small",tooltip:this.i18n("button.delcols.tooltip"),onclick:function(){if(a.activeTable){var b=a.activeTable;GENTICS.Aloha.showMessage(new GENTICS.Aloha.Message({title:GENTICS.Aloha.i18n(a,"Table"),text:GENTICS.Aloha.i18n(a,"deletecolumns.confirm"),type:GENTICS.Aloha.Message.Type.CONFIRM,callback:function(a){a=="yes"&&b.deleteColumns()}}))}}}),GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("row"),new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_addRowBefore",size:"small",tooltip:this.i18n("button.addrowbefore.tooltip"),onclick:function(){a.activeTable&&a.activeTable.addRowsBefore(!0)}}),GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("row"),new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_addRowAfter",size:"small",tooltip:this.i18n("button.addrowafter.tooltip"),onclick:function(){a.activeTable&&a.activeTable.addRowsAfter(!0)}}),GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("row"),new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_deleteRows",size:"small",tooltip:this.i18n("button.delrows.tooltip"),onclick:function(){if(a.activeTable){var b=a.activeTable;GENTICS.Aloha.showMessage(new GENTICS.Aloha.Message({title:GENTICS.Aloha.i18n(a,"Table"),text:GENTICS.Aloha.i18n(a,"deleterows.confirm"),type:GENTICS.Aloha.Message.Type.CONFIRM,callback:function(a){a=="yes"&&b.deleteRows()}}))}}}),GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),this.captionButton=new GENTICS.Aloha.ui.Button({iconClass:"GENTICS_button GENTICS_button_table_caption",size:"small",tooltip:this.i18n("button.caption.tooltip"),toggle:!0,onclick:function(){if(a.activeTable)if(a.activeTable.obj.children("caption").is("caption"))a.activeTable.obj.children("caption").remove();else{var b=a.i18n("empty.caption"),c=jQuery("<caption></caption>");a.activeTable.obj.append(c),a.makeCaptionEditable(c,b);var d=c.find("div").eq(0),e=d.contents().eq(0);if(e.length>0){var f=new GENTICS.Utils.RangeObject;f.startContainer=f.endContainer=e.get(0),f.startOffset=0,f.endOffset=e.text().length,a.activeTable.obj.find("div.GENTICS_Table_Cell_editable").blur(),d.focus(),f.select(),GENTICS.Aloha.Selection.updateSelection()}}}}),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("cell"),this.captionButton,GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1),this.summary=new GENTICS.Aloha.ui.AttributeField({width:350}),this.summary.addListener("keyup",function(b,c){a.activeTable.checkWai()}),GENTICS.Aloha.FloatingMenu.addButton(this.getUID("cell"),this.summary,GENTICS.Aloha.i18n(this,"floatingmenu.tab.table"),1)},GENTICS.Aloha.TablePlugin.makeCaptionEditable=function(a,b){var c=this,d=a.children("div").eq(0);d.length==0&&(d=jQuery("<div></div>"),a.contents().length>0?a.contents().wrap(d):(b&&d.text(b),a.append(d))),d.contentEditable(!0),d.unbind("mousedown"),d.bind("mousedown",function(a){return d.focus(),a.preventDefault(),a.stopPropagation(),!1})},GENTICS.Aloha.TablePlugin.createDialog=function(a){this.createLayer.set("target",a),this.createLayer.show()},GENTICS.Aloha.TablePlugin.createTable=function(a,b){if(GENTICS.Aloha.activeEditable!=null&&typeof GENTICS.Aloha.activeEditable.obj!="undefined"){var c=document.createElement("table"),d=c.id=GENTICS.Aloha.TableHelper.getNewTableID(),e=document.createElement("tbody");for(var f=0;f<b;f++){var g=document.createElement("tr");for(var h=0;h<a;h++){var i=document.createTextNode("Â "),j=document.createElement("td");j.appendChild(i),g.appendChild(j)}e.appendChild(g)}c.appendChild(e),GENTICS.Utils.Dom.insertIntoDOM(jQuery(c),GENTICS.Aloha.Selection.getRangeObject(),jQuery(GENTICS.Aloha.activeEditable.obj));var k=document.getElementById(d),l=new GENTICS.Aloha.Table(k);l.parentEditable=GENTICS.Aloha.activeEditable,l.activate(),jQuery.browser.msie?window.setTimeout(function(){l.cells[0].wrapper.get(0).focus()},20):l.cells[0].wrapper.get(0).focus(),GENTICS.Aloha.TablePlugin.TableRegistry.push(l)}else this.error("There is no active Editable where the table can be inserted!")},GENTICS.Aloha.TablePlugin.setFocusedTable=function(a){var b=this;for(var c=0;c<GENTICS.Aloha.TablePlugin.TableRegistry.length;c++)GENTICS.Aloha.TablePlugin.TableRegistry[c].hasFocus=!1;if(typeof a!="undefined"){this.summary.setTargetObject(a.obj,"summary");if(a.obj.children("caption").is("caption")){b.captionButton.setPressed(!0);var d=a.obj.children("caption");b.makeCaptionEditable(d)}a.hasFocus=!0}GENTICS.Aloha.TablePlugin.activeTable=a},GENTICS.Aloha.TablePlugin.error=function(a){GENTICS.Aloha.Log.error(this,a)},GENTICS.Aloha.TablePlugin.debug=function(a){GENTICS.Aloha.Log.debug(this,a)},GENTICS.Aloha.TablePlugin.info=function(a){GENTICS.Aloha.Log.info(this,a)},GENTICS.Aloha.TablePlugin.log=function(a){GENTICS.Aloha.log("log",this,a)},GENTICS.Aloha.TablePlugin.get=function(a){return this.config[a]?this.config[a]:this.parameters[a]?this.parameters[a]:undefined},GENTICS.Aloha.TablePlugin.set=function(a,b){this.config[a]?this.config[a]=b:this.parameters[a]=b},GENTICS.Aloha.TablePlugin.makeClean=function(a){a.find("table").each(function(){var a=new GENTICS.Aloha.Table(this);a.deactivate()})},GENTICS.Aloha.TablePlugin.toString=function(){return this.prefix},GENTICS.Aloha.Table=function(a){this.obj=jQuery(a),this.obj.attr("id")||this.obj.attr("id",GENTICS.Utils.guid());var b=this.obj.find("tr"),c=jQuery(b.get(0));this.numCols=c.children("td, th").length,this.numRows=b.length,this.cells=[];var b=this.obj.find("tr");for(var d=0;d<b.length;d++){var e=jQuery(b[d]),f=e.children();for(var g=0;g<f.length;g++){var h=f[g],i=new GENTICS.Aloha.Table.Cell(h,this);this.cells.push(i)}}},GENTICS.Aloha.Table.prototype.obj=undefined,GENTICS.Aloha.Table.prototype.tableWrapper=undefined,GENTICS.Aloha.Table.prototype.cells=undefined,GENTICS.Aloha.Table.prototype.numRows=undefined,GENTICS.Aloha.Table.prototype.numCols=undefined,GENTICS.Aloha.Table.prototype.isActive=!1,GENTICS.Aloha.Table.prototype.hasFocus=!1,GENTICS.Aloha.Table.prototype.parentEditable=undefined,GENTICS.Aloha.Table.prototype.mousedown=!1,GENTICS.Aloha.Table.prototype.clickedColumnId=-1,GENTICS.Aloha.Table.prototype.clickedRowId=-1,GENTICS.Aloha.Table.prototype.columnsToSelect=[],GENTICS.Aloha.Table.prototype.rowsToSelect=[],GENTICS.Aloha.Table.prototype.fmPluginId=undefined,GENTICS.Aloha.Table.prototype.get=function(a){return GENTICS.Aloha.TablePlugin.get(a)},GENTICS.Aloha.Table.prototype.set=function(a,b){GENTICS.Aloha.TablePlugin.set(a,b)},GENTICS.Aloha.Table.prototype.activate=function(){if(this.isActive)return;var a=this;this.obj.addClass(this.get("className")),this.obj.contentEditable(!1),this.obj.attr("id")==""&&this.obj.attr("id",GENTICS.Aloha.TableHelper.getNewTableID()),GENTICS.Aloha.TableHelper.selectionType=undefined,this.obj.bind("keydown",function(a){!a.ctrlKey&&!a.shiftKey&&GENTICS.Aloha.TableHelper.selectedCells.length>0&&GENTICS.Aloha.TableHelper.selectedCells[0].length>0&&GENTICS.Aloha.TableHelper.selectedCells[0][0].firstChild.focus()}),this.obj.bind("mousedown",function(b){return a.hasFocus||a.focus(),b.stopPropagation(),b.preventDefault(),!1});var b=jQuery('<div class="'+this.get("classTableWrapper")+'"></div>');b.contentEditable(!1),this.obj.wrap(b);var c=this.obj.parents("."+this.get("classTableWrapper"));c.get(0).onresizestart=function(a){return!1},c.get(0).oncontrolselect=function(a){return!1},this.tableWrapper=this.obj.parents("."+this.get("classTableWrapper")).get(0),jQuery(this.cells).each(function(){this.activate()}),this.attachSelectionColumn(),this.attachSelectionRow(),this.attachLastCellEvents(),this.makeCaptionEditable(),this.checkWai(),this.isActive=!0,GENTICS.Aloha.EventRegistry.trigger(new GENTICS.Aloha.Event("tableActivated",GENTICS.Aloha,[this]))},GENTICS.Aloha.Table.prototype.makeCaptionEditable=function(){var a=this.obj.find("caption").eq(0);a&&GENTICS.Aloha.TablePlugin.makeCaptionEditable(a)},GENTICS.Aloha.Table.prototype.checkWai=function(){var a=this.wai;a.removeClass(this.get("waiGreen")),a.removeClass(this.get("waiRed")),this.obj[0].summary.length>5?a.addClass(this.get("waiGreen")):a.addClass(this.get("waiRed"))},GENTICS.Aloha.Table.prototype.attachSelectionColumn=function(){var a=jQuery("<td>");a.html("Â ");var b=this,c=this.obj.context.rows;for(var d=0;d<c.length;d++){var e=jQuery(c[d]),f=a.clone();f.addClass(this.get("classSelectionColumn")),f.css("width",this.get("selectionArea")+"px"),e.find("td:first").before(f);var g=d+1;this.attachRowSelectionEventsToCell(f)}},GENTICS.Aloha.Table.prototype.attachRowSelectionEventsToCell=function(a){var b=this;a.unbind("mousedown"),a.unbind("mouseover"),a.get(0).onselectstart=function(){return!1},a.bind("mousedown",function(a){return b.mousedown=!0,b.rowSelectionMouseDown(a)}),a.bind("mouseover",function(a){if(b.mousedown)return b.rowSelectionMouseOver(a)})},GENTICS.Aloha.Table.prototype.rowSelectionMouseDown=function(a){this.focus(),GENTICS.Aloha.TableHelper.selectedCells.length==0&&(this.rowsToSelect=[]),this.clickedRowId=a.currentTarget.parentNode.rowIndex;if(a.metaKey){var b=jQuery.inArray(this.clickedRowId,this.rowsToSelect);b>=0?this.rowsToSelect.splice(b,1):this.rowsToSelect.push(this.clickedRowId)}else if(a.shiftKey){this.rowsToSelect.sort(function(a,b){return a-b});var c=this.rowsToSelect[0],d=this.clickedRowId;c>d&&(c=d,d=this.rowsToSelect[0]),this.rowsToSelect=[];for(var e=c;e<=d;e++)this.rowsToSelect.push(e)}else this.rowsToSelect=[this.clickedRowId];return this.selectRows(),a.preventDefault(),a.stopPropagation(),!1},GENTICS.Aloha.Table.prototype.rowSelectionMouseOver=function(a){var b=a.currentTarget.parentNode.rowIndex;if(this.mousedown&&this.clickedRowId>=0){var c=jQuery.inArray(b,this.rowsToSelect),d=b<this.clickedRowId?b:this.clickedRowId,e=b<this.clickedRowId?this.clickedRowId:b;this.rowsToSelect=[];for(var f=d;f<=e;f++)this.rowsToSelect.push(f);return this.selectRows(),a.preventDefault(),a.stopPropagation(),!1}},GENTICS.Aloha.Table.prototype.attachSelectionRow=function(){var a=this,b=jQuery("<td>");b.html("Â ");var c=this.obj.context.rows[0].cells.length,d=jQuery("<tr>");d.addClass(this.get("classSelectionRow")),d.css("height",this.get("selectionArea")+"px");for(var e=0;e<c;e++){var f=b.clone();if(e>0)this.attachColumnSelectEventsToCell(f);else{var f=jQuery("<td>").clone();f.addClass(this.get("classLeftUpperCorner")),this.wai=jQuery("<div/>"),this.wai.width(25),this.wai.height(12),this.wai.click(function(b){return a.focus(),GENTICS.Aloha.FloatingMenu.userActivatedTab=GENTICS.Aloha.TablePlugin.i18n("floatingmenu.tab.table"),GENTICS.Aloha.FloatingMenu.doLayout(),GENTICS.Aloha.TablePlugin.summary.focus(),b.stopPropagation(),b.preventDefault(),!1}),f.append(this.wai)}d.append(f)}jQuery(document).bind("mouseup",function(b){a.mousedown=!1,a.clickedColumnId=-1,a.clickedRowId=-1}),this.obj.find("tr:first").before(d)},GENTICS.Aloha.Table.prototype.attachColumnSelectEventsToCell=function(a){var b=this;a.unbind("mousedown"),a.unbind("mouseover"),a.get(0).onselectstart=function(){return!1},a.bind("mousedown",function(a){b.mousedown=!0,b.columnSelectionMouseDown(a)}),a.bind("mouseover",function(a){b.mousedown&&b.columnSelectionMouseOver(a)})},GENTICS.Aloha.Table.prototype.columnSelectionMouseDown=function(a){this.focus(),GENTICS.Aloha.TableHelper.selectedCells.length==0&&(this.columnsToSelect=[]),this.clickedColumnId=a.currentTarget.cellIndex;if(a.metaKey){var b=jQuery.inArray(this.clickedColumnId,this.columnsToSelect);b>=0?this.columnsToSelect.splice(b,1):this.columnsToSelect.push(this.clickedColumnId)}else if(a.shiftKey){this.columnsToSelect.sort(function(a,b){return a-b});var c=this.columnsToSelect[0],d=this.clickedColumnId;c>d&&(c=d,d=this.columnsToSelect[0]),this.columnsToSelect=[];for(var e=c;e<=d;e++)this.columnsToSelect.push(e)}else this.columnsToSelect=[this.clickedColumnId];return this.selectColumns(),a.preventDefault(),a.stopPropagation(),!1},GENTICS.Aloha.Table.prototype.columnSelectionMouseOver=function(a){var b=a.currentTarget.cellIndex;if(this.mousedown&&this.clickedColumnId>0){var c=jQuery.inArray(b,this.columnsToSelect),d=b<this.clickedColumnId?b:this.clickedColumnId,e=b<this.clickedColumnId?this.clickedColumnId:b;this.columnsToSelect=[];for(var f=d;f<=e;f++)this.columnsToSelect.push(f);this.selectColumns()}},GENTICS.Aloha.Table.prototype.releaseLastCellEvents=function(){this.obj.find("tr:last td:last").unbind()},GENTICS.Aloha.Table.prototype.attachLastCellEvents=function(){var a=this;this.obj.find("tr:last td:last").bind("keydown",function(b){a.lastCellKeyDown(b)})},GENTICS.Aloha.Table.prototype.lastCellKeyDown=function(a){var b=9;if(b==a.keyCode&&!a.altKey&&!a.shiftKey&&!a.ctrlKey){this.addRowsAfter(!1),a.stopPropagation();if(jQuery.browser.msie)return this.obj.find("tr:last td:nth-child(1) div.GENTICS_Table_Cell_editable").get(0).focus(),!1}},GENTICS.Aloha.Table.prototype.deleteRows=function(){var a=[],b=!1;if(GENTICS.Aloha.TableHelper.selectedCells.length>0)for(var c=0;c<GENTICS.Aloha.TableHelper.selectedCells.length;c++)a.push(GENTICS.Aloha.TableHelper.selectedCells[c][0].parentNode.rowIndex);else typeof GENTICS.Aloha.Table.Cell.lastActiveCell!="undefined"&&a.push(GENTICS.Aloha.Table.Cell.lastActiveCell.obj.context.parentNode.rowIndex);a.length==this.numRows&&(b=!0);if(b){var d=this;GENTICS.Aloha.showMessage(new GENTICS.Aloha.Message({title:GENTICS.Aloha.i18n(GENTICS.Aloha.TablePlugin,"Table"),text:GENTICS.Aloha.i18n(GENTICS.Aloha.TablePlugin,"deletetable.confirm"),type:GENTICS.Aloha.Message.Type.CONFIRM,callback:function(a){a=="yes"&&d.deleteTable()}}))}else{a.sort(function(a,b){return a-b});var e=a[0];e>this.numRows-a.length&&e--,this.releaseLastCellEvents();var f=this.obj.find("tr"),g=[];for(var c=0;c<a.length;c++)g.push(jQuery(f[a[c]]));for(var c=0;c<g.length;c++){var h=g[c].children("td").toArray();for(var i=0;i<h.length;i++)for(var j=0;j<this.cells.length;j++)h[i]==this.cells[j].obj.get(0)&&(this.cells.splice(j,1),j=this.cells.length)}for(var c=0;c<g.length;c++)g[c].remove();this.numRows-=g.length,jQuery.browser.msie?setTimeout(this.obj.find("tr:nth-child("+(e+1)+") td:nth-child(2) div.GENTICS_Table_Cell_editable").get(0).focus,5):this.obj.find("tr:nth-child("+(e+1)+") td:nth-child(2) div.GENTICS_Table_Cell_editable").get(0).focus(),this.attachLastCellEvents(),GENTICS.Aloha.TableHelper.unselectCells()}},GENTICS.Aloha.Table.prototype.deleteColumns=function(){var a=[],b=!1;if(GENTICS.Aloha.TableHelper.selectedCells.length>0)for(var c=0;c<GENTICS.Aloha.TableHelper.selectedCells[0].length;c++)a.push(GENTICS.Aloha.TableHelper.selectedCells[0][c].cellIndex);else typeof GENTICS.Aloha.Table.Cell.lastActiveCell!="undefined"&&a.push(GENTICS.Aloha.Table.Cell.lastActiveCell.obj.context.cellIndex);a.length==this.numCols&&(b=!0);if(b){var d=this;GENTICS.Aloha.showMessage(new GENTICS.Aloha.Message({title:GENTICS.Aloha.i18n(GENTICS.Aloha.TablePlugin,"Table"),text:GENTICS.Aloha.i18n(GENTICS.Aloha.TablePlugin,"deletetable.confirm"),type:GENTICS.Aloha.Message.Type.CONFIRM,callback:function(a){a=="yes"&&d.deleteTable()}}))}else{a.sort(function(a,b){return a-b});var e=a[0];e>this.numCols-a.length&&e--,this.releaseLastCellEvents();var f=this.obj.find("tr"),g=[];for(var c=0;c<f.length;c++){var h=jQuery(f[c]).children("td").toArray();for(var i=0;i<a.length;i++)g.push(h[a[i]])}for(var c=0;c<g.length;c++)for(var i=0;i<this.cells.length;i++)g[c]==this.cells[i].obj.get(0)&&(this.cells.splice(i,1),i=this.cells.length);for(var c=0;c<g.length;c++)jQuery(g[c]).remove();this.numCols-=a.length,jQuery.browser.msie?setTimeout(this.obj.find("tr:nth-child(2) td:nth-child("+(e+1)+") div.GENTICS_Table_Cell_editable").get(0).focus,5):this.obj.find("tr:nth-child(2) td:nth-child("+(e+1)+") div.GENTICS_Table_Cell_editable").get(0).focus(),this.attachLastCellEvents(),GENTICS.Aloha.TableHelper.unselectCells()}},GENTICS.Aloha.Table.prototype.deleteTable=function(){var a=-1;for(var b=0;b<GENTICS.Aloha.TablePlugin.TableRegistry.length;b++)if(GENTICS.Aloha.TablePlugin.TableRegistry[b].obj.
attr("id")==this.obj.attr("id")){a=b;break}if(a>=0){this.deactivate(),GENTICS.Aloha.TableHelper.selectionType=undefined,GENTICS.Aloha.TablePlugin.TableRegistry.splice(b,1);var c=GENTICS.Aloha.Selection.rangeObject;c.startContainer=c.endContainer=this.obj.get(0).parentNode,c.startOffset=c.endOffset=GENTICS.Utils.Dom.getIndexInParent(this.obj.get(0).parentNode),c.clearCaches(),this.obj.remove(),this.parentEditable.obj.focus(),c.correctRange(),c.select()}},GENTICS.Aloha.Table.prototype.addRowsBefore=function(a){this.addRows("before",a)},GENTICS.Aloha.Table.prototype.addRowsAfter=function(a){this.addRows("after",a)},GENTICS.Aloha.Table.prototype.addRows=function(a,b){if(typeof GENTICS.Aloha.TablePlugin.activeTable!="undefined"){this.releaseLastCellEvents();var c=this,d=this.numCols,e=1,f=1;if(GENTICS.Aloha.TableHelper.selectedCells.length>0){e=GENTICS.Aloha.TableHelper.selectedCells.length;switch(a){case"before":GENTICS.Aloha.TableHelper.selectedCells[0].length&&(f=GENTICS.Aloha.TableHelper.selectedCells[0][0].parentNode.rowIndex);break;case"after":var g=GENTICS.Aloha.TableHelper.selectedCells.length-1;GENTICS.Aloha.TableHelper.selectedCells[g].length&&(f=GENTICS.Aloha.TableHelper.selectedCells[g][0].parentNode.rowIndex)}}else typeof GENTICS.Aloha.Table.Cell.lastActiveCell!="undefined"&&(f=GENTICS.Aloha.Table.Cell.lastActiveCell.obj.context.parentNode.rowIndex);var h=f;a=="after"&&(h+=1);var j=[];for(var k=0;k<e;k++){j.push(h);var l=jQuery("<tr>"),m=jQuery("<td>");m.addClass(this.get("classSelectionColumn")),this.attachRowSelectionEventsToCell(m),l.append(m);for(i=0;i<d;i++){var n=jQuery("<td>");n.html("Â ");var o=new GENTICS.Aloha.Table.Cell(n.get(0),GENTICS.Aloha.TablePlugin.activeTable);o.activate(),this.cells.push(o),l.append(o.obj)}var p=jQuery(GENTICS.Aloha.TablePlugin.activeTable.obj.find("tr").get(f));switch(a){case"before":p.before(l);break;case"after":p.after(l);break;default:this.warn(this,"Wrong call of GENTICS.Aloha.Table.prototype.addRow!")}h++,this.numRows++}GENTICS.Aloha.TableHelper.unselectCells(),this.rowsToSelect=j,b&&this.selectRows(),this.attachLastCellEvents()}},GENTICS.Aloha.Table.prototype.addColumnsRight=function(){this.addColumns("right")},GENTICS.Aloha.Table.prototype.addColumnsLeft=function(){this.addColumns("left")},GENTICS.Aloha.Table.prototype.addColumns=function(a){if(typeof GENTICS.Aloha.TablePlugin.activeTable!="undefined"){this.releaseLastCellEvents();var b=this,c=1,d=1;if(GENTICS.Aloha.TableHelper.selectedCells.length>0){c=GENTICS.Aloha.TableHelper.selectedCells[0].length;switch(a){case"left":GENTICS.Aloha.TableHelper.selectedCells[0].length&&(d=GENTICS.Aloha.TableHelper.selectedCells[0][0].cellIndex);break;case"right":var e=GENTICS.Aloha.TableHelper.selectedCells[0].length-1;GENTICS.Aloha.TableHelper.selectedCells[0].length&&(d=GENTICS.Aloha.TableHelper.selectedCells[0][e].cellIndex)}}else typeof GENTICS.Aloha.Table.Cell.lastActiveCell!="undefined"&&(d=GENTICS.Aloha.Table.Cell.lastActiveCell.obj.context.cellIndex);var f=d,g=jQuery("<td>"),h=this.obj.find("tr"),i=[];for(var j=0;j<h.length;j++){var k=f,l=h[j];for(var m=0;m<c;m++){var n=g.clone();n.html("Â "),j==0?this.attachColumnSelectEventsToCell(n):(cellObj=new GENTICS.Aloha.Table.Cell(n.get(0),GENTICS.Aloha.TablePlugin.activeTable),this.cells.push(cellObj),cellObj.activate(),n=cellObj.obj);var o=jQuery(jQuery(l).find("td").get(f));switch(a){case"left":jQuery.inArray(k,i)<0&&i.push(k),o.before(n);break;case"right":jQuery.inArray(k+1,i)<0&&i.push(k+1),o.after(n)}k++}}this.numCols+=c,GENTICS.Aloha.TableHelper.unselectCells(),this.columnsToSelect=i,this.selectColumns(),this.attachLastCellEvents()}},GENTICS.Aloha.Table.prototype.focus=function(){this.hasFocus||(this.parentEditable.isActive||this.parentEditable.obj.focus(),GENTICS.Aloha.TablePlugin.setFocusedTable(this))},GENTICS.Aloha.Table.prototype.focusOut=function(){this.hasFocus&&(GENTICS.Aloha.TablePlugin.setFocusedTable(undefined),GENTICS.Aloha.TableHelper.selectionType=undefined)},GENTICS.Aloha.Table.prototype.selectColumns=function(){var a=this.get("classCellSelected");GENTICS.Aloha.TableHelper.unselectCells(),GENTICS.Aloha.TableHelper.selectionType="column",GENTICS.Aloha.FloatingMenu.setScope(GENTICS.Aloha.TablePlugin.getUID("column")),this.columnsToSelect.sort(function(a,b){return a-b});var b=this.obj.find("tr").toArray();b.shift();var c=[];for(var d=0;d<b.length;d++){var e=b[d].cells,f=[];for(var g=0;g<this.columnsToSelect.length;g++){var h=this.columnsToSelect[g],i=e[h];c.push(i),f.push(i)}GENTICS.Aloha.TableHelper.selectedCells.push(f)}this.obj.find("div.GENTICS_Table_Cell_editable").blur(),jQuery(c).addClass(a)},GENTICS.Aloha.Table.prototype.selectRows=function(){var a=this.get("classCellSelected");GENTICS.Aloha.TableHelper.unselectCells(),this.rowsToSelect.sort(function(a,b){return a-b});for(var b=0;b<this.rowsToSelect.length;b++){var c=this.rowsToSelect[b],d=jQuery(this.obj.find("tr").get(c).cells).toArray();d.shift(),GENTICS.Aloha.TableHelper.selectedCells.push(d),jQuery(d).addClass(this.get("classCellSelected"))}GENTICS.Aloha.TableHelper.selectionType="row",GENTICS.Aloha.FloatingMenu.setScope(GENTICS.Aloha.TablePlugin.getUID("row")),this.obj.find("div.GENTICS_Table_Cell_editable").blur()},GENTICS.Aloha.Table.prototype.deactivate=function(){this.obj.removeClass(this.get("className")),GENTICS.Aloha.trim(this.obj.attr("class"))==""&&this.obj.removeAttr("class"),this.obj.parents("."+this.get("classTableWrapper")).length&&this.obj.unwrap(),this.obj.find("tr."+this.get("classSelectionRow")+":first").remove();var a=this;jQuery.each(this.obj.context.rows,function(){jQuery(this).children("td."+a.get("classSelectionColumn")).remove()}),this.obj.find("td, th").removeClass(this.get("classCellSelected")),this.obj.unbind();for(var b=0;b<this.cells.length;b++){var c=this.cells[b];c.deactivate()}this.obj.find("caption div").each(function(){jQuery(this).contents().unwrap()}),this.isActive=!1},GENTICS.Aloha.Table.prototype.toString=function(){return"GENTICS.Aloha.Table"},GENTICS.Aloha.Table.Cell=function(a,b){this.obj=jQuery(a),this.tableObj=b},GENTICS.Aloha.Table.Cell.prototype.tableObj=undefined,GENTICS.Aloha.Table.Cell.prototype.obj=undefined,GENTICS.Aloha.Table.Cell.prototype.wrapper=undefined,GENTICS.Aloha.Table.Cell.prototype.hasFocus=!1,GENTICS.Aloha.Table.Cell.activeCell=undefined,GENTICS.Aloha.Table.Cell.lastActiveCell=undefined,GENTICS.Aloha.Table.Cell.prototype.editableFocus=function(a){this.hasFocus||(this.tableObj.focus(),GENTICS.Aloha.Table.Cell.activeCell=this,GENTICS.Aloha.Table.Cell.lastActiveCell=this,this.obj.addClass("GENTICS_Table_Cell_active"),this.hasFocus=!0,this.selectAll(this.wrapper.get(0)),GENTICS.Aloha.TableHelper.selectionType="cell")},GENTICS.Aloha.Table.Cell.prototype.editableBlur=function(a){GENTICS.Aloha.Table.Cell.activeCell=undefined,this.hasFocus=!1,this.obj.removeClass("GENTICS_Table_Cell_active")},GENTICS.Aloha.Table.Cell.prototype.activate=function(){this.obj.wrapInner("<div/>");var a=this.obj.children("div").eq(0);a.contentEditable(!0),a.addClass("GENTICS_Table_Cell_editable");var b=this;return a.bind("focus",function(a){a.currentTarget&&(a.currentTarget.indexOf=function(){return-1}),b.editableFocus(a)}),a.bind("mousedown",function(a){a.currentTarget&&(a.currentTarget.indexOf=function(){return-1}),b.editableMouseDown(a)}),a.bind("blur",function(a){b.editableBlur(a)}),a.bind("keyup",function(a){b.editableKeyUp(a)}),a.bind("keydown",function(a){b.editableKeyDown(a)}),a.GENTICS_contentEditableSelectionChange(function(b){return GENTICS.Aloha.Selection.onChange(a,b),a}),this.obj.bind("mousedown",function(a){setTimeout(function(){b.wrapper.trigger("focus")},1),GENTICS.Aloha.TableHelper.unselectCells(),a.stopPropagation()}),this.obj.get(0).onselectstart=function(a){return!1},this.wrapper=this.obj.children(),this.wrapper.get(0).onselectstart=function(){window.event.cancelBubble=!0},this},GENTICS.Aloha.Table.Cell.prototype.deactivate=function(){var a=this.obj.children(".GENTICS_Table_Cell_editable");a.length&&(a.contents().unwrap(),a.unbind(),a.remove(),this.obj.unbind("click"),GENTICS.Aloha.trim(this.obj.attr("class"))==""&&this.obj.removeAttr("class"))},GENTICS.Aloha.Table.Cell.prototype.toString=function(){return"GENTICS.Aloha.Table.Cell"},GENTICS.Aloha.Table.Cell.prototype.selectAll=function(a){var b=a.jquery?a.get(0):a;if(!jQuery.browser.msie){var c=window.getSelection();if(c.setBaseAndExtent)c.setBaseAndExtent(b,0,b,b.innerText.length-1);else{window.opera&&b.innerHTML.substring(b.innerHTML.length-4)=="<BR>"&&(b.innerHTML=b.innerHTML+"&#160;");var d=document.createRange();d.selectNodeContents(b),c.removeAllRanges(),c.addRange(d)}}else if(document.getSelection){var c=document.getSelection(),d=document.createRange();d.selectNodeContents(b),c.removeAllRanges(),c.addRange(d)}else if(document.selection){var d=document.body.createTextRange();d.moveToElementText(b),d.select()}GENTICS.Aloha.Selection.updateSelection(a)},GENTICS.Aloha.Table.Cell.prototype.editableMouseDown=function(a){GENTICS.Aloha.TableHelper.unselectCells(),this.tableObj.hasFocus&&a.stopPropagation()},GENTICS.Aloha.Table.Cell.prototype.editableKeyUp=function(a){this.checkForEmptyEvent(a)},GENTICS.Aloha.Table.Cell.prototype.editableKeyDown=function(a){this.checkForEmptyEvent(a);if(!a.ctrlKey&&!a.shiftKey)GENTICS.Aloha.TableHelper.selectedCells.length>0&&GENTICS.Aloha.TableHelper.selectedCells[0].length>0&&(GENTICS.Aloha.TableHelper.selectedCells[0][0].firstChild.focus(),GENTICS.Aloha.TableHelper.unselectCells(),a.stopPropagation());else if(a.shiftKey&&GENTICS.Aloha.TableHelper.selectedCells.length>0){var b=37,c=38,d=39,e=40;switch(GENTICS.Aloha.TableHelper.selectionType){case"row":switch(a.keyCode){case c:var f=GENTICS.Aloha.TableHelper.selectedCells[0][0].parentNode.rowIndex;f>1&&this.tableObj.rowsToSelect.push(f-1);break;case e:var g=GENTICS.Aloha.TableHelper.selectedCells.length-1,h=GENTICS.Aloha.TableHelper.selectedCells[g][0].parentNode.rowIndex;h<this.tableObj.numRows&&this.tableObj.rowsToSelect.push(h+1)}this.tableObj.selectRows();break;case"column":switch(a.keyCode){case b:var i=GENTICS.Aloha.TableHelper.selectedCells[0][0].cellIndex;i>1&&this.tableObj.columnsToSelect.push(i-1);break;case d:var j=GENTICS.Aloha.TableHelper.selectedCells[0].length-1,k=GENTICS.Aloha.TableHelper.selectedCells[0][j].cellIndex;k<this.tableObj.numCols&&this.tableObj.columnsToSelect.push(k+1)}this.tableObj.selectColumns()}return a.stopPropagation(),a.preventDefault(),!1}},GENTICS.Aloha.Table.Cell.prototype.checkForEmptyEvent=function(a){if(jQuery(this.wrapper).children().length>0)return;var b=this.wrapper.text();b==""&&(this.wrapper.text("Â "),this.wrapper.get(0).blur(),this.wrapper.get(0).focus())},GENTICS.Aloha.Table.CreateLayer=function(){},GENTICS.Aloha.Table.CreateLayer.prototype.parameters={elemId:"GENTICS_Aloha_Table_createLayer",className:"GENTICS_Table_Createdialog",numX:10,numY:10,layer:undefined,target:undefined},GENTICS.Aloha.Table.CreateLayer.prototype.config=new Object,GENTICS.Aloha.Table.CreateLayer.prototype.visible=!1,GENTICS.Aloha.Table.CreateLayer.prototype.show=function(){var a=this.get("layer");a==null?this.create():(this.setPosition(a),a.find("td").removeClass("hover"),a.show()),this.visible=!0},GENTICS.Aloha.Table.CreateLayer.prototype.create=function(){var a=this,b=jQuery("<div></div>");b.id=this.get("elemId"),b.addClass(this.get("className"));var c=jQuery("<table></table>");c.css("width",(this.get("numX")+6)*15);var d,e;for(var f=0;f<this.get("numY");f++){d=jQuery("<tr></tr>");for(var g=0;g<this.get("numX");g++)e=jQuery("<td>Â </td>"),f==0&&g==0&&e.addClass("hover"),e.bind("mouseover",{rowId:f,colId:g},function(b){a.handleMouseOver(b,c)}),e.bind("click",{rowId:f,colId:g},function(b){var c=b.data.rowId+1,d=b.data.colId+1;GENTICS.Aloha.TablePlugin.createTable(d,c),a.hide()}),d.append(e);c.append(d)}b.append(c),this.set("layer",b),this.setPosition(),b.bind("click",function(a){a.stopPropagation()}).mousedown(function(a){a.stopPropagation()}),jQuery("body").append(b).bind("click",function(b){b.target!=a.get("target")&&a.visible&&a.hide()})},GENTICS.Aloha.Table.CreateLayer.prototype.handleMouseOver=function(a,b){var c=a.data.rowId,d=a.data.colId,e=b.find("tr");for(var f=0;f<=e.length;f++){var g=jQuery(e[f]).find("td");for(var h=0;h<=g.length;h++)f<=c&&h<=d?jQuery(g[h]).addClass("hover"):jQuery(g[h]).removeClass("hover")}},GENTICS.Aloha.Table.CreateLayer.prototype.setPosition=function(){var a=jQuery(this.get("target")),b=a.offset();this.get("layer").css("left",b.left+"px"),this.get("layer").css("top",b.top+a.height()+"px")},GENTICS.Aloha.Table.CreateLayer.prototype.hide=function(){this.get("layer").hide(),this.visible=!1},GENTICS.Aloha.Table.CreateLayer.prototype.get=function(a){return this.config[a]?this.config[a]:this.parameters[a]?this.parameters[a]:undefined},GENTICS.Aloha.Table.CreateLayer.prototype.set=function(a,b){this.config[a]?this.config[a]=b:this.parameters[a]=b},GENTICS.Aloha.TableHelper=function(){},GENTICS.Aloha.TableHelper.prototype.selectionType=undefined,GENTICS.Aloha.TableHelper.prototype.selectedCells=[],GENTICS.Aloha.TableHelper.prototype.unselectCells=function(){if(this.selectedCells.length>0){for(var a=0;a<this.selectedCells.length;a++)jQuery(this.selectedCells[a]).removeClass(GENTICS.Aloha.TablePlugin.get("classCellSelected"));this.selectedCells=[],this.selectionType=undefined}},GENTICS.Aloha.TableHelper.prototype.getNewTableID=function(){var a="GENTICS_Table_",b=1e6;for(this.tableCounter;!0;this.tableCounter++){var c=a+Math.ceil(Math.random()*b);for(var d=c.length;d<a.length+b.toString().length;d++)c+="0";if(!jQuery("#"+c).length)return c}},GENTICS.Aloha.TableHelper=new GENTICS.Aloha.TableHelper;if(typeof GENTICS=="undefined"||!GENTICS)var GENTICS={};if(typeof GENTICS.Utils=="undefined"||!GENTICS.Utils)GENTICS.Utils={};if(typeof GENTICS.Utils.Dom=="undefined"||!GENTICS.Utils.Dom)GENTICS.Utils.Dom=function(){};GENTICS.Utils.Dom.prototype.mergeableTags=["a","b","code","del","em","i","ins","strong","sub","sup","#text"],GENTICS.Utils.Dom.prototype.nonWordBoundaryTags=["a","b","code","del","em","i","ins","span","strong","sub","sup","#text"],GENTICS.Utils.Dom.prototype.nonEmptyTags=["br"],GENTICS.Utils.Dom.prototype.tags={flow:["a","abbr","address","area","article","aside","audio","b","bdo","blockquote","br","button","canvas","cite","code","command","datalist","del","details","dfn","div","dl","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","menu","meter","nav","noscript","object","ol","output","p","pre","progress","q","ruby","samp","script","section","select","small","span","strong","style","sub","sup","svg","table","textarea","time","ul","var","video","wbr","#text"],phrasing:["a","abbr","area","audio","b","bdo","br","button","canvas","cite","code","command","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","samp","script","select","small","span","strong","sub","sup","svg","textarea","time","var","video","wbr","#text"]},GENTICS.Utils.Dom.prototype.children={a:"phrasing",abbr:"phrasing",address:"flow",area:"empty",article:"flow",aside:"flow",audio:"source",b:"phrasing",base:"empty",bdo:"phrasing",blockquote:"flow",body:"flow",br:"empty",button:"phrasing",canvas:"phrasing",caption:"flow",cite:"phrasing",code:"phrasing",col:"empty",colgroup:"col",command:"empty",datalist:["phrasing","option"],dd:"flow",del:"phrasing",div:"flow",details:["summary","flow"],dfn:"flow",div:"flow",dl:["dt","dd"],dt:"phrasing",em:"phrasing",embed:"empty",fieldset:["legend","flow"],figcaption:"flow",figure:["figcaption","flow"],footer:"flow",form:"flow",h1:"phrasing",h2:"phrasing",h3:"phrasing",h4:"phrasing",h5:"phrasing",h6:"phrasing",header:"flow",hgroup:["h1","h2","h3","h4","h5","h6"],hr:"empty",i:"phrasing",iframe:"#text",img:"empty",input:"empty",ins:"phrasing",kbd:"phrasing",keygen:"empty",label:"phrasing",legend:"phrasing",li:"flow",link:"empty",map:"area",mark:"phrasing",menu:["li","flow"],meta:"empty",meter:"phrasing",nav:"flow",noscript:"phrasing",object:"param",ol:"li",optgroup:"option",option:"#text",output:"phrasing",p:"phrasing",param:"empty",pre:"phrasing",progress:"phrasing",q:"phrasing",rp:"phrasing",rt:"phrasing",ruby:["phrasing","rt","rp"],s:"phrasing",samp:"pharsing",script:"#script",section:"flow",select:["option","optgroup"],small:"phrasing",source:"empty",span:"phrasing",strong:"phrasing",style:"phrasing",sub:"phrasing",summary:"phrasing",sup:"phrasing",table:["caption","colgroup","thead","tbody","tfoot","tr"],tbody:"tr",td:"flow",textarea:"#text",tfoot:"tr",th:"phrasing",thead:"tr",time:"phrasing",title:"#text",tr:["th","td"],track:"empty",ul:"li","var":"phrasing",video:"source",wbr:"empty"},GENTICS.Utils.Dom.prototype.blockLevelElements=["p","h1","h2","h3","h4","h5","h6","blockquote","div","pre"],GENTICS.Utils.Dom.prototype.listElements=["li","ol","ul"],GENTICS.Utils.Dom.prototype.split=function(a,b,c){var d=jQuery(a.startContainer),e=a.startOffset;c&&(d=jQuery(a.endContainer),e=a.endOffset),b.length<1&&(b=jQuery(document.body));var f=!a.isCollapsed()&&!c,g,h=d.parents().get();h.unshift(d.get(0)),jQuery.each(h,function(a,c){var d=b.filter(function(){return this==c}).length;if(d)return a>0&&(g=h.slice(0,a)),!1});if(!g)return!0;g=g.reverse();var i,j;for(var k=0;k<g.length;k++){var l=g[k];if(k===g.length-1){var m;if(l.nodeType===3)m=document.createTextNode(l.data.substring(e,l.data.length)),l.data=l.data.substring(0,e);else{var n=jQuery(l).clone(!1).empty(),o=jQuery(l).contents();m=n.append(o.slice(e,o.length)).get(0)}f&&a.endContainer===l&&(a.endContainer=m,a.endOffset-=e,a.clearCaches()),j?j.prepend(m):jQuery(l).after(m)}else{var n=jQuery(l).clone(!1).empty();i?(j.prepend(n),j=n):(i=n,j=n);var p;while(p=g[k+1].nextSibling)j.append(p);if(f&&a.endContainer===l){a.endContainer=n.get(0);var q=g[k+1],r=0;while(q=q.previousSibling)r++;a.endOffset-=r,a.clearCaches()}}}return jQuery(g[0]).after(i),jQuery([g[0],i?i.get(0):m])},GENTICS.Utils.Dom.prototype.allowsNesting=function(a,b){if(!a||!a.nodeName||!b||!b.nodeName)return!1;var c=a.nodeName.toLowerCase(),d=b.nodeName.toLowerCase();return this.children[c]?this.children[c]==d?!0:jQuery.isArray(this.children[c])&&jQuery.inArray(d,this.children[c])>=0?!0:jQuery.isArray(this.tags[this.children[c]])&&jQuery.inArray(d,this.tags[this.children[c]])>=0?!0:!1:!1},GENTICS.Utils.Dom.prototype.addMarkup=function(a,b,c){a.startContainer.nodeType==3&&a.startOffset>0&&a.startOffset<a.startContainer.data.length&&this.split(a,jQuery(a.startContainer).parent(),!1),a.endContainer.nodeType==3&&a.endOffset>0&&a.endOffset<a.endContainer.data.length&&this.split(a,jQuery(a.endContainer).parent(),!0);var d=a.getRangeTree();this.recursiveAddMarkup(d,b,a,c),this.doCleanup({merge:!0,removeempty:!0},a)},GENTICS.Utils.Dom.prototype.recursiveAddMarkup=function(a,b,c,d){for(var e=0;e<a.length;++e)if(a[e].type=="full"&&this.allowsNesting(b.get(0),a[e].domobj)){if((d||a[e].domobj.nodeName!=b.get(0).nodeName)&&(a[e].domobj.nodeType!=3||jQuery.trim(a[e].domobj.data).length!=0)){jQuery(a[e].domobj).wrap(b);if(!d&&a[e].domobj.nodeType!=3){var f=new GENTICS.Utils.RangeObject;f.startContainer=f.endContainer=a[e].domobj.parentNode,f.startOffset=0,f.endOffset=f.endContainer.childNodes.length,this.removeMarkup(f,b,jQuery(a[e].domobj.parentNode))}}}else(d||a[e].domobj.nodeName!=b.get(0).nodeName)&&a[e].children&&a[e].children.length>0&&this.recursiveAddMarkup(a[e].children,b)},GENTICS.Utils.Dom.prototype.findHighestElement=function(a,b,c){var d=a;b=b.toLowerCase();var e=c?function(){return c.filter(function(){return d==this}).length}:function(){return!1},f=undefined;while(!e()&&d)d.nodeName.toLowerCase()==b&&(f=d),d=d.parentNode;return f},GENTICS.Utils.Dom.prototype.removeMarkup=function(a,b,c){var d=b.get(0).nodeName,e=this.findHighestElement(a.startContainer,d,c),f=this.findHighestElement(a.endContainer,d,c),g=!1;e&&a.startOffset>0&&(this.split(a,jQuery(e).parent(),!1),g=!0),f&&(a.endContainer.nodeType==3&&a.endOffset<a.endContainer.data.length&&(this.split(a,jQuery(f).parent(),!0),g=!0),a.endContainer.nodeType==1&&a.endOffset<a.childNodes.length&&(this.split(a,jQuery(f).parent(),!0),g=!0)),g&&a.correctRange();var h=this.findHighestElement(a.getCommonAncestorContainer(),d,c),i=h?h.parentNode:undefined,j=a.getRangeTree(i);this.recursiveRemoveMarkup(j,b),this.doCleanup({merge:!0,removeempty:!0},a,i)},GENTICS.Utils.Dom.prototype.recursiveRemoveMarkup=function(a,b){for(var c=0;c<a.length;++c){if(a[c].type=="full"&&a[c].domobj.nodeName==b.get(0).nodeName){var d=jQuery(a[c].domobj).contents();d.length>0?d.first().unwrap():jQuery(a[c].domobj).remove()}a[c].children&&this.recursiveRemoveMarkup(a[c].children,b)}},GENTICS.Utils.Dom.prototype.doCleanup=function(a,b,c){var d=this;typeof a=="undefined"&&(a={merge:!0,removeempty:!0}),typeof c=="undefined"&&b&&(c=b.getCommonAncestorContainer());var e=!1,f=!1,g=jQuery(c);return g.contents().each(function(c){switch(this.nodeType){case 1:if(e&&e.nodeName==this.nodeName)b.startContainer===g&&b.startOffset>c&&(b.startOffset-=1,f=!0),b.endContainer===g&&b.endOffset>c&&(b.endOffset-=1,f=!0),jQuery(e).append(jQuery(this).contents()),f|=d.doCleanup(a,b,e),jQuery(this).remove();else{f|=d.doCleanup(a,b,this);var h=!1;a.removeempty&&(GENTICS.Utils.Dom.isBlockLevelElement(this)&&this.childNodes.length==0&&(jQuery(this).remove(),h=!0),jQuery.inArray(this.nodeName.toLowerCase(),d.mergeableTags)>=0&&jQuery(this).text().length==0&&this.childNodes.length==0&&(jQuery(this).remove(),h=!0)),h||(jQuery.inArray(this.nodeName.toLowerCase(),d.mergeableTags)>=0?e=this:e=!1)}break;case 3:e&&e.nodeType==3&&a.merge?(b.startContainer===this&&(b.startContainer=e,b.startOffset+=e.length,f=!0),b.endContainer===this&&(b.endContainer=e,b.endOffset+=e.length,f=!0),b.startContainer===g&&b.startOffset>c&&(b.startOffset-=1,f=!0),b.endContainer===g&&b.endOffset>c&&(b.endOffset-=1,f=!0),e.data+=this.data,jQuery(this).remove()):e=this}}),a.removeempty&&GENTICS.Utils.Dom.isBlockLevelElement(c)&&(!c.childNodes||c.childNodes.length==0)&&(b.startContainer==c&&(b.startContainer=c.parentNode,b.startOffset=GENTICS.Utils.Dom.getIndexInParent(c)),b.endContainer==c&&(b.endContainer=c.parentNode,b.endOffset=GENTICS.Utils.Dom.getIndexInParent(c)),g.remove(),f=!0),f&&b.clearCaches(),f},GENTICS.Utils.Dom.prototype.getIndexInParent=function(a){if(!a)return!1;var b=0,c=a.previousSibling;while(c)b++,c=c.previousSibling;return b},GENTICS.Utils.Dom.prototype.isBlockLevelElement=function(a){return a?a.nodeType==1&&jQuery.inArray(a.nodeName.toLowerCase(),this.blockLevelElements)>=0?!0:!1:!1},GENTICS.Utils.Dom.prototype.isLineBreakElement=function(a){return a?a.nodeType==1&&a.nodeName.toLowerCase()=="br":!1},GENTICS.Utils.Dom.prototype.isListElement=function(a){return a?a.nodeType==1&&jQuery.inArray(a.nodeName.toLowerCase(),this.listElements)>=0:!1},GENTICS.Utils.Dom.prototype.isSplitObject=function(a){if(a.nodeType===1)switch(a.nodeName.toLowerCase()){case"p":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"li":return!0}return!1},GENTICS.Utils.Dom.prototype.searchAdjacentTextNode=function(a,b,c,d){if(!a||a.nodeType!=1||b<0||b>a.childNodes.length)return!1;typeof d=="undefined"&&(d={blocklevel:!0,list:!0,linebreak:!0}),d.blocklevel=="undefined"&&(stopal.blocklevel=!0),d.list=="undefined"&&(stopal.list=!0),d.linebreak=="undefined"&&(stopal.linebreak=!0),typeof c=="undefined"&&(c=!0);var e=undefined,f=a;c&&b>0&&(e=a.childNodes[b-1]),!c&&b<a.childNodes.length&&(e=a.childNodes[b]);while(typeof f!="undefined")if(!e){if(d.blocklevel&&this.isBlockLevelElement(f))return!1;if(d.list&&this.isListElement(f))return!1;e=c?f.previousSibling:f.nextSibling,f=f.parentNode}else{if(e.nodeType==3&&jQuery.trim(e.data).length>0)return e;if(d.blocklevel&&this.isBlockLevelElement(e))return!1;if(d.linebreak&&this.isLineBreakElement(e))return!1;if(d.list&&this.isListElement(e))return!1;e.nodeType==3?e=c?e.previousSibling:e.nextSibling:(f=e,e=c?e.lastChild:e.firstChild)}},GENTICS.Utils.Dom.prototype.insertIntoDOM=function(a,b,c,d,e){var f=b.getContainerParents(c,d),g=this,h;c||(c=jQuery(document.body)),f.length==0?h=c.get(0):jQuery.each(f,function(b,c){if(g.allowsNesting(c,a.get(0)))return h=c,!1}),typeof h=="undefined"&&c.length>0&&(h=c.get(0));if(!this.allowsNesting(h,a.get(0))&&!e)return!1;if(typeof h!="undefined"){var i=this.split(b,jQuery(h),d);if(i===!0){var j=b.startContainer,k=b.startOffset;d&&(j=b.endContainer,k=b.endOffset);if(k==0){var l=jQuery(j).contents();return l.length>0?l.eq(0).before(a):jQuery(j).append(a),!0}return jQuery(j).contents().eq(k-1).after(a),!0}return i?(i.eq(0).after(a),!0):!1}return!1},GENTICS.Utils.Dom.prototype.removeFromDOM=function(a,b,c){if(c){var d=this.getIndexInParent(a),e=jQuery(a).contents().length,f=a.parentNode;b.startContainer==f&&b.startOffset>d?b.startOffset+=e-1:b.startContainer==a&&(b.startContainer=f,b.startOffset=d+b.startOffset),b.endContainer==f&&b.endOffset>d?b.endOffset+=e-1:b.endContainer==a&&(b.endContainer=f,b.endOffset=d+b.endOffset),jQuery(a).contents().unwrap(),this.doCleanup({merge:!0},b,f)}},GENTICS.Utils.Dom.prototype.extendToWord=function(a,b){var c=this.searchWordBoundary(a.startContainer,a.startOffset,!0),d=this.searchWordBoundary(a.endContainer,a.endOffset,!1);if(!b){if(a.startContainer==c.container&&a.startOffset==c.offset)return;if(a.endContainer==d.container&&a.endOffset==d.offset)return}a.startContainer=c.container,a.startOffset=c.offset,a.endContainer=d.container,a.endOffset=d.offset,a.correctRange(),a.clearCaches()},GENTICS.Utils.Dom.prototype.isWordBoundaryElement=function(a){return!a||!a.nodeName?!1:jQuery.inArray(a.nodeName.toLowerCase(),this.nonWordBoundaryTags)==-1},GENTICS.Utils.Dom.prototype.searchWordBoundary=function(a,b,c){typeof c=="undefined"&&(c=!0);var d=!1;while(!d)if(a.nodeType==3)if(!c){var e=a.data.substring(b).search(/\W/);e!=-1?(b=b+e,d=!0):(b=this.getIndexInParent(a)+1,a=a.parentNode)}else{var e=a.data.substring(0,b).search(/\W/),f=e;while(f!=-1)e=f,f=a.data.substring(e+1,b).search(/\W/),f!=-1&&(f=f+e+1);e!=-1?(b=e+1,d=!0):(b=this.getIndexInParent(a),a=a.parentNode)}else a.nodeType==1&&(c?b>0?this.isWordBoundaryElement(a.childNodes[b-1])?d=!0:(a=a.childNodes[b-1],b=a.nodeType==3?a.data.length:a.childNodes.length):this.isWordBoundaryElement(a)?d=!0:(b=this.getIndexInParent(a),a=a.parentNode):b<a.childNodes.length?this.isWordBoundaryElement(a.childNodes[b])?d=!0:(a=a.childNodes[b],b=0):this.isWordBoundaryElement(a)?d=!0:(b=this.getIndexInParent(a)+1,a=a.parentNode));if(a.nodeType!=3){var g=this.searchAdjacentTextNode(a,b,!c);g&&(a=g,b=c?0:a.data.length)}return{container:a,offset:b}},GENTICS.Utils.Dom.prototype.isEmpty=function(a){if(!a)return!0;if(jQuery.inArray(a.nodeName.toLowerCase(),this.nonEmptyTags)!=-1)return!1;if(a.nodeType==3)return a.data.search(/\S/)==-1;for(var b=0;b<a.childNodes.length;++b)if(!this.isEmpty(a.childNodes[b]))return!1;return!0},GENTICS.Utils.Dom.prototype.setCursorAfter=function(a){var b=new GENTICS.Utils.RangeObject;b.startContainer=b.endContainer=a.parentNode,b.startOffset=b.endOffset=this.getIndexInParent(a),b.select()},GENTICS.Utils.Dom.prototype.setCursorInto=function(a){var b=new GENTICS.Utils.RangeObject;b.startContainer=b.endContainer=a,b.startOffset=b.endOffset=0,b.select()},GENTICS.Utils.Dom=new GENTICS.Utils.Dom,jQuery.fn.between=function(a,b){if(this[0].nodeType!==3)b>this.children().size()&&(b=this.children().size()),b<=0?this.prepend(a):this.children().eq(b-1).after(a);else if(b<=0)this.before(a);else if(b>=this[0].length)this.after(a);else{var c=this[0].data;this[0].data=c.substring(0,b),this.after(c.substring(b,c.length)),this.after(a)}},jQuery.fn.removeCss=function(a){return this.each(function(){var b=jQuery(this).attr("style"),c=jQuery.grep(jQuery(this).attr("style").split(";"),function(b){var c=b.split(":");if(c[0]&&c[0].toUpperCase().trim().indexOf(a.toUpperCase())==-1)return b}).join(";").trim();return jQuery(this).removeAttr("style"),c.trim()&&jQuery(this).attr("style",c),jQuery(this)})},jQuery.fn.contentEditable=function(a){var b="contenteditable";jQuery.browser.msie&&parseInt(jQuery.browser.version)==7&&(b="contentEditable");if(a==undefined)return jQuery(this).attr(b);a===""?jQuery(this).removeAttr(b):(a&&a!=="false"?a="true":a="false",jQuery(this).attr(b,a))};if(typeof GENTICS=="undefined"||!GENTICS)var GENTICS={};if(typeof GENTICS.Utils=="undefined"||!GENTICS)GENTICS.Utils={};GENTICS.Utils.applyProperties=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},GENTICS.Utils.uniqeString4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},GENTICS.Utils.guid=function(){var a=GENTICS.Utils.uniqeString4;return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};if(typeof GENTICS=="undefined"||!GENTICS)var GENTICS={};if(typeof GENTICS.Utils=="undefined"||!GENTICS)GENTICS.Utils={};GENTICS.Utils.Position={},GENTICS.Utils.Position.w=jQuery(window),GENTICS.Utils.Position.Scroll={top:0,left:0,isScrolling:!1},GENTICS.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0},GENTICS.Utils.Position.mouseStopCallbacks=[],GENTICS.Utils.Position.mouseMoveCallbacks=[],GENTICS.Utils.Position.update=function(){var a=this.w.scrollTop(),b=this.w.scrollLeft();if(this.Scroll.isScrolling)this.Scroll.top==a&&this.Scroll.left==b&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=a||this.Scroll.left!=b)this.Scroll.isScrolling=!0;this.Scroll.top=a,this.Scroll.left=b;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){this.Mouse.isMoving=!1;if(!this.Mouse.triggeredMouseStop){this.Mouse.triggeredMouseStop=!0;for(var c=0;c<this.mouseStopCallbacks.length;c++)this.mouseStopCallbacks[c].call()}}else{this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1;for(var c=0;c<this.mouseMoveCallbacks.length;c++)this.mouseMoveCallbacks[c].call()}this.Mouse.oldX=this.Mouse.x,this.Mouse.oldY=this.Mouse.y},GENTICS.Utils.Position.addMouseStopCallback=function(a){return this.mouseStopCallbacks.push(a),this.mouseStopCallbacks.length-1},GENTICS.Utils.Position.addMouseMoveCallback=function(a){return this.mouseMoveCallbacks.push(a),this.mouseMoveCallbacks.length-1},jQuery(document).ready(function(){setInterval("GENTICS.Utils.Position.update()",500)}),jQuery("html").mousemove(function(a){GENTICS.Utils.Position.Mouse.x=a.pageX,GENTICS.Utils.Position.Mouse.y=a.pageY});if(typeof GENTICS=="undefined"||!GENTICS)var GENTICS={};if(typeof GENTICS.Utils=="undefined"||!GENTICS)GENTICS.Utils={};GENTICS.Utils.RangeObject=function(a){this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.startParents=[],this.endParents=[],this.rangeTree=[],typeof a=="object"?(a.startContainer!==undefined&&(this.startContainer=a.startContainer),a.startOffset!==undefined&&(this.startOffset=a.startOffset),a.endContainer!==undefined&&(this.endContainer=a.endContainer),a.endOffset!==undefined&&(this.endOffset=a.endOffset)):a===!0&&this.initializeFromUserSelection()},GENTICS.Utils.RangeObject.prototype.log=function(a,b){if(GENTICS&&GENTICS.Aloha&&GENTICS.Aloha.Log)return GENTICS.Aloha.Log.debug(this,a),!1;console&&(console.log(a),b&&console.log(b))},GENTICS.Utils.RangeObject.prototype.isCollapsed=function(){return!this.endContainer||this.startContainer===this.endContainer&&this.startOffset===this.endOffset},GENTICS.Utils.RangeObject.prototype.getCommonAncestorContainer=function(){return this.commonAncestorContainer?this.commonAncestorContainer:(this.updateCommonAncestorContainer(),this.commonAncestorContainer)},GENTICS.Utils.RangeObject.prototype.getContainerParents=function(a,b){var c=b?this.endContainer:this.startContainer,d=b?this.endParents:this.startParents;if(!c)return!1;typeof a=="undefined"&&(a=jQuery("body"));if(!d[a.get(0)]){var e;if(c.nodeType==3)e=jQuery(c).parents();else{e=jQuery(c).parents();for(var f=e.length;f>0;--f)e[f]=e[f-1];e[0]=c}var g=e.index(a);g>=0&&(e=e.slice(0,g)),d[a.get(0)]=e}return d[a.get(0)]},GENTICS.Utils.RangeObject.prototype.getStartContainerParents=function(a){return this.getContainerParents(a,!1)},GENTICS.Utils.RangeObject.prototype.getEndContainerParents=function(a){return this.getContainerParents(a,!0)},GENTICS.Utils.RangeObject.prototype.updateCommonAncestorContainer=function(a){var b=this.getStartContainerParents(),c=this.getEndContainerParents();if(!a){if(!(b.length>0&&c.length>0))return GENTICS.Utils.RangeObject.prototype.log("could not find commonAncestorContainer"),!1;for(var d=0;d<b.length;d++)if(c.index(b[d])!=-1){this.commonAncestorContainer=b[d];break}}else this.commonAncestorContainer=a;return GENTICS.Utils
.RangeObject.prototype.log(a?"commonAncestorContainer was set successfully":"commonAncestorContainer was calculated successfully"),!0},GENTICS.Utils.RangeObject.prototype.getCollapsedIERange=function(a,b){var c=document.body.createTextRange(),d=this.searchElementToLeft(a,b);if(d.element){var e=document.body.createTextRange();e.moveToElementText(d.element),c.setEndPoint("StartToEnd",e),d.characters!=0?c.moveStart("character",d.characters):(c.moveStart("character",1),c.moveStart("character",-1))}else{var f=this.searchElementToRight(a,b),g=a.nodeType==3?a.parentNode:a,e=document.body.createTextRange();e.moveToElementText(g),c.setEndPoint("StartToStart",e),d.characters!=0&&c.moveStart("character",d.characters)}return c.collapse(),c},GENTICS.Utils.RangeObject.prototype.select=document.createRange===undefined?function(){GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"Set selection to current range (IE version)"),this.startContainer.nodeType==3&&GENTICS.Utils.Dom.isBlockLevelElement(this.startContainer.nextSibling)&&(jQuery(this.startContainer).after("<br/>"),this.endContainer===this.startContainer.parentNode&&GENTICS.Utils.Dom.getIndexInParent(this.startContainer)<this.endOffset&&this.endOffset++);var a=document.body.createTextRange(),b=this.getCollapsedIERange(this.startContainer,this.startOffset);a.setEndPoint("StartToStart",b);if(this.isCollapsed())a.collapse();else{var c=this.getCollapsedIERange(this.endContainer,this.endOffset);a.setEndPoint("EndToStart",c)}a.select()}:function(){GENTICS.Aloha.Log.isDebugEnabled()&&GENTICS.Aloha.Log.debug(this,"Set selection to current range (non IE version)");var a=document.createRange();a.setStart(this.startContainer,this.startOffset),a.setEnd(this.endContainer,this.endOffset),window.getSelection().removeAllRanges(),window.getSelection().addRange(a)},GENTICS.Utils.RangeObject.prototype.searchElementToLeft=function(a,b){var c=undefined,d=0;a.nodeType==3?(d=b,c=a.previousSibling):b>0&&(c=a.childNodes[b-1]);while(c&&c.nodeType==3)d+=c.data.length,c=c.previousSibling;return{element:c,characters:d}},GENTICS.Utils.RangeObject.prototype.searchElementToRight=function(a,b){var c=undefined,d=0;a.nodeType==3?(d=a.data.length-b,c=a.nextSibling):b<a.childNodes.length&&(c=a.childNodes[b]);while(c&&c.nodeType==3)d+=c.data.length,c=c.nextSibling;return{element:c,characters:d}},GENTICS.Utils.RangeObject.prototype.update=function(a){GENTICS.Utils.RangeObject.prototype.log("=========="),GENTICS.Utils.RangeObject.prototype.log("now updating rangeObject"),this.initializeFromUserSelection(a),this.updateCommonAncestorContainer()},GENTICS.Utils.RangeObject.prototype.initializeFromUserSelection=function(a){var b=window.getSelection();if(!b)return!1;var c=b.getRangeAt(0);if(!c)return!1;this.startContainer=c.startContainer,this.endContainer=c.endContainer,this.startOffset=c.startOffset,this.endOffset=c.endOffset,this.correctRange();return},GENTICS.Utils.RangeObject.prototype.correctRange=function(){this.clearCaches();if(this.isCollapsed()){if(this.startContainer.nodeType==1){if(this.startOffset>0&&this.startContainer.childNodes[this.startOffset-1].nodeType==3){this.startContainer=this.startContainer.childNodes[this.startOffset-1],this.startOffset=this.startContainer.data.length,this.endContainer=this.startContainer,this.endOffset=this.startOffset;return}if(this.startOffset>0&&this.startContainer.childNodes[this.startOffset-1].nodeType==1){var a=GENTICS.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!0);if(a){this.startContainer=this.endContainer=a,this.startOffset=this.endOffset=a.data.length;return}a=GENTICS.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!1);if(a){this.startContainer=this.endContainer=a,this.startOffset=this.endOffset=0;return}}if(this.startOffset<this.startContainer.childNodes.length&&this.startContainer.childNodes[this.startOffset].nodeType==3){this.startContainer=this.startContainer.childNodes[this.startOffset],this.startOffset=0,this.endContainer=this.startContainer,this.endOffset=0;return}}if(this.startContainer.nodeType==3&&this.startOffset==0){var a=GENTICS.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,GENTICS.Utils.Dom.getIndexInParent(this.startContainer),!0);a&&(this.startContainer=this.endContainer=a,this.startOffset=this.endOffset=a.data.length)}}else{if(this.startContainer.nodeType==1)if(this.startOffset<this.startContainer.childNodes.length&&this.startContainer.childNodes[this.startOffset].nodeType==3)this.startContainer=this.startContainer.childNodes[this.startOffset],this.startOffset=0;else if(this.startOffset<this.startContainer.childNodes.length&&this.startContainer.childNodes[this.startOffset].nodeType==1){var b=!1,c=this.startContainer.childNodes[this.startOffset];while(b===!1&&c.childNodes&&c.childNodes.length>0)c=c.childNodes[0],c.nodeType==3&&(b=c);b!==!1&&(this.startContainer=b,this.startOffset=0)}if(this.startContainer.nodeType==3&&this.startOffset==this.startContainer.data.length){var a=GENTICS.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,GENTICS.Utils.Dom.getIndexInParent(this.startContainer)+1,!1);a&&(this.startContainer=a,this.startOffset=0)}if(this.endContainer.nodeType==3&&this.endOffset==0)if(this.endContainer.previousSibling&&this.endContainer.previousSibling.nodeType==3)this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length;else if(this.endContainer.previousSibling&&this.endContainer.previousSibling.nodeType==1&&this.endContainer.parentNode){var d=this.endContainer.parentNode;for(var e=0;e<d.childNodes.length;++e)if(d.childNodes[e]==this.endContainer){this.endOffset=e;break}this.endContainer=d}this.endContainer.nodeType==1&&this.endOffset==0&&this.endContainer.previousSibling&&(this.endContainer.previousSibling.nodeType==3?(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length):this.endContainer.previousSibling.nodeType==1&&this.endContainer.previousSibling.childNodes&&this.endContainer.previousSibling.childNodes.length>0&&(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.childNodes.length));if(this.endContainer.nodeType==1)if(this.endOffset>0&&this.endContainer.childNodes[this.endOffset-1].nodeType==3)this.endContainer=this.endContainer.childNodes[this.endOffset-1],this.endOffset=this.endContainer.data.length;else if(this.endOffset>0&&this.endContainer.childNodes[this.endOffset-1].nodeType==1){var b=!1,c=this.endContainer.childNodes[this.endOffset-1];while(b===!1&&c.childNodes&&c.childNodes.length>0)c=c.childNodes[c.childNodes.length-1],c.nodeType==3&&(b=c);b!==!1&&(this.endContainer=b,this.endOffset=this.endContainer.data.length)}}},GENTICS.Utils.RangeObject.prototype.clearCaches=function(){this.rangeTree=[],this.startParents=[],this.endParents=[],this.commonAncestorContainer=undefined},GENTICS.Utils.RangeObject.prototype.getRangeTree=function(a){return typeof a=="undefined"&&(a=this.getCommonAncestorContainer()),this.rangeTree[a]?this.rangeTree[a]:(this.inselection=!1,this.rangeTree[a]=this.recursiveGetRangeTree(a),this.rangeTree[a])},GENTICS.Utils.RangeObject.prototype.recursiveGetRangeTree=function(a){var b=jQuery(a),c=0,d=this,e=[];return b.contents().each(function(b){var f="none",g=!1,h=!1,i=!1;d.isCollapsed()&&a===d.startContainer&&d.startOffset==b&&(e[c]=new GENTICS.Utils.RangeTree,e[c].type="collapsed",e[c].domobj=undefined,d.inselection=!1,i=!0,c++);if(!d.inselection&&!i)switch(this.nodeType){case 3:this===d.startContainer&&(d.inselection=!0,f=d.startOffset>0?"partial":"full",g=d.startOffset,h=this.length);break;case 1:this===d.startContainer&&d.startOffset==0&&(d.inselection=!0,f="full"),a===d.startContainer&&d.startOffset==b&&(d.inselection=!0,f="full")}if(d.inselection&&!i){f=="none"&&(f="full");switch(this.nodeType){case 3:this===d.endContainer&&(d.inselection=!1,d.endOffset<this.length&&(f="partial"),g===!1&&(g=0),h=d.endOffset);break;case 1:this===d.endContainer&&d.endOffset==0&&(d.inselection=!1)}a===d.endContainer&&d.endOffset<=b&&(d.inselection=!1,f="none")}e[c]=new GENTICS.Utils.RangeTree,e[c].domobj=this,e[c].type=f,f=="partial"&&(e[c].startOffset=g,e[c].endOffset=h),e[c].children=d.recursiveGetRangeTree(this);if(e[c].children.length>0){var j=!1,k=!1,l=!1;for(var m=0;m<e[c].children.length;++m)switch(e[c].children[m].type){case"none":j=!0;break;case"full":l=!0;break;case"partial":k=!0}k||l&&j?e[c].type="partial":l&&!k&&!j&&(e[c].type="full")}c++}),this.isCollapsed()&&a===this.startContainer&&this.startOffset==a.childNodes.length&&(e[c]=new GENTICS.Utils.RangeTree,e[c].type="collapsed",e[c].domobj=undefined),e},GENTICS.Utils.RangeObject.prototype.findMarkup=function(a,b,c){var d=this.getContainerParents(b,c),e=!1;return jQuery.each(d,function(b,c){if(a.apply(c))return e=c,!1}),e},GENTICS.Utils.RangeObject.prototype.getText=function(){return this.isCollapsed()?"":this.recursiveGetText(this.getRangeTree())},GENTICS.Utils.RangeObject.prototype.recursiveGetText=function(a){if(!a)return"";var b=this,c="";return jQuery.each(a,function(){this.type=="full"?c+=jQuery(this.domobj).text():this.type=="partial"&&this.domobj.nodeType==3?c+=jQuery(this.domobj).text().substring(this.startOffset,this.endOffset):this.type=="partial"&&this.domobj.nodeType==1&&this.children&&(c+=b.recursiveGetText(this.children))}),c},GENTICS.Utils.RangeTree=function(){this.domobj=new Object,this.type,this.children=[]},Ext.ns("F3.TYPO3.Components"),F3.TYPO3.Components.Button=Ext.extend(Ext.Button,{buttonSelector:"button span:first-child",menuClassTarget:"button span",template:(new Ext.Template('<div id="{2}" class="F3-TYPO3-Components-Button"><button type="{0}" class="{1}"><span></span></button></div>')).compile(),getTemplateArgs:function(){return[this.type,this.cls+" F3-TYPO3-Components-Button-scale-"+this.scale,this.id]}}),Ext.reg("F3.TYPO3.Components.Button",F3.TYPO3.Components.Button),Ext.ns("F3.TYPO3.Components"),F3.TYPO3.Components.ModuleContainer=Ext.extend(Ext.Container,{initComponent:function(){var a={cls:"F3-TYPO3-Components-ModuleContainer",layout:"vbox",layoutConfig:{align:"stretch"}};Ext.apply(this,a),F3.TYPO3.Components.ModuleContainer.superclass.initComponent.call(this)}}),Ext.reg("F3.TYPO3.Components.ModuleContainer",F3.TYPO3.Components.ModuleContainer),Ext.ns("F3.TYPO3.Configuration"),F3.TYPO3.Configuration.Application={backendBaseUri:null,frontendBaseUri:null,workspaceName:null,siteName:null,siteNodePath:null,version:null},Ext.ns("F3.TYPO3.Content.AlohaConnector"),F3.TYPO3.Content.AlohaConnector.AlohaInitializer={_contentModule:null,_alohaEnabled:!1,initialize:function(){if(window.parent.F3.TYPO3.Content.ContentModule!==undefined){this._contentModule=window.parent.F3.TYPO3.Content.ContentModule;var a=function(a,b){a.obj.attr("contenteditable","true"),window.setTimeout(function(){a.activate(b),GENTICS.Aloha.Selection.onChange(a.obj,b)},5)};GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableCreated",function(b,c){c.obj.unbind("mousedown"),c.obj.unbind("focus"),c.obj.unbind("keydown"),c.obj.mousedown(function(b){return F3.TYPO3.Content.AlohaConnector.AlohaInitializer._alohaEnabled&&(c.isDisabled()?a(c,b):c.activate(b)),!0}),c.obj.keydown(function(a){return F3.TYPO3.Content.AlohaConnector.AlohaInitializer._alohaEnabled?GENTICS.Aloha.Markup.preProcessKeyStrokes(a):!1}),c.obj.dblclick(function(b){return F3.TYPO3.Content.AlohaConnector.AlohaInitializer._alohaEnabled?!0:(F3.TYPO3.Content.AlohaConnector.AlohaInitializer._contentModule.enableEditing(),a(c,b),!0)}),c.obj.attr("contentEditable","false")}),jQuery(".f3-typo3-editable").aloha(),window.addEventListener("dblclick",this._onDblClick.createDelegate(this),!1),window.addEventListener("resize",this._onResize.createDelegate(this),!1),this._contentModule.isEditing()&&this.enableEditing(),Ext.getBody().on("keydown",this._onKeyDown,this)}},_onDblClick:function(a){this._contentModule.isEditing()||(a.preventDefault(),a.stopPropagation(),this._contentModule.enableEditing())},_onResize:function(){this._alohaEnabled&&(this._removeUneditableAreas(),this._overlayUneditableAreas())},_onKeyDown:function(a){a.keyCode==27&&this._contentModule.disableEditing()},enableEditing:function(){this._overlayUneditableAreas(),this._enableAloha()},disableEditing:function(){this._removeUneditableAreas(),this._disableAloha()},_enableAloha:function(){this._alohaEnabled=!0},_disableAloha:function(){for(var a=0;a<GENTICS.Aloha.editables.length;a++)GENTICS.Aloha.editables[a].disable(),GENTICS.Aloha.editables[a].blur();GENTICS.Aloha.FloatingMenu.obj.hide(),GENTICS.Aloha.FloatingMenu.shadow.hide(),this._alohaEnabled=!1},_overlayUneditableAreas:function(){Ext.each(Ext.query(".f3-typo3-notEditable"),function(a){this._createOverlayForElement(a,"f3-typo3-notEditable-visible")},this)},_removeUneditableAreas:function(){jQuery(".f3-typo3-notEditable-visible").remove()},_createOverlayForElement:function(a,b){var c;return a=Ext.get(a),c=a.getXY(),Ext.DomHelper.append(window.document.body,{cls:b,style:"position: absolute; left: "+c[0]+"px; top: "+c[1]+"px;width:"+a.getComputedWidth()+"px;height:"+a.getComputedHeight()+"px"})}},Ext.onReady(function(){F3.TYPO3.Content.AlohaConnector.AlohaInitializer.initialize()}),Ext.namespace("F3.TYPO3.Content.AlohaConnector"),F3.TYPO3.Content.AlohaConnector=Ext.apply(new GENTICS.Aloha.Plugin("F3.TYPO3.Content.AlohaConnector"),{languages:[],init:function(){this._subscribeToAlohaEvents(),this._addInsertNewSectionButton()},_subscribeToAlohaEvents:function(){GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableDeactivated",this._onEditableDeactivated)},_onEditableDeactivated:function(a,b){b.editable.isModified()&&F3.TYPO3.Content.AlohaConnector._saveChanges(b.editable)},_saveChanges:function(a){var b=a.obj.parents("*[data-nodepath]").first(),c=b.attr("data-nodepath"),d=b.attr("data-workspacename"),e={};e.__context={workspaceName:d,nodePath:c},e.properties={},b.find("*[data-property]").each(function(a,b){e.properties[b.getAttribute("data-property")]=b.innerHTML}),window.parent.F3.TYPO3.Content.ContentModule!==undefined&&window.parent.F3.TYPO3.Content.ContentModule.fireEvent("AlohaConnector.contentChanged",e)},_addInsertNewSectionButton:function(){var a=new GENTICS.Aloha.ui.Button({label:"Add section",size:"small",onclick:function(){var a=Ext.DomHelper.insertAfter(GENTICS.Aloha.activeEditable.obj[0],'<div class="f3-typo3-editable"><div contenteditable="false"><h2 contenteditable="true">[headline]</h2><div contenteditable="true">[content]</div></div></div>');jQuery(a).aloha()},tooltip:"tooltip"});GENTICS.Aloha.FloatingMenu.addButton("GENTICS.Aloha.continuoustext",a,GENTICS.Aloha.i18n(GENTICS.Aloha,"floatingmenu.tab.insert"),4)}}),Ext.ns("F3.TYPO3.Content"),F3.TYPO3.Content.ContentEditor=Ext.extend(Ext.Container,{initComponent:function(){var a,b,c;c=Ext.util.Cookies.get("TYPO3_lastVisitedNode"),a=F3.TYPO3.Configuration.Application.backendBaseUri+"service/rest/v1/node/"+F3.TYPO3.Configuration.Application.workspaceName+(c?c+".html":F3.TYPO3.Configuration.Application.siteNodePath+"/.html"),b={border:!1,style:{overflow:"hidden"},items:{itemId:"contentIframe",xtype:"box",autoEl:{tag:"iframe",src:a,style:{width:"100%",height:"100%",border:"0",background:"#333"}}}},Ext.apply(this,b),F3.TYPO3.Content.ContentEditor.superclass.initComponent.call(this),F3.TYPO3.Content.ContentModule.on("AlohaConnector.contentChanged",this._onContentChanged,this)},loadPage:function(a){this._getIframeDocument().location.assign(a)},reload:function(){this._getIframeDocument().location.reload()},_onContentChanged:function(a){F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.update(a)},_getIframeDocument:function(){var a,b;return a=this.getComponent("contentIframe").el.dom,b=a.contentDocument?a.contentDocument:a.Document,b},_getAlohaInitializer:function(){var a,b;return a=this.getComponent("contentIframe").el.dom,a.contentWindow.F3?a.contentWindow.F3.TYPO3.Content.AlohaConnector.AlohaInitializer:undefined},getCurrentContext:function(){return{__context:{workspaceName:this._getIframeDocument().body.getAttribute("data-workspacename"),nodePath:this._getIframeDocument().body.getAttribute("data-nodepath")}}},enableEditing:function(){this._getAlohaInitializer()&&this._getAlohaInitializer().enableEditing()},disableEditing:function(){this._getAlohaInitializer()&&this._getAlohaInitializer().disableEditing()}}),Ext.reg("F3.TYPO3.Content.ContentEditor",F3.TYPO3.Content.ContentEditor),Ext.ns("F3.TYPO3.Content"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Content.ContentModule",{_isEditing:!1,configure:function(a){a.append("menu/main","content",{tabCls:"F3-TYPO3-UserInterface-SectionMenu-ContentTab",title:"Content",itemId:"content",viewFilter:{xtype:"F3.TYPO3.UserInterface.ViewFilterToolbar"}}),a.append("menu/main/content[]","edit",{itemId:"edit",text:"Edit",iconCls:"F3-TYPO3-Content-icon-edit"}),a.append("menu/main/content[]/edit[]","pageProperties",{itemId:"pageProperties",text:"Page properties",iconCls:"F3-TYPO3-Content-icon-pageProperties"}),a.append("menu/main/content[]","createPage",{itemId:"Create",text:"Create Page",iconCls:"F3-TYPO3-Content-icon-createPage"}),a.append("menu/main/content[]","deletePage",{itemId:"Delete",text:"Delete Page",iconCls:"F3-TYPO3-Content-icon-deletePage"}),a.append("menu/viewFilterToolbar","workspaceName",{text:F3.TYPO3.Configuration.Application.workspaceName,cls:"F3-TYPO3-ContextToolbar-icon-workspaceName"}),a.append("menu/viewFilterToolbar","siteName",{text:F3.TYPO3.Configuration.Application.siteName,cls:"F3-TYPO3-ContextToolbar-icon-siteName",disabled:!0}),a.append("menu/viewFilterToolbar","contextLocale",{text:F3.TYPO3.Configuration.Application.contextLocale,cls:"F3-TYPO3-ContextToolbar-icon-contextLocale",disabled:!0}),a.set("schema/type",{"TYPO3:Page":{service:{show:"F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.show",update:"F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.update",create:"F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.create","delete":"F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.delete"},properties:{nodeName:{type:"string",validations:[{type:"NotEmpty"},{type:"RegularExpression",options:{regularExpression:"^[a-zA-Z0-9][a-zA-Z0-9\\-\\/][a-zA-Z0-9]{0,254}$"}}]},"properties.title":{type:"string",validations:[{type:"NotEmpty"}]}}}}),a.set("form/type",{"TYPO3:Page":{standard:{title:"Page",children:[{key:"pageProperties",type:"fieldset",title:"Page properties",children:[{key:"title",type:"field",property:"properties.title",title:"Page title"}]}]},pageProperties:{title:"Page properties",children:[{key:"title",type:"field",property:"properties.title",title:"Page title"}]},create:{title:"Create page",children:[{key:"nodeName",type:"field",property:"nodeName",title:"Node name"},{key:"title",type:"field",property:"properties.title",title:"Page title"}]}}})},initialize:function(a){a.afterInitializationOf("F3.TYPO3.UserInterface.UserInterfaceModule",function(a){a.addContentArea("content","frontendEditor",{xtype:"F3.TYPO3.Content.ContentEditor",id:"F3.TYPO3.Content.ContentEditor"}),a.contentAreaOn("menu/main/content","content","frontendEditor"),a.moduleDialogOn("menu/main/content[]/edit[]/pageProperties",{xtype:"F3.TYPO3.Content.Edit.PagePropertiesDialog"},{xtype:"F3.TYPO3.UserInterface.ContentDialog",okButton:"Update Page",cancelButton:"Cancel",mode:"positive"}),a.moduleDialogOn("menu/main/content[]/createPage",{xtype:"F3.TYPO3.Content.Edit.CreatePageDialog"},{xtype:"F3.TYPO3.UserInterface.ContentDialog",okButton:"Create Page",cancelButton:"Cancel",mode:"positive"}),a.moduleDialogOn("menu/main/content[]/deletePage",{xtype:"F3.TYPO3.Content.Edit.DeletePageDialog"},{xtype:"F3.TYPO3.UserInterface.ContentDialog",infoText:"Are you sure you want to delete this page? Any content on this page will be lost.",okButton:"Delete Page",cancelButton:"Cancel",mode:"negative"}),a.on("activate-menu/main/content/children/edit",function(){Ext.getCmp("F3.TYPO3.Content.ContentEditor").enableEditing(),F3.TYPO3.Content.ContentModule._isEditing=!0}),a.on("deactivate-menu/main/content/children/edit",function(){Ext.getCmp("F3.TYPO3.Content.ContentEditor").disableEditing(),F3.TYPO3.Content.ContentModule._isEditing=!1})})},isEditing:function(){return this._isEditing},enableEditing:function(){F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.setActiveTab("content"),F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.getComponent("content").moduleMenu.breadcrumbMenu.activateItem("menu/main/content[]/edit")},disableEditing:function(){F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.getComponent("content").moduleMenu.breadcrumbMenu.deactivateItem("menu/main/content[]/edit")},getCurrentContentContext:function(){return Ext.getCmp("F3.TYPO3.Content.ContentEditor").getCurrentContext()},loadPage:function(a){Ext.getCmp("F3.TYPO3.Content.ContentEditor").loadPage(a)}}),Ext.ns("F3.TYPO3.Content.Edit"),F3.TYPO3.Content.Edit.CreatePageDialog=Ext.extend(F3.TYPO3.UserInterface.ModuleDialog,{initComponent:function(){var a,b={items:F3.TYPO3.UserInterface.Form.FormFactory.createForm("TYPO3:Page","create",{ref:"form",autoLoad:!1,doSubmitForm:function(){if(!this.getForm().isValid())return;var a=this.getForm().getValues();a=this._convertFlatPropertiesToNestedData(a),a.contentType="TYPO3:Page",this.getForm().api.create.call(this,F3.TYPO3.Content.ContentModule.getCurrentContentContext(),a,this._onFormSubmitSuccess,this)},_onFormSubmitSuccess:function(a,b){a?(this.ownerCt.moduleMenu.removeModuleDialog(),F3.TYPO3.Content.ContentModule.loadPage(a.data.nextUri)):b.type=="exception"?Ext.MessageBox.alert("An Error occured",b.message):Ext.MessageBox.alert("An unknown error occured")}})};Ext.apply(this,Ext.apply(this.initialConfig,b)),F3.TYPO3.Content.Edit.CreatePageDialog.superclass.initComponent.call(this)},onOk:function(){this.form.doSubmitForm()}}),Ext.reg("F3.TYPO3.Content.Edit.CreatePageDialog",F3.TYPO3.Content.Edit.CreatePageDialog),Ext.ns("F3.TYPO3.Content.Edit"),F3.TYPO3.Content.Edit.DeletePageDialog=Ext.extend(F3.TYPO3.UserInterface.ModuleDialog,{initComponent:function(){var a={height:1,items:[]};Ext.apply(this,a),F3.TYPO3.Content.Edit.DeletePageDialog.superclass.initComponent.call(this),F3.TYPO3.Core.Application.on("F3.TYPO3.Content.contentChanged",this._refreshContentEditor,this)},onOk:function(){var a=F3.TYPO3.Content.ContentModule.getCurrentContentContext();F3.TYPO3.Utils.getObjectByString(F3.TYPO3.Core.Registry.get("schema/type/TYPO3:Page/service/delete")).call(this,a,this._onDeleteSuccess,this)},_onDeleteSuccess:function(a){this.moduleMenu.removeModuleDialog(),F3.TYPO3.Content.ContentModule.loadPage(a.data.nextUri)}}),Ext.reg("F3.TYPO3.Content.Edit.DeletePageDialog",F3.TYPO3.Content.Edit.DeletePageDialog),Ext.ns("F3.TYPO3.Content.Edit"),F3.TYPO3.Content.Edit.PagePropertiesDialog=Ext.extend(F3.TYPO3.UserInterface.ModuleDialog,{initComponent:function(){var a,b={};b.items=F3.TYPO3.UserInterface.Form.FormFactory.createForm("TYPO3:Page","pageProperties",{ref:"form",getLoadIdentifier:function(){return a=F3.TYPO3.Content.ContentModule.getCurrentContentContext(),a},getSubmitIdentifier:function(){return a},onSubmitSuccess:this._onPagePropertiesSaved.createDelegate(this)}),Ext.apply(this,b),F3.TYPO3.Content.Edit.PagePropertiesDialog.superclass.initComponent.call(this),F3.TYPO3.Core.Application.on("F3.TYPO3.Content.contentChanged",this._refreshContentEditor,this)},onOk:function(){this.form.doSubmitForm()},_onPagePropertiesSaved:function(){this.moduleMenu.removeModuleDialog(),F3.TYPO3.Core.Application.fireEvent("F3.TYPO3.Content.contentChanged")},_refreshContentEditor:function(){Ext.getCmp("F3.TYPO3.Content.ContentEditor").reload()}}),Ext.reg("F3.TYPO3.Content.Edit.PagePropertiesDialog",F3.TYPO3.Content.Edit.PagePropertiesDialog),Ext.ns("F3.TYPO3.Core"),F3.TYPO3.Core.Application=Ext.apply(new Ext.util.Observable,{_modules:{},bootstrap:function(){this._initializeConfiguration(),F3.TYPO3.Core.Registry.initialize(),this._configureModules(),F3.TYPO3.Core.Registry.compile(),this._initializeModules(),Ext.QuickTips.init(),this.fireEvent("afterBootstrap")},_initializeConfiguration:function(){var a=Ext.query("base")[0];typeof a.href=="string"?F3.TYPO3.Configuration.Application.frontendBaseUri=a.href:(F3.TYPO3.Configuration.Application.frontendBaseUri="/",window.console&&console.warn("Base URI could not be extracted")),F3.TYPO3.Configuration.Application.backendBaseUri=F3.TYPO3.Configuration.Application.frontendBaseUri+"typo3/"},_configureModules:function(){for(var a in this._modules)this._modules[a].configure!==undefined&&this._modules[a].configure(F3.TYPO3.Core.Registry)},_initializeModules:function(){var a;for(a in this._modules)this._modules[a].initialize!==undefined&&this._modules[a].initialize(F3.TYPO3.Core.Application);for(a in this._modules)this.fireEvent("_afterInitializationOf."+a,this._modules[a])},afterInitializationOf:function(a,b,c){this.addListener("_afterInitializationOf."+a,b,c)},createModule:function(a,b){var c=Ext.apply(new Ext.util.Observable,b),d,e;this._modules[a]=c,d=a.split("."),e=window[d[0]]=window[d[0]]||{},Ext.each(d.slice(1,-1),function(a){e=e[a]=e[a]||{}}),e[d[d.length-1]]=c}}),Ext.onReady(F3.TYPO3.Core.Application.bootstrap,F3.TYPO3.Core.Application),Ext.ns("F3.TYPO3.Core"),F3.TYPO3.Core.Registry=new(Ext.extend(Ext.util.Observable,{_configuration:null,initialize:function(){this._configuration={_children:{}}},compile:function(){this._configuration=this._compileVisit(this._configuration)},_compileVisit:function(a){var b;if(!F3.TYPO3.Utils.isEmptyObject(a._children)){for(b in a._children)a[b]=this._compileVisit(a._children[b]);delete a._children}return this._apply_operations(a)},_apply_operations:function(a){var b,c,d=function(a,b){var c;for(c=0;c<a.length;c++)if(b(a[c]))return c;return-1};if(a._operations!==undefined){if(a._operations.remove!==undefined)return undefined;if(a._operations.set!==undefined)return a._operations.set.sort(function(a,b){return b.priority-a.priority}),a._operations.set[0].value;if(a._operations.append!==undefined||a._operations.prepend!==undefined||a._operations.insertAfter!==undefined||a._operations.insertBefore!==undefined)return b=[],a._operations.prepend!==undefined&&(a._operations.prepend.sort(function(a,b){return b.priority-a.priority}),Ext.each(a._operations.prepend,function(c){a[c.key]!==undefined&&(a[c.key].key=c.key,b.push(a[c.key]))})),a._operations.append!==undefined&&(a._operations.append.sort(function(a,b){return a.priority-b.priority}),Ext.each(a._operations.append,function(c){a[c.key]!==undefined&&(a[c.key].key=c.key,b.push(a[c.key]))})),a._operations.insertBefore!==undefined&&(a._operations.insertBefore.sort(function(a,b){return a.priority-b.priority}),Ext.each(a._operations.insertBefore,function(e){c=d(b,function(a){return a.key===e.position}),a[e.key].key=e.key,c>=0?b=b.slice(0,c).concat([a[e.key]]).concat(b.slice(c)):b.push(a[e.key])})),a._operations.insertAfter!==undefined&&(a._operations.insertAfter.sort(function(a,b){return b.priority-a.priority}),Ext.each(a._operations.insertAfter,function(e){c=d(b,function(a){return a.key===e.position}),a[e.key].key=e.key,c>=0?b=b.slice(0,c+1).concat([a[e.key]]).concat(b.slice(c+1)):b.push(a[e.key])})),b}return delete a._operations,a},set:function(a,b,c){a=this.rewritePath(a);var d=this._getOrCreatePath(this._configuration,a),e;c===undefined&&(c=0);if(Ext.isObject(b))for(e in b)this.set(a+"/"+e,b[e],c);else d._operations.set===undefined&&(d._operations.set=[]),d._operations.set.push({value:b,priority:c})},append:function(a,b,c,d){this._addOperation("append",a,b,c,d),this.set(a+"/"+b,c,d)},prepend:function(a,b,c,d){this._addOperation("prepend",a,b,c,d),this.set(a+"/"+b,c,d)},_addOperation:function(a,b,c,d,e){b=this.rewritePath(b);var f=this._getOrCreatePath(this._configuration,b),c;e===undefined&&(e=0),f._operations[a]===undefined&&(f._operations[a]=[]),f._operations[a].push({key:c,priority:e})},remove:function(a,b){a=this.rewritePath(a);var c=this._getOrCreatePath(this._configuration,a);b===undefined&&(b=0),c._operations.remove===undefined&&(c._operations.remove=[]),c._operations.remove.push({priority:b})},insertAfter:function(a,b,c,d){a=this.rewritePath(a);var e=a.split("/"),f=e.slice(0,-1).join("/"),g=e[e.length-1],h=this._getOrCreatePath(this._configuration,f),b;d===undefined&&(d=0),h._operations.insertAfter===undefined&&(h._operations.insertAfter=[]),h._operations.insertAfter.push({position:g,key:b,priority:d}),this.set(f+"/"+b,c,d)},insertBefore:function(a,b,c,d){a=this.rewritePath(a);var e=a.split("/"),f=e.slice(0,-1).join("/"),g=e[e.length-1],h=this._getOrCreatePath(this._configuration,f),b;d===undefined&&(d=0),h._operations.insertBefore===undefined&&(h._operations.insertBefore=[]),h._operations.insertBefore.push({position:g,key:b,priority:d}),this.set(f+"/"+b,c,d)},get:function(a){a===undefined?a="":a=this.rewritePath(a);var b=!0,c=a.split("/"),d=this._configuration;return a===""?d:(Ext.each(c,function(a){d.constructor==[].constructor?Ext.each(d,function(b){if(b.key==a)return d=b,!1}):d[a]===undefined?b=!1:d=d[a]}),b?F3.TYPO3.Utils.clone(d):null)},rewritePath:function(a){return a=a.replace(/\[\]/g,"[children]"),a=a.replace(/\[([^\]]+)\]/g,"/$1"),a},_getOrCreatePath:function(a,b){var c=b.split("/"),d=a;return Ext.each(c,function(a){d._children[a]===undefined&&(d._children[a]={_operations:{},_children:{}}),d=d._children[a]}),d}})),Ext.ns("F3.TYPO3.Dashboard"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Dashboard.DashboardModule",{configure:function(a){a.append("menu/main","dashboard",{tabCls:"F3-TYPO3-UserInterface-SectionMenu-DashboardTab",title:"Welcome",itemId:"dashboard",listeners:{added:function(a,b){b.on("render",function(a){var b=a.getTabEl("dashboard");Ext.fly(b).insertHtml("afterBegin",'<div class="F3-TYPO3-Dashboard-PublishedContentCount"></div>')})}},specialMenu:{xtype:"container",items:{xtype:"F3.TYPO3.Components.Button",cls:"F3-TYPO3-Dashboard-Logout",height:47,width:47,text:"logout",handler:function(){F3.TYPO3.Login.Service.logout()}},margins:"0 10 0 0"}},100),a.append("dashboard/column/left","unpublishedContentPortlet",{itemId:"unpublishedContentPortlet",xtype:"F3.TYPO3.Dashboard.UnpublishedContentPortlet"})},initialize:function(a){a.afterInitializationOf("F3.TYPO3.UserInterface.UserInterfaceModule",function(a){a.addContentArea("dashboard","dashboardView",{xtype:"F3.TYPO3.Dashboard.DashboardView",id:"F3-TYPO3-Dashboard-DashboardView"}),a.contentAreaOn("menu/main/dashboard","dashboard","dashboardView")}),a.afterInitializationOf("F3.TYPO3.Login.LoginModule",function(a){a.on("updated",function(a){var b=a.name.fullName,c=F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.getTabEl("dashboard");Ext.fly(c).child(".x-tab-strip-text").update(b)})}),a.afterInitializationOf("F3.TYPO3.Workspace.WorkspaceModule",function(a){a.on("updatedWorkspaceStatus",function(a){if(a.changed){var b=F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.getTabEl("dashboard"),c=Ext.fly(b).child(".F3-TYPO3-Dashboard-PublishedContentCount");a.unpublishedNodesCount>0?(c.fadeIn(),c.update(a.unpublishedNodesCount.toString())):c.hide()}})})}}),Ext.ns("F3.TYPO3.Dashboard"),F3.TYPO3.Dashboard.DashboardView=Ext.extend(Ext.Panel,{initComponent:function(){var a={border:!1,layout:"fit",items:[{itemId:"fifty-fifty",xtype:"portal",border:!1,items:[{columnWidth:.5,style:"padding: 10px",items:this._getColumnItems("left")},{columnWidth:.5,style:"padding: 10px",items:this._getColumnItems("right")}]}]};Ext.apply(this,a),F3.TYPO3.Dashboard.DashboardView.superclass.initComponent.call(this)},_getColumnItems:function(a){var b=[],c=F3.TYPO3.Core.Registry.get("dashboard/column/"+a);return Ext.each(c,function(a){var c={};Ext.apply(c,a),b.push(c)}),b}}),Ext.reg("F3.TYPO3.Dashboard.DashboardView",F3.TYPO3.Dashboard.DashboardView),Ext.ns("F3.TYPO3.Dashboard"),F3.TYPO3.Dashboard.UnpublishedContentPortlet=Ext.extend(Ext.ux.Portlet,{initComponent:function(){var a={collapsible:!1,title:"Workspace Overview",items:{itemId:"contentView",xtype:"F3.TYPO3.Dashboard.UnpublishedContentView",ref:"contentView",cls:"F3-TYPO3-Dashboard-DashboardView-ContentView"},bbar:[{itemId:"description",xtype:"panel",html:"The listed content is currently only visible in your personal workspace and can be published to the live website.",border:!1,cls:"F3-TYPO3-Dashboard-DashboardView-Description"},{itemId:"noContent",hidden:!0,xtype:"panel",html:"The current workspace does not contain any unpublished content.",border:!1,cls:"F3-TYPO3-Dashboard-DashboardView-Description"},"->",{xtype:"F3.TYPO3.Components.Button",itemId:"publishAll",text:"Publish all",handler:this._publishAll,scope:this,cls:"F3-TYPO3-Components-Button-type-positive F3-TYPO3-Dashboard-DashboardView-PublishButton"
},{xtype:"F3.TYPO3.Components.Button",hidden:!0,itemId:"publishSelected",text:"Publish selected",handler:this._publishSelected,scope:this,cls:"F3-TYPO3-Components-Button-type-positive F3-TYPO3-Dashboard-DashboardView-PublishButton"}]};Ext.apply(this,a),F3.TYPO3.Dashboard.UnpublishedContentPortlet.superclass.initComponent.call(this),F3.TYPO3.Workspace.WorkspaceModule.on("updatedWorkspaceStatus",function(a){a.changed&&this.getComponent("contentView").store.load(),a.unpublishedNodesCount>0?(this.getBottomToolbar().getComponent("description").show(),this.getBottomToolbar().getComponent("noContent").hide(),this.getBottomToolbar().getComponent("publishAll").enable()):(this.getBottomToolbar().getComponent("description").hide(),this.getBottomToolbar().getComponent("noContent").show(),this.getBottomToolbar().getComponent("publishAll").disable())},this),this.contentView.on("selectionchange",function(a,b){b.length>0?(this.getBottomToolbar().getComponent("publishAll").hide(),this.getBottomToolbar().getComponent("publishSelected").show()):(this.getBottomToolbar().getComponent("publishAll").show(),this.getBottomToolbar().getComponent("publishSelected").hide())},this)},_publishAll:function(a){a.disable(),F3.TYPO3.Workspace.Service.publishUserWorkspace(function(){this.getComponent("contentView").store.load({callback:function(){a.enable()},scope:this})},this)},_publishSelected:function(a){a.disable();var b=this.contentView.getSelectedRecords(),c=b.length,d=0;Ext.each(b,function(b){F3.TYPO3.Workspace.Service.publishNode({__context:{workspaceName:b.data.__workspaceName,nodePath:b.data.__nodePath}},function(){d++,d==c&&this.getComponent("contentView").store.load({callback:function(){a.enable()},scope:this})},this)},this)}}),Ext.reg("F3.TYPO3.Dashboard.UnpublishedContentPortlet",F3.TYPO3.Dashboard.UnpublishedContentPortlet),Ext.ns("F3.TYPO3.Dashboard"),F3.TYPO3.Dashboard.UnpublishedContentView=Ext.extend(Ext.DataView,{initComponent:function(){var a={store:{xtype:"directstore",directFn:Ext.apply(function(a){F3.TYPO3_Service_ExtDirect_V1_Controller_WorkspaceController.getUnpublishedNodes(F3.TYPO3.Configuration.Application.workspaceName,a)},{directCfg:{method:{len:0}}}),autoLoad:!0,autoDestroy:!0,root:"data",fields:[]},autoScroll:!0,height:360,multiSelect:!0,itemSelector:"div.F3-Content-Node",overClass:"x-view-over",tpl:new Ext.XTemplate('<tpl for=".">','<div class="F3-Content-Node">','<div class="label-wrap"><b>{__nodePath}</b></div>','<div class="abstract-wrap">{__abstract}</div>',"</div>","</tpl>",'<div class="x-clear"></div>')};Ext.apply(this,a),F3.TYPO3.Dashboard.UnpublishedContentView.superclass.initComponent.call(this)}}),Ext.reg("F3.TYPO3.Dashboard.UnpublishedContentView",F3.TYPO3.Dashboard.UnpublishedContentView),Ext.ns("F3.TYPO3.Dummy"),F3.TYPO3.Dummy.DummyContentArea=Ext.extend(Ext.Panel,{layout:"card",initComponent:function(){var a={html:'<h1 style="font-family:Share-Bold, sans-serif; margin-top:30px; text-align:center;font-size:45px;">'+this.name+"</h1>"};Ext.apply(this,a),F3.TYPO3.Dummy.DummyContentArea.superclass.initComponent.call(this)}}),Ext.reg("F3.TYPO3.Dummy.DummyContentArea",F3.TYPO3.Dummy.DummyContentArea),Ext.ns("F3.TYPO3.Dummy"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Dummy.DummyModule",{configure:function(a){},initialize:function(a){a.afterInitializationOf("F3.TYPO3.UserInterface.UserInterfaceModule",function(a){a.addContentArea("report","dummy",{xtype:"F3.TYPO3.Dummy.DummyContentArea",name:"Report"}),a.contentAreaOn("menu[main]/report","report","dummy"),a.addContentArea("layout","dummy",{xtype:"F3.TYPO3.Dummy.DummyContentArea",name:"Layout"}),a.contentAreaOn("menu[main]/layout","layout","dummy"),a.addContentArea("system","dummy",{xtype:"F3.TYPO3.Dummy.DummyContentArea",name:"System"}),a.contentAreaOn("menu[main]/system","system","dummy")})}}),Ext.form.Action.F3DirectSubmit=Ext.extend(Ext.form.Action.DirectSubmit,{run:function(){var a=this.options,b;a.clientValidation===!1||this.form.isValid()?(this.success.params=this.getParams(),b=Ext.apply(this.form.getValues(),a.additionalValues),this.form.api.submit(b,this.success,this)):a.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))}}),Ext.form.Action.ACTION_TYPES.directsubmit=Ext.form.Action.F3DirectSubmit,Ext.Direct.on("exception",function(a){window.console&&console.error&&console.error(a.message,a.where)}),Ext.ux.Portal=Ext.extend(Ext.Panel,{layout:"column",autoScroll:!0,cls:"x-portal",defaultType:"portalcolumn",initComponent:function(){Ext.ux.Portal.superclass.initComponent.call(this),this.addEvents({validatedrop:!0,beforedragover:!0,dragover:!0,beforedrop:!0,drop:!0})},initEvents:function(){Ext.ux.Portal.superclass.initEvents.call(this),this.dd=new Ext.ux.Portal.DropZone(this,this.dropConfig)},beforeDestroy:function(){this.dd&&this.dd.unreg(),Ext.ux.Portal.superclass.beforeDestroy.call(this)}}),Ext.reg("portal",Ext.ux.Portal),Ext.ux.Portal.DropZone=Ext.extend(Ext.dd.DropTarget,{constructor:function(a,b){this.portal=a,Ext.dd.ScrollManager.register(a.body),Ext.ux.Portal.DropZone.superclass.constructor.call(this,a.bwrap.dom,b),a.body.ddScrollConfig=this.ddScrollConfig},ddScrollConfig:{vthresh:50,hthresh:-1,animate:!0,increment:200},createEvent:function(a,b,c,d,e,f){return{portal:this.portal,panel:c.panel,columnIndex:d,column:e,position:f,data:c,source:a,rawEvent:b,status:this.dropAllowed}},notifyOver:function(a,b,c){var d=b.getXY(),e=this.portal,f=a.proxy;this.grid||(this.grid=this.getGrid());var g=e.body.dom.clientWidth;this.lastCW?this.lastCW!=g&&(this.lastCW=g,e.doLayout(),this.grid=this.getGrid()):this.lastCW=g;var h=0,i=this.grid.columnX,j=!1;for(var k=i.length;h<k;h++)if(d[0]<i[h].x+i[h].w){j=!0;break}j||h--;var l,m=!1,n=0,o=e.items.itemAt(h),p=o.items.items,q=!1;for(var k=p.length;n<k;n++){l=p[n];var r=l.el.getHeight();if(r===0)q=!0;else if(l.el.getY()+r/2>d[1]){m=!0;break}}n=(m&&l?n:o.items.getCount())+(q?-1:0);var s=this.createEvent(a,b,c,h,o,n);return e.fireEvent("validatedrop",s)!==!1&&e.fireEvent("beforedragover",s)!==!1?(f.getProxy().setWidth("auto"),l?f.moveProxy(l.el.dom.parentNode,m?l.el.dom:null):f.moveProxy(o.el.dom,null),this.lastPos={c:o,col:h,p:q||m&&l?n:!1},this.scrollPos=e.body.getScroll(),e.fireEvent("dragover",s),s.status):s.status},notifyOut:function(){delete this.grid},notifyDrop:function(a,b,c){delete this.grid;if(!this.lastPos)return;var d=this.lastPos.c,e=this.lastPos.col,f=this.lastPos.p,g=a.panel,h=this.createEvent(a,b,c,e,d,f!==!1?f:d.items.getCount());if(this.portal.fireEvent("validatedrop",h)!==!1&&this.portal.fireEvent("beforedrop",h)!==!1){a.proxy.getProxy().remove(),g.el.dom.parentNode.removeChild(a.panel.el.dom),f!==!1?d.insert(f,g):d.add(g),d.doLayout(),this.portal.fireEvent("drop",h);var i=this.scrollPos.top;if(i){var j=this.portal.body.dom;setTimeout(function(){j.scrollTop=i},10)}}delete this.lastPos},getGrid:function(){var a=this.portal.bwrap.getBox();return a.columnX=[],this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})}),a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body),Ext.ux.Portal.DropZone.superclass.unreg.call(this)}}),Ext.ux.PortalColumn=Ext.extend(Ext.Container,{layout:"anchor",defaultType:"portlet",cls:"x-portal-column"}),Ext.reg("portalcolumn",Ext.ux.PortalColumn),Ext.ux.Portlet=Ext.extend(Ext.Panel,{anchor:"100%",frame:!0,collapsible:!0,draggable:!0,cls:"x-portlet"}),Ext.reg("portlet",Ext.ux.Portlet),Ext.ns("F3.TYPO3.History"),F3.TYPO3.History.HistoryManager=Ext.apply(Ext.History,{_state:{},initialize:function(){this.init(),this.on("change",function(a){this._updateState(a)})},_updateState:function(a){a=this._decode(a),F3.TYPO3.Utils.each(this._state,function(b,c){a[c]?(this._state[c]=a[c],this.fireEvent(c+"-changed",a[c])):(this.fireEvent(c+"-removed",a[b]),delete this._state[c]),delete a[c]},this),F3.TYPO3.Utils.each(a,function(a,b){this._state[b]=a,this.fireEvent(b+"-added",a)},this)},set:function(a,b){var c=F3.TYPO3.Utils.clone(this._state);return c[a]=b,this.add(this._encode(c)),this},remove:function(a){var b=F3.TYPO3.Utils.clone(this._state);return delete b[a],this.add(this._encode(b)),this},_encode:function(a){return a=Ext.util.JSON.encode(a),a=a.substr(1,a.length-2),a=a.replace(/"/g,""),a=a.replace(/\{/g,"!"),a=a.replace(/\}/g,"$"),a=a.replace(/:/g,"="),a=a.replace(/,/g,"&"),a},_decode:function(a){return a=decodeURIComponent(a),a=a.replace(/\=!/g,'":{"'),a=a.replace(/\$&/g,'"},"'),a=a.replace(/!/g,'{"'),a=a.replace(/\$/g,'"}'),a=a.replace(/\=/g,'":"'),a=a.replace(/&/g,'","'),a='{"'+a+'"}',a=Ext.util.JSON.decode(a),a}}),Ext.ns("F3.TYPO3.History"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.History.HistoryModule",{initialize:function(a){F3.TYPO3.History.HistoryManager.initialize(),a.on("afterBootstrap",function(){var a=F3.TYPO3.History.HistoryManager.getToken();a?F3.TYPO3.History.HistoryManager._updateState(a):this.fireEvent("emptyToken")},this)}}),Ext.ns("F3.TYPO3.Login"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Login.LoginModule",{initialize:function(a){a.on("afterBootstrap",function(){F3.TYPO3_Controller_LoginController.show(function(a){a&&F3.TYPO3.Login.LoginModule.fireEvent("updated",a.data)})},this),a.on("logout",function(){window.location.href=F3.TYPO3.Configuration.Application.frontendBaseUri},this)}}),Ext.ns("F3.TYPO3.Login"),F3.TYPO3.Login.Service=Ext.apply(new Ext.util.Observable,{logout:function(a,b){F3.TYPO3_Controller_LoginController.logout(function(){F3.TYPO3.Core.Application.fireEvent("logout"),Ext.isFunction(a)&&a.call(b)})}}),Ext.ns("F3.TYPO3.Management"),F3.TYPO3.Management.ManagementGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){var a=function(a){var b={__context:{workspaceName:F3.TYPO3.Configuration.Application.workspaceName,nodePath:d}};F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.getChildNodes(b,"!TYPO3:Page",a)};a.directCfg={method:{len:0}};var b={width:24,renderer:function(a){return'<span class="F3-TYPO3-Management-ManagementGrid-Icon F3-TYPO3-Icon-ContentType-'+a.replace(":","_")+'"></span>'},dataIndex:"__contentType"},c={header:"label",dataIndex:"__label"},d=this.nodePath,e={store:new Ext.data.DirectStore({directFn:a,autoLoad:!0,autoDestroy:!0,root:"data",fields:[]}),colModel:new Ext.grid.ColumnModel({defaults:{width:200,sortable:!1},columns:[]})};Ext.apply(this,e),F3.TYPO3.Management.ManagementGrid.superclass.initComponent.call(this),this.on("render",function(){this.body.mask("Loading...")}),this.store.on("load",function(){this.body.unmask()},this),this.store.on("metachange",function(a,d){var e=[b,c];Ext.each(d.fields,function(a){a.match(/^__/)||e.push({header:a,dataIndex:a})}),this.getColumnModel().setConfig(e,!1)},this)}}),Ext.reg("F3.TYPO3.Management.ManagementGrid",F3.TYPO3.Management.ManagementGrid),Ext.ns("F3.TYPO3.Management"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Management.ManagementModule",{configure:function(a){a.append("menu[main]","management",{tabCls:"F3-TYPO3-UserInterface-SectionMenu-ManagementTab",title:"Management",itemId:"management"}),a.append("management/components/west","defaultTree",{xtype:"F3.TYPO3.Management.ManagementTree",itemId:"managementWestDefaultTree"}),a.append("management/components/center","defaultGrid",{xtype:"F3.TYPO3.Management.ManagementNodeView",itemId:"managementCenterNodeView"})},initialize:function(a){a.afterInitializationOf("F3.TYPO3.UserInterface.UserInterfaceModule",function(a){a.addContentArea("management","managementView",{xtype:"F3.TYPO3.Management.ManagementView",id:"F3-TYPO3-Management-ManagementView"}),a.contentAreaOn("menu[main]/management","management","managementView")})}}),Ext.ns("F3.TYPO3.Management"),F3.TYPO3.Management.ManagementNodeView=Ext.extend(Ext.Panel,{initComponent:function(){var a={border:!1,layout:"fit",tbar:[{text:"Content",iconCls:"F3-TYPO3-Management-Content"}]};Ext.apply(this,a),F3.TYPO3.Management.ManagementNodeView.superclass.initComponent.call(this),F3.TYPO3.Management.ManagementModule.on("F3.TYPO3.Management.nodeSelected",function(a){this.removeAll(!0),this.add({xtype:"F3.TYPO3.Management.ManagementGrid",border:!0,padding:"6px",cls:"F3-TYPO3-Management-Grid-Element",nodePath:a.attributes.id}),this.doLayout()},this)}}),Ext.reg("F3.TYPO3.Management.ManagementNodeView",F3.TYPO3.Management.ManagementNodeView),Ext.ns("F3.TYPO3.Management"),F3.TYPO3.Management.ManagementTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){var a={cls:"F3-TYPO3-Tree-Container",tbar:[{text:"Page Tree",iconCls:"F3-TYPO3-Management-Tree"}],root:{nodeType:"async",text:F3.TYPO3.Configuration.Application.siteName,draggable:!1,autoScroll:!0,id:F3.TYPO3.Configuration.Application.siteNodePath},loader:new F3.TYPO3.Management.Tree.TreeLoader};Ext.apply(this,a),F3.TYPO3.Management.ManagementTree.superclass.initComponent.call(this),this.on("click",function(a){F3.TYPO3.Management.ManagementModule.fireEvent("F3.TYPO3.Management.nodeSelected",a)})}}),Ext.reg("F3.TYPO3.Management.ManagementTree",F3.TYPO3.Management.ManagementTree),Ext.ns("F3.TYPO3.Management"),F3.TYPO3.Management.ManagementView=Ext.extend(Ext.Container,{initComponent:function(){var a={layout:"border",items:[{region:"west",margins:"0 0 0 0",width:200,split:!0,collapsible:!1,layout:"card",items:this._getRegionItems("west"),activeItem:0},{region:"center",layout:"card",margins:"0",items:this._getRegionItems("center"),activeItem:0}]};Ext.apply(this,a),F3.TYPO3.Management.ManagementView.superclass.initComponent.call(this)},_getRegionItems:function(a){var b=[],c=F3.TYPO3.Core.Registry.get("management/components/"+a);return Ext.each(c,function(a){var c={};Ext.apply(c,a,{layout:"fit"}),b.push(c)}),b}}),Ext.reg("F3.TYPO3.Management.ManagementView",F3.TYPO3.Management.ManagementView),Ext.ns("F3.TYPO3.Management.Tree"),F3.TYPO3.Management.Tree.TreeLoader=Ext.extend(Ext.tree.TreeLoader,{directFn:function(a,b){var c={__context:{workspaceName:F3.TYPO3.Configuration.Application.workspaceName,nodePath:a}};F3.TYPO3_Service_ExtDirect_V1_Controller_NodeController.getChildNodesForTree(c,"TYPO3:Page",b)},processDirectResponse:function(a,b,c){b.status?this.handleResponse({responseData:Ext.isArray(a.data)?a.data:null,responseText:a,argument:c}):this.handleFailure({argument:c})}}),Ext.reg("F3.TYPO3.Management.Tree.TreeLoader",F3.TYPO3.Management.Tree.TreeLoader),Ext.ns("F3.TYPO3.Stores"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Stores.StoreModule",{initialize:function(a){a.on("afterBootstrap",this._initStores,this)},_initStores:function(){}}),Ext.namespace("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.BreadcrumbMenuComponent=function(){F3.TYPO3.UserInterface.BreadcrumbMenuComponent.superclass.constructor.apply(this,arguments)},Ext.extend(F3.TYPO3.UserInterface.BreadcrumbMenuComponent,Ext.BoxComponent,{basePath:null,initComponent:function(){var a={cls:"F3-TYPO3-UserInterface-BreadcrumbMenu",height:"47px"};Ext.apply(this,a),F3.TYPO3.UserInterface.BreadcrumbMenuComponent.superclass.initComponent.call(this),this.on("afterrender",function(){this._renderLevel(this.basePath)},this)},_renderLevel:function(a){var b;b=Ext.DomHelper.append(this.el,{tag:"span",cls:"F3-TYPO3-UserInterface-BreadcrumbMenu-SingleLevel"}),Ext.each(F3.TYPO3.Core.Registry.get(a+"/children"),function(c){var d,e;d=Ext.DomHelper.append(b,{tag:"span",cls:"F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem "+c.iconCls,"data-menupath":a+"/children/"+c.key}),e=Ext.DomHelper.append(d,{tag:"span",cls:"F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-Text",children:c.text}),Ext.get(d).on("click",this._onMenuItemClick,this),Ext.get(e).on("click",this._onInnerMenuItemClick,this)},this)},_onMenuItemClick:function(a,b){var c=Ext.get(b);c.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active")?this._deactivateActiveItem(c):this._activateItem(c)},_onInnerMenuItemClick:function(a,b){this._onMenuItemClick(a,b.parentNode)},_activateItem:function(a){if(a.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-Text"))return;var b=a.getAttribute("data-menupath");a.parent().select(".F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active").each(function(a){this._deactivateActiveItem(a)},this),a.addClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active"),this._hasChildren(b)&&(this._hideSiblings(a),this._renderArrow(),this._renderLevel(b)),F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("activate-"+b,this),a.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem")&&a.setStyle({width:a.getTextWidth()+"px"})},_deactivateActiveItem:function(a){var b=a.getAttribute("data-menupath");a.removeClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active"),setTimeout(this._removeWidthPropertyFromElement,25,[a]),a.parent().select(".F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-hidden").removeClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-hidden");var c=a.parent().next();while(c){var d=Ext.get(c);d.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-Separator")?(d.removeClass("F3-TYPO3-UserInterface-BreadcrumbMenu-Separator-active"),setTimeout(this._removeWidthPropertyFromElement,25,[d])):d.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-SingleLevel")&&(d.select(".F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active").each(function(a){F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("deactivate-"+a.getAttribute("data-menupath"),this),a.removeClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active")},this),d.select(".F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem").each(function(a){a.getStyle("opacity")!==0&&a.addClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-hideTransition")},this)),setTimeout(this._removeElement,200,[d]),c=d.next()}F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("deactivate-"+b,this)},_removeElement:function(a){Ext.get(a).remove()},_removeWidthPropertyFromElement:function(a){Ext.get(a).setStyle("width",null)},_hasChildren:function(a){var b=F3.TYPO3.Core.Registry.get(a+"/children");return b&&b.length>0},_renderArrow:function(){return},_hideSiblings:function(a){Ext.each(a.dom.parentNode.children,function(b){b!==a.dom&&Ext.fly(b).addClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-hidden")})},getModuleMenu:function(){return this.findParentByType(F3.TYPO3.UserInterface.ModuleMenu)},activateItem:function(a){var b;b=this.el.select("*[data-menupath="+F3.TYPO3.Core.Registry.rewritePath(a)+"]").first();if(b.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active"))return;this._activateItem(b)},deactivateItem:function(a){var b;b=this.el.select("*[data-menupath="+F3.TYPO3.Core.Registry.rewritePath(a)+"]").first();if(!b.hasClass("F3-TYPO3-UserInterface-BreadcrumbMenu-MenuItem-active"))return;this._deactivateActiveItem(b)}}),Ext.reg("F3.TYPO3.UserInterface.BreadcrumbMenuComponent",F3.TYPO3.UserInterface.BreadcrumbMenuComponent),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.ContentArea=Ext.extend(Ext.Panel,{layout:"card",initComponent:function(){var a={autoScroll:!0,border:!1,layoutOnCardChange:!0,items:[]};Ext.apply(this,a),F3.TYPO3.UserInterface.ContentArea.superclass.initComponent.call(this),F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("_ContentArea.initialized",this)}}),Ext.reg("F3.TYPO3.UserInterface.ContentArea",F3.TYPO3.UserInterface.ContentArea),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.ContentDialog=Ext.extend(Ext.Container,{cancelButton:!1,okButton:!1,infoText:!1,mode:"success",moduleDialog:null,initComponent:function(){var a,b,c,d;c=[],d=new Ext.KeyMap(document,[]),b={xtype:"toolbar",items:[]},this.cancelButton!=!1&&(b.items.push({xtype:"F3.TYPO3.Components.Button",cls:"F3-TYPO3-Components-Button",itemId:"cancelButton",text:this.cancelButton,scale:"large",handler:this._fireCancelEvent,scope:this}),d.on(Ext.EventObject.ESC,this._fireCancelEvent,this)),this.okButton!=!1&&(b.items.length>0&&b.items.push({xtype:"tbspacer",width:20}),b.items.push({xtype:"F3.TYPO3.Components.Button",itemId:"okButton",text:this.okButton,scale:"large",handler:this._fireOkEvent,scope:this,cls:"F3-TYPO3-Components-Button-type-"+this.mode})),this.infoText!=!1&&c.push({xtype:"panel",cls:"F3-TYPO3-UserInterface-ContentDialog-InfoText",border:!1,html:this.infoText,flex:0}),c.push({xtype:"panel",cls:"F3-TYPO3-UserInterface-ContentDialog-Panel",border:!1,tbar:b,ref:"panel"}),a={height:22,style:"position: relative; z-index: 500; overflow: show",items:c,cls:"F3-TYPO3-UserInterface-ContentDialog F3-TYPO3-UserInterface-ContentDialog-mode-"+this.mode},Ext.apply(this,a),F3.TYPO3.UserInterface.ContentDialog.superclass.initComponent.call(this)},_fireCancelEvent:function(){this.fireEvent("_cancelButtonClick")},_fireOkEvent:function(){this.fireEvent("_okButtonClick")}}),Ext.reg("F3.TYPO3.UserInterface.ContentDialog",F3.TYPO3.UserInterface.ContentDialog),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.DummyImage=Ext.extend(Ext.BoxComponent,{backgroundImage:null,initComponent:function(){var a={autoEl:{tag:"img",src:this.backgroundImage,width:100}};Ext.apply(this,a),F3.TYPO3.UserInterface.DummyImage.superclass.initComponent.call(this)}}),Ext.reg("F3.TYPO3.UserInterface.DummyImage",F3.TYPO3.UserInterface.DummyImage),Ext.ns("F3.TYPO3.UserInterface.Form"),F3.TYPO3.UserInterface.Form.FormFactory=new(Ext.extend(Ext.util.Observable,{createForm:function(a,b,c){var d=F3.TYPO3.Core.Registry,e,f;return b===undefined&&(b="standard"),e=d.get("form/type/"+a+"/"+b),f=this._processDefinition(e,a,"form"),Ext.apply(f,c),f},_processDefinition:function(a,b,c){var d=F3.TYPO3.Core.Registry,e=a.type,f,g,h,i,j;e===undefined&&(e=c);if(e=="form")i=d.get("schema/type/"+b),f={xtype:"F3.TYPO3.UserInterface.Form.GenericForm",type:b,title:a.title,api:{load:F3.TYPO3.Utils.getObjectByString(i.service.show),submit:F3.TYPO3.Utils.getObjectByString(i.service.update),update:F3.TYPO3.Utils.getObjectByString(i.service.update),create:F3.TYPO3.Utils.getObjectByString(i.service.create)}},g="field";else if(e=="field")j=d.get("schema/type/"+b+"/properties/"+a.property),h=j.type,f=F3.TYPO3.Utils.clone(d.get("form/editor/"+h)),Ext.apply(f,{name:a.property,fieldLabel:a.title}),j.validations&&Ext.each(j.validations,function(a){a.type==="NotEmpty"?f.allowBlank=!1:a.type==="RegularExpression"&&(f.validator=function(b){return b.match(new RegExp(a.options.regularExpression))?!0:"The given subject did not match the pattern."})});else return undefined;return a.children!==undefined&&(f.items=[],Ext.each(a.children,function(a){f.items.push(this._processDefinition(a,b,g))},this)),f}})),Ext.ns("F3.TYPO3.UserInterface.Form"),F3.TYPO3.UserInterface.Form.GenericForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){var a={paramsAsHash:!0,defaults:{listeners:{specialkey:{fn:function(a,b){b.getKey()==b.ENTER&&this.doSubmitForm()},scope:this}}},border:!1,layoutConfig:{labelSeparator:""},header:!1,cls:"F3-TYPO3-UserInterface-Form-GenericForm"};Ext.apply(this,Ext.apply(this.initialConfig,a)),F3.TYPO3.UserInterface.Form.GenericForm.superclass.initComponent.call(this),this.on("beforeaction",this._onFormBeforeAction,this),this.on("actioncomplete",this._onFormActionComplete,this),this.on("actionfailed",this._onFormActionComplete,this),this.on("render",this.onRenderLoad,this)},onRenderLoad:function(){this.autoLoad!==!1&&this.getForm().load({params:this.getLoadIdentifier(),success:this._loadValues,scope:this})},_loadValues:function(a,b){var c,d;c=b.result.data,d=this._convertNestedDataToFlatProperties(c),this.getForm().setValues(d)},_convertNestedDataToFlatProperties:function(a){var b={};return this._convertNestedDataToFlatPropertiesVisit(a,b,""),b},_convertNestedDataToFlatPropertiesVisit:function(a,b,c){var d;for(d in a)Ext.isObject(a[d])?this._convertNestedDataToFlatPropertiesVisit(a[d],b,c!==""?c+"."+d:d):b[c!==""?c+"."+d:d]=a[d]},doSubmitForm:function(){if(!this.getForm().isValid())return;var a=this.getForm().getValues();a=this._convertFlatPropertiesToNestedData(a),Ext.apply(a,this.getSubmitIdentifier()),this.getForm().api.submit.call(this,a,this.onSubmitSuccess,this)},_convertFlatPropertiesToNestedData:function(a){var b={},c,d;for(c in a)d=b,Ext.each(c.split(".").slice(0,-1),function(a){d[a]===undefined&&(d[a]={}),d=d[a]}),d[c.split(".").slice(-1)[0]]=a[c];return b},getLoadIdentifier:function(){},getSubmitIdentifier:function(){},onSubmitSuccess:function(){},_onFormBeforeAction:function(a,b){b.type==="directload"&&this.el.mask("Loading..."),b.type==="directsubmit"&&this.el.mask("Saving...")},_onFormActionComplete:function(a,b){b.type==="directload"&&this.el.unmask(),b.type==="directsubmit"&&this.el.unmask()}}),Ext.reg("F3.TYPO3.UserInterface.Form.GenericForm",F3.TYPO3.UserInterface.Form.GenericForm),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.Layout=Ext.extend(Ext.Viewport,{initComponent:function(){var a={layout:"vbox",layoutConfig:{align:"stretch"},items:[{xtype:"F3.TYPO3.UserInterface.TopBar",ref:"topBar",flex:0},{xtype:"F3.TYPO3.UserInterface.SectionMenu",ref:"sectionMenu",flex:1}]};Ext.apply(this,a),F3.TYPO3.UserInterface.Layout.superclass.initComponent.call(this),this.on("afterrender",this._addWallpaper,this)},_addWallpaper:function(){Ext.isDefined(this.layout.innerCt)&&this.layout.innerCt.addClass("F3-TYPO3-Wallpaper")}}),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.ModuleDialog=Ext.extend(Ext.Panel,{bodyStyle:"background: #656565",moduleMenu:null,initComponent:function(){var a={border:!1,flex:0,cls:"F3-TYPO3-UserInterface-ModuleDialog"};Ext.apply(this,a),F3.TYPO3.UserInterface.ModuleDialog.superclass.initComponent.call(this)},onOk:function(){this.moduleMenu.removeModuleDialog()},onCancel:function(){this.moduleMenu.removeModuleDialog()}}),Ext.reg("F3.TYPO3.UserInterface.ModuleDialog",F3.TYPO3.UserInterface.ModuleDialog),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.ModuleMenu=Ext.extend(Ext.Container,{basePath:null,viewFilter:{},specialMenu:null,_moduleDialog:null,_contentDialog:null,initComponent:function(){var a={cls:"F3-TYPO3-UserInterface-ModuleMenu",autoHeight:!0,bodyCfg:{cls:"F3-TYPO3-Overflow-Visible"},bwrapCfg:{cls:"F3-TYPO3-Overflow-Visible"},layoutConfig:{align:"stretch"},items:[this.viewFilter,{xtype:"container",layout:"hbox",items:[{xtype:"F3.TYPO3.UserInterface.BreadcrumbMenuComponent",itemId:this.itemId,ref:"../breadcrumbMenu",basePath:this.basePath,flex:1},this.specialMenu],flex:0},{xtype:"container",autoHeight:!0,layoutConfig:{align:"stretch"},itemId:"moduleDialogContainer",ref:"moduleDialogContainer",flex:1}]};Ext.apply(this,a),F3.TYPO3.UserInterface.ModuleMenu.superclass.initComponent.call(this)},showModuleDialog:function(a,b){var c=this.findParentByType("F3.TYPO3.Components.ModuleContainer");return this._moduleDialog=this.moduleDialogContainer.add(a),this._moduleDialog.moduleMenu=this,F3.TYPO3.UserInterface.UserInterfaceModule.viewport.doLayout(),c.doLayout(),b&&(this._contentDialog=Ext.ComponentMgr.create(b),this.add(this._contentDialog),this._contentDialog.on("_okButtonClick",this._moduleDialog.onOk,this._moduleDialog),this._contentDialog.on("_cancelButtonClick",this._moduleDialog.onCancel,this._moduleDialog)),this._moduleDialog},removeModuleDialog:function(){var a=this.findParentByType("F3.TYPO3.Components.ModuleContainer");this._moduleDialog&&this.moduleDialogContainer.removeAll(),this._contentDialog&&(this._contentDialog.destroy(),this._contentDialog=null),F3.TYPO3.UserInterface.UserInterfaceModule.viewport.doLayout(),a.doLayout(),this.addedModuleHeight=0}}),Ext.reg("F3.TYPO3.UserInterface.ModuleMenu",F3.TYPO3.UserInterface.ModuleMenu),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.SectionMenu=Ext.extend(Ext.TabPanel,{initComponent:function(){var a={border:!1,cls:"F3-TYPO3-UserInterface-SectionMenu",items:this._getSectionMenuItems()};Ext.apply(this,a),F3.TYPO3.UserInterface.SectionMenu.superclass.initComponent.call(this),this.on("tabchange",function(a,b){F3.TYPO3.History.HistoryManager.set("SectionMenu",b.itemId),F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("activate-menu/main/"+b.itemId,b)},this),F3.TYPO3.History.HistoryManager.on("SectionMenu-changed",function(a){F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.setActiveTab(a),F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("activate-menu/main/"+a,undefined)}),F3.TYPO3.History.HistoryManager.on("SectionMenu-added",function(a){F3.TYPO3.UserInterface.UserInterfaceModule.viewport.sectionMenu.setActiveTab(a),F3.TYPO3.UserInterface.UserInterfaceModule.fireEvent("activate-menu/main/"+a,undefined)}),F3.TYPO3.History.HistoryModule.on("emptyToken",function(){this.setActiveTab("content")},this)},_getSectionMenuItems:function(){var a=[],b=F3.TYPO3.Core.Registry.get("menu/main");return Ext.each(b,function(b){a.push(this._getTabComponentForMenuItem(b))},this),a},_getTabComponentForMenuItem:function(a){var b=a.viewFilter?a.viewFilter:{xtype:"container",height:0},c=a.specialMenu?a.specialMenu:{xtype:"box",width:0};return{xtype:"F3.TYPO3.Components.ModuleContainer",layout:"vbox",layoutConfig:{align:"stretch"},itemId:a.itemId,title:a.title,tabCls:a.tabCls,listeners:a.listeners,items:[{xtype:"F3.TYPO3.UserInterface.ModuleMenu",ref:"moduleMenu",menuId:"mainMenu",itemId:a.itemId,basePath:"menu/main/"+a.key,menuConfig:a.children,viewFilter:b,specialMenu:c,flex:0},{xtype:"F3.TYPO3.UserInterface.ContentArea",itemId:a.itemId+"-contentArea",ref:"contentArea",flex:1}]}}}),Ext.reg("F3.TYPO3.UserInterface.SectionMenu",F3.TYPO3.UserInterface.SectionMenu),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.TopBar=Ext.extend(Ext.Panel,{height:62,initComponent:function(){var a={layout:"vbox",layoutConfig:{padding:"5px",align:"stretch"},border:!1,bodyCssClass:"F3-TYPO3-UserInterface-TopBar-Wallpaper",items:[{height:32,xtype:"container",layout:"hbox",items:[{xtype:"box",width:150,height:32,flex:0},{xtype:"box",width:32,flex:0},{xtype:"box",width:230,height:32,flex:0},{xtype:"box",flex:1},{xtype:"box",id:"F3-TYPO3-TopBar-Logo",height:34,width:113,flex:2}]},{xtype:"container",layout:"hbox",items:[{xtype:"box",height:12,flex:1},{xtype:"panel",cls:"F3-TYPO3-Version",width:107,height:12,html:"Version "+F3.TYPO3.Configuration.Application.version,flex:0}]}]};Ext.apply(this,a),F3.TYPO3.UserInterface.TopBar.superclass.initComponent.call(this)}}),Ext.reg("F3.TYPO3.UserInterface.TopBar",F3.TYPO3.UserInterface.TopBar),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.UserInterface.UserInterfaceModule",{viewport:null,configure:function(a){a.set("form/editor",{string:{xtype:"textfield"},superStringEditor:{xtype:"textarea",transform:function(a){}}})},initialize:function(a){a.on("afterBootstrap",this._initViewport,this)},_initViewport:function(){this.viewport=new F3.TYPO3.UserInterface.Layout},moduleDialogOn:function(a,b,c){a=F3.TYPO3.Core.Registry.rewritePath(a),this.on("activate-"+a,function(d){var e=d.getModuleMenu().showModuleDialog(b,c);e.on("destroy",function(){d.getModuleMenu().breadcrumbMenu.deactivateItem(a)})}),this.on("deactivate-"+a,function(a){a.getModuleMenu().removeModuleDialog()})},addContentArea:function(a,b,c){this.on("_ContentArea.initialized",function(d){a+"-contentArea"==d.itemId&&d.add(Ext.apply(c,{itemId:b}))})},contentAreaOn:function(a,b,c){a=F3.TYPO3.Core.Registry.rewritePath(a),this.on("activate-"+a,function(){var a=F3.TYPO3.UserInterface.UserInterfaceModule.viewport,d=a.sectionMenu.getComponent(b);d.contentArea.getLayout().setActiveItem(c),d.doLayout()})}}),Ext.ns("F3.TYPO3.UserInterface"),F3.TYPO3.UserInterface.ViewFilterToolbar=Ext.extend(Ext.Toolbar,{initComponent:function(){var a={height:25,border:0,padding:0,flex:0,cls:"F3-TYPO3-UserInterface-ViewFilterToolbar",items:this._getToolbarItems()};Ext.apply(this,a),F3.TYPO3.UserInterface.ViewFilterToolbar.superclass.initComponent.call(this),this.on("render",this._afterRender,this)},_afterRender:function(){this.getEl().on("mouseover",this._onMouseOver,this),this.getEl().on("mouseout",this._onMouseOut,this)},_getToolbarItems:function(){var a=[],b=F3.TYPO3.Core.Registry.get("menu/viewFilterToolbar");return Ext.each(b,function(b){var c={};Ext.apply(c,b,{}),a.push(c)}),a},_onMouseOver:function(a){this.removeClass("F3-TYPO3-disabled")},_onMouseOut:function(a){this.addClass("F3-TYPO3-disabled")}}),Ext.reg("F3.TYPO3.UserInterface.ViewFilterToolbar",F3.TYPO3.UserInterface.ViewFilterToolbar),Ext.ns("F3.TYPO3"),F3.TYPO3.Utils={clone:function(a){if(!a||"object"!=typeof a)return a;if("function"==typeof a.clone)return a.clone();var b="[object Array]"===Object.prototype.toString.call(a)?[]:{},c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],d&&"object"==typeof d?b[c]=F3.TYPO3.Utils.clone(d):b[c]=d);return b},each:function(a,b,c){var d;for(d in a)a.hasOwnProperty(d)&&(v=a[d],b.call(c,v,d))},buildBackendUri:function(a){return F3.TYPO3.Configuration.Application.backendBaseUri+a},isEmptyObject:function(a){var b;for(b in 
a)return!1;return!0},getObjectByString:function(a){var b,c;return typeof a!="string"?undefined:(b=a.split("."),c=window[b[0]],Ext.each(b.slice(1),function(a){c=c[a]}),c)}},Ext.ns("F3.TYPO3.Workspace"),F3.TYPO3.Workspace.Service=Ext.apply(new Ext.util.Observable,{publishUserWorkspace:function(a,b){F3.TYPO3_Service_ExtDirect_V1_Controller_WorkspaceController.publishWorkspace(F3.TYPO3.Configuration.Application.workspaceName,"live",function(c){F3.TYPO3.Workspace.Service.updateWorkspaceStatus(),F3.TYPO3.Workspace.WorkspaceModule.fireEvent("publishedWorkspace"),Ext.isFunction(a)&&a.call(b,c)})},publishNode:function(a,b,c){F3.TYPO3_Service_ExtDirect_V1_Controller_WorkspaceController.publishNode(a,"live",function(d){F3.TYPO3.Workspace.Service.updateWorkspaceStatus(),F3.TYPO3.Workspace.WorkspaceModule.fireEvent("publishedNodes",a),Ext.isFunction(b)&&b.call(c,d)})},updateWorkspaceStatus:function(a,b){F3.TYPO3_Service_ExtDirect_V1_Controller_WorkspaceController.getStatus(F3.TYPO3.Configuration.Application.workspaceName,function(c){var d=c.data;F3.TYPO3.Workspace.WorkspaceModule.unpublishedNodesCount!==d.unpublishedNodesCount?(F3.TYPO3.Workspace.WorkspaceModule.unpublishedNodesCount=d.unpublishedNodesCount,d.changed=!0):d.changed=!1,F3.TYPO3.Workspace.WorkspaceModule.fireEvent("updatedWorkspaceStatus",d),Ext.isFunction(a)&&a.call(b,c)})}}),Ext.ns("F3.TYPO3.Workspace"),F3.TYPO3.Core.Application.createModule("F3.TYPO3.Workspace.WorkspaceModule",{initialize:function(a){a.on("afterBootstrap",function(){F3.TYPO3.Workspace.Service.updateWorkspaceStatus()}),F3.TYPO3.Workspace.WorkspaceModule.on("updatedWorkspaceStatus",function(){window.setTimeout(F3.TYPO3.Workspace.Service.updateWorkspaceStatus,6e3)})}}),function(){}.call(this)