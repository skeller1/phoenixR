/*!
* Aloha Editor
* Author & Copyright (c) 2010 Gentics Software GmbH
* aloha-sales@gentics.com
* Licensed unter the terms of http://www.aloha-editor.com/license.html
*/
/**
 * Create the Repositories object. Namespace for Repositories
 * @hide
 */
GENTICS.Aloha.Repositories||(GENTICS.Aloha.Repositories={}),GENTICS.Aloha.Repositories.LinkList=new GENTICS.Aloha.Repository("com.gentics.aloha.repositories.LinkList"),GENTICS.Aloha.Repositories.LinkList.settings.data=[{name:"Aloha Editor - The HTML5 Editor",url:"http://aloha-editor.com",type:"website"},{name:"Aloha Logo",url:"http://www.aloha-editor.com/images/aloha-editor-logo.png",type:"image"}],GENTICS.Aloha.Repositories.LinkList.folder=[],GENTICS.Aloha.Repositories.LinkList.init=function(){for(var a=0;a<this.settings.data.length;a++){var b=this.settings.data[a];b.repositoryId=this.repositoryId,b.id=b.id?b.id:b.url;var c=b.uri=this.parseUri(b.url),d=this.addFolder("",c.host),e=c.path.split("/");for(j=0;j<e.length;j++)e[j]&&e[j].lastIndexOf(".")<0&&(d=this.addFolder(d,e[j]));b.parentId=d,this.settings.data[a]=new GENTICS.Aloha.Repository.Document(b)}this.repositoryName="Linklist"},GENTICS.Aloha.Repositories.LinkList.addFolder=function(a,b){var c=a?"folder":"hostname",d=a?a+"/"+b:b;return b&&!this.folder[d]&&(this.folder[d]=new GENTICS.Aloha.Repository.Folder({id:d,name:b?b:d,parentId:a,type:"host",repositoryId:this.repositoryId})),d},GENTICS.Aloha.Repositories.LinkList.query=function(a,b){var c=this.settings.data.filter(function(b,c,d){var e=new RegExp(a.queryString,"i"),f=!1;return(!a.queryString||b.name.match(e)||b.url.match(e))&&(!a.objectTypeFilter||jQuery.inArray(b.type,a.objectTypeFilter)>-1)&&(!a.inFolderId||a.inFolderId==b.parentId)});b.call(this,c)},GENTICS.Aloha.Repositories.LinkList.getChildren=function(a,b){var c=[];for(e in this.folder){var d=this.folder[e].parentId;typeof this.folder[e]!="function"&&(this.folder[e].parentId==a.inFolderId||!this.folder[e].parentId&&a.inFolderId==this.repositoryId)&&c.push(this.folder[e])}b.call(this,c)},GENTICS.Aloha.Repositories.LinkList.parseUri=function(a){var b={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;while(e--)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d},GENTICS.Aloha.Repositories.LinkList.getObjectById=function(a,b){var c=[];for(var d=0;d<this.settings.data.length;d++)this.settings.data[d].id==a&&c.push(this.settings.data[d]);return b.call(this,c),!0}